<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ç å³°æ¶æ„å¸ˆæˆé•¿è®¡åˆ’</title>
    <link rel="stylesheet" type="text/css" href="../static/css/main.css">
</head>
<body>
<div class="nav">
    <div class="logo">
        
            ç å³°æ¶æ„å¸ˆæˆé•¿è®¡åˆ’
        
    </div>
<ul><li><a href="../index.html">0.Async</a></li><li><a href="../html/0.editor.html">0.editor</a></li><li><a href="../html/0.module.html">0.module</a></li><li><a href="../html/1.ES2015.html">1.ES2015</a></li><li><a href="../html/2.Promise.html">2.Promise</a></li><li><a href="../html/3.Node.html">3.Node</a></li><li><a href="../html/4.NodeInstall.html">4.NodeInstall</a></li><li><a href="../html/5.REPL.html">5.REPL</a></li><li><a href="../html/6.NodeCore.html">6.NodeCore</a></li><li><a href="../html/7.module&amp;NPM.html">7.module&amp;NPM</a></li><li><a href="../html/8.Encoding.html">8.Encoding</a></li><li><a href="../html/9.Buffer.html">9.Buffer</a></li><li><a href="../html/10.fs.html">10.fs</a></li><li><a href="../html/11.Stream-1.html">11.Stream-1</a></li><li><a href="../html/11.Stream-2.html">11.Stream-2</a></li><li><a href="../html/11.Stream-3.html">11.Stream-3</a></li><li><a href="../html/11.Stream-4.html">11.Stream-4</a></li><li><a href="../html/12-Network-2.html">12-Network-2</a></li><li><a href="../html/12.NetWork-3.html">12.NetWork-3</a></li><li><a href="../html/12.Network-1.html">12.Network-1</a></li><li><a href="../html/13.tcp.html">13.tcp</a></li><li><a href="../html/14.http-1.html">14.http-1</a></li><li><a href="../html/14.http-2.html">14.http-2</a></li><li><a href="../html/15.compress.html">15.compress</a></li><li><a href="../html/16.crypto.html">16.crypto</a></li><li><a href="../html/17.process.html">17.process</a></li><li><a href="../html/18.yargs.html">18.yargs</a></li><li><a href="../html/19.cache.html">19.cache</a></li><li><a href="../html/20.action.html">20.action</a></li><li><a href="../html/21.https.html">21.https</a></li><li><a href="../html/22.cookie.html">22.cookie</a></li><li><a href="../html/23.session.html">23.session</a></li><li><a href="../html/24.express-1.html">24.express-1</a></li><li><a href="../html/24.express-2.html">24.express-2</a></li><li><a href="../html/24.express-3.html">24.express-3</a></li><li><a href="../html/24.express-4.html">24.express-4</a></li><li><a href="../html/25.koa-1.html">25.koa-1</a></li><li><a href="../html/26.webpack-1-basic.html">26.webpack-1-basic</a></li><li><a href="../html/26.webpack-2-optimize.html">26.webpack-2-optimize</a></li><li><a href="../html/26.webpack-3.tapable.html">26.webpack-3.tapable</a></li><li><a href="../html/26.webpack-4-AST.html">26.webpack-4-AST</a></li><li><a href="../html/26.webpack-5-source.html">26.webpack-5-source</a></li><li><a href="../html/26.webpack-6-loader.html">26.webpack-6-loader</a></li><li><a href="../html/26.webpack-7-plugin.html">26.webpack-7-plugin</a></li><li><a href="../html/26.webpack-8-hand.html">26.webpack-8-hand</a></li><li><a href="../html/27.react-1.html">27.react-1</a></li><li><a href="../html/27.react-2.html">27.react-2</a></li><li><a href="../html/27.react-3.html">27.react-3</a></li><li><a href="../html/27.react-4-immutable.html">27.react-4-immutable</a></li><li><a href="../html/27.react-5-react-dom-diff.html">27.react-5-react-dom-diff</a></li><li><a href="../html/27.react-6.html">27.react-6</a></li><li><a href="../html/28.react-mobx.html">28.react-mobx</a></li><li><a href="../html/28.redux-0.html">28.redux-0</a></li><li><a href="../html/28.redux-1.html">28.redux-1</a></li><li><a href="../html/28.redux-2-ä¸­é—´ä»¶.html">28.redux-2-ä¸­é—´ä»¶</a></li><li><a href="../html/28.redux-jwt-back.html">28.redux-jwt-back</a></li><li><a href="../html/28.redux-jwt-front.html">28.redux-jwt-front</a></li><li><a href="../html/29.mongodb-1.html">29.mongodb-1</a></li><li><a href="../html/29.mongodb-2.html">29.mongodb-2</a></li><li><a href="../html/29.mongodb-3.html">29.mongodb-3</a></li><li><a href="../html/29.mongodb-4.html">29.mongodb-4</a></li><li><a href="../html/29.mongodb-5.html">29.mongodb-5</a></li><li><a href="../html/29.mongodb-6.html">29.mongodb-6</a></li><li><a href="../html/30.cms-1-mysql.html">30.cms-1-mysql</a></li><li><a href="../html/30.cms-2-mysql.html">30.cms-2-mysql</a></li><li><a href="../html/30.cms-3-mysql.html">30.cms-3-mysql</a></li><li><a href="../html/30.cms-4-nunjucks.html">30.cms-4-nunjucks</a></li><li><a href="../html/30.cms-5-mock.html">30.cms-5-mock</a></li><li><a href="../html/30.cms-6-egg.html">30.cms-6-egg</a></li><li><a href="../html/30.cms-7-api.html">30.cms-7-api</a></li><li><a href="../html/30.cms-8-roadhog.html">30.cms-8-roadhog</a></li><li><a href="../html/30.cms-9-yaml.html">30.cms-9-yaml</a></li><li><a href="../html/30.cms-10-umi.html">30.cms-10-umi</a></li><li><a href="../html/30.cms-11-saga.html">30.cms-11-saga</a></li><li><a href="../html/30.cms-12-dva.html">30.cms-12-dva</a></li><li><a href="../html/30.cms-13-dva-ant.html">30.cms-13-dva-ant</a></li><li><a href="../html/30.cms-14-front.html">30.cms-14-front</a></li><li><a href="../html/30.cms-15-deploy.html">30.cms-15-deploy</a></li><li><a href="../html/31.dva.html">31.dva</a></li><li><a href="../html/33.redis.html">33.redis</a></li><li><a href="../html/34.unittest.html">34.unittest</a></li><li><a href="../html/35.jwt.html">35.jwt</a></li><li><a href="../html/36.websocket-1.html">36.websocket-1</a></li><li><a href="../html/36.websocket-2.html">36.websocket-2</a></li><li><a href="../html/38.chat-api-1.html">38.chat-api-1</a></li><li><a href="../html/38.chat-api-2.html">38.chat-api-2</a></li><li><a href="../html/38.chat-3.html">38.chat-3</a></li><li><a href="../html/38.chat-api-3.html">38.chat-api-3</a></li><li><a href="../html/38.chat.html">38.chat</a></li><li><a href="../html/38.chat2.html">38.chat2</a></li><li><a href="../html/38.chat2.html">38.chat2</a></li><li><a href="../html/39.crawl-0.html">39.crawl-0</a></li><li><a href="../html/39.crawl-1.html">39.crawl-1</a></li><li><a href="../html/39.crawl-2.html">39.crawl-2</a></li><li><a href="../html/40.deploy.html">40.deploy</a></li><li><a href="../html/41.safe.html">41.safe</a></li><li><a href="../html/42.test.html">42.test</a></li><li><a href="../html/43.nginx.html">43.nginx</a></li><li><a href="../html/44.enzyme.html">44.enzyme</a></li><li><a href="../html/45.docker.html">45.docker</a></li><li><a href="../html/46.elastic.html">46.elastic</a></li><li><a href="../html/47.oauth.html">47.oauth</a></li><li><a href="../html/48.wxpay.html">48.wxpay</a></li><li><a href="../html/index.html">index</a></li><li><a href="../html/51.typescript.html">51.typescript</a></li><li><a href="../html/52.UML.html">52.UML</a></li><li class="active"><a href="../html/53.design.html">53.design</a></li><li><a href="../html/index.html">index</a></li><li><a href="../html/54.linux.html">54.linux</a></li><li><a href="../html/57.ts.html">57.ts</a></li><li><a href="../html/56.react-ssr.html">56.react-ssr</a></li><li><a href="../html/58.ts_react.html">58.ts_react</a></li><li><a href="../html/59.ketang.html">59.ketang</a></li><li><a href="../html/59.ketang2.html">59.ketang2</a></li><li><a href="../html/31.saga.html">31.saga</a></li></ul></div>


<div class="warpper">

    <div class="page-toc">
        <ul><li><a href="#t01. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡">1. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡</a><ul><li><a href="#t11.1 æ¦‚å¿µ">1.1 æ¦‚å¿µ</a></li><li><a href="#t21.2 ç»§æ‰¿">1.2 ç»§æ‰¿</a></li><li><a href="#t31.3 å°è£…">1.3 å°è£…</a></li><li><a href="#t41.4 å¤šæ€">1.4 å¤šæ€</a></li></ul></li><li><a href="#t52. è®¾è®¡åŸåˆ™">2. è®¾è®¡åŸåˆ™</a><ul><li><a href="#t62.1 ä»€ä¹ˆæ˜¯è®¾è®¡ï¼Ÿ">2.1 ä»€ä¹ˆæ˜¯è®¾è®¡ï¼Ÿ</a></li></ul></li><li><a href="#t72.2 SOLIDäº”å¤§è®¾è®¡åŸåˆ™">2.2 SOLIDäº”å¤§è®¾è®¡åŸåˆ™</a><ul><li><a href="#t82.2.1 S å•ä¸€èŒè´£åŸåˆ™">2.2.1 S å•ä¸€èŒè´£åŸåˆ™</a></li><li><a href="#t92.2.2 O å¼€æ”¾å°é—­åŸåˆ™">2.2.2 O å¼€æ”¾å°é—­åŸåˆ™</a></li><li><a href="#t102.2.3 L é‡Œæ°æ›¿æ¢åŸåˆ™">2.2.3 L é‡Œæ°æ›¿æ¢åŸåˆ™</a></li><li><a href="#t112.2.4  I æ¥å£éš”ç¦»åŸåˆ™">2.2.4  I æ¥å£éš”ç¦»åŸåˆ™</a></li><li><a href="#t122.2.5 D ä¾èµ–å€’ç½®åŸåˆ™">2.2.5 D ä¾èµ–å€’ç½®åŸåˆ™</a></li></ul></li><li><a href="#t133. 23ç§è®¾è®¡æ¨¡å¼">3. 23ç§è®¾è®¡æ¨¡å¼</a><ul><li><a href="#t143.1 åˆ›å»ºå‹">3.1 åˆ›å»ºå‹</a></li><li><a href="#t153.2 ç»“æ„å‹æ¨¡å¼">3.2 ç»“æ„å‹æ¨¡å¼</a></li><li><a href="#t163.3 è¡Œä¸ºå‹">3.3 è¡Œä¸ºå‹</a></li></ul></li><li><a href="#t174. å·¥å‚æ¨¡å¼">4. å·¥å‚æ¨¡å¼</a><ul><li><a href="#t184.1 ç®€å•å·¥å‚æ¨¡å¼">4.1 ç®€å•å·¥å‚æ¨¡å¼</a><ul><li><a href="#t194.1.1 ç±»å›¾">4.1.1 ç±»å›¾</a></li><li><a href="#t204.1.2 ä»£ç ">4.1.2 ä»£ç </a></li><li><a href="#t214.1.3 ç»å…¸åœºæ™¯">4.1.3 ç»å…¸åœºæ™¯</a><ul><li><a href="#t224.1.3.1 jQuery">4.1.3.1 jQuery</a></li><li><a href="#t234.1.3.2 React">4.1.3.2 React</a></li></ul></li></ul></li><li><a href="#t244.2 å·¥å‚æ–¹æ³•æ¨¡å¼">4.2 å·¥å‚æ–¹æ³•æ¨¡å¼</a><ul><li><a href="#t254.2.1 ç±»å›¾">4.2.1 ç±»å›¾</a></li><li><a href="#t264.2.2 ä»£ç ">4.2.2 ä»£ç </a></li></ul></li><li><a href="#t274.3 æŠ½è±¡å·¥å‚æ¨¡å¼">4.3 æŠ½è±¡å·¥å‚æ¨¡å¼</a><ul><li><a href="#t284.3.1 ç±»å›¾">4.3.1 ç±»å›¾</a></li><li><a href="#t294.3.2 ä»£ç ">4.3.2 ä»£ç </a></li></ul></li></ul></li><li><a href="#t305.å•ä¾‹æ¨¡å¼">5.å•ä¾‹æ¨¡å¼</a><ul><li><a href="#t315.1 ç±»å›¾">5.1 ç±»å›¾</a></li><li><a href="#t325.2 ä»£ç ">5.2 ä»£ç </a><ul><li><a href="#t335.2.1 typescript">5.2.1 typescript</a></li><li><a href="#t345.2.2 ES5å•ä¾‹æ¨¡å¼">5.2.2 ES5å•ä¾‹æ¨¡å¼</a></li><li><a href="#t355.2.3 é€æ˜å•ä¾‹">5.2.3 é€æ˜å•ä¾‹</a></li><li><a href="#t365.2.4 å•ä¾‹ä¸æ„å»ºåˆ†ç¦»">5.2.4 å•ä¾‹ä¸æ„å»ºåˆ†ç¦»</a></li><li><a href="#t375.2.5 å°è£…å˜åŒ–">5.2.5 å°è£…å˜åŒ–</a></li><li><a href="#t385.2.6 å‘½åç©ºé—´">5.2.6 å‘½åç©ºé—´</a></li></ul></li><li><a href="#t395.3 åœºæ™¯">5.3 åœºæ™¯</a><ul><li><a href="#t405.3.1 jQuery">5.3.1 jQuery</a></li><li><a href="#t415.3.2 æ¨¡æ€çª—å£">5.3.2 æ¨¡æ€çª—å£</a></li><li><a href="#t425.3.3 store">5.3.3 store</a></li><li><a href="#t435.3.4 ç¼“å­˜">5.3.4 ç¼“å­˜</a></li><li><a href="#t445.3.5 LRUç¼“å­˜">5.3.5 LRUç¼“å­˜</a></li></ul></li></ul></li><li><a href="#t456. é€‚é…å™¨æ¨¡å¼">6. é€‚é…å™¨æ¨¡å¼</a><ul><li><a href="#t466.1 ç±»å›¾">6.1 ç±»å›¾</a></li><li><a href="#t476.2 ä»£ç ">6.2 ä»£ç </a></li><li><a href="#t486.3 åœºæ™¯">6.3 åœºæ™¯</a><ul><li><a href="#t496.3.1 æ’ä»¶é€‚é…">6.3.1 æ’ä»¶é€‚é…</a></li><li><a href="#t506.3.1 promisify">6.3.1 promisify</a></li><li><a href="#t516.3.2 jquery">6.3.2 jquery</a></li><li><a href="#t526.3.3 computed">6.3.3 computed</a></li></ul></li></ul></li><li><a href="#t537.è£…é¥°å™¨æ¨¡å¼">7.è£…é¥°å™¨æ¨¡å¼</a><ul><li><a href="#t547.1 ç±»å›¾">7.1 ç±»å›¾</a></li><li><a href="#t557.2 ä»£ç ">7.2 ä»£ç </a></li><li><a href="#t567.3 åŒ…è£…å™¨">7.3 åŒ…è£…å™¨</a></li><li><a href="#t577.4 AOP">7.4 AOP</a></li><li><a href="#t587.3 åœºæ™¯">7.3 åœºæ™¯</a><ul><li><a href="#t597.3.1 åŸ‹ç‚¹">7.3.1 åŸ‹ç‚¹</a></li><li><a href="#t607.3.2 è¡¨å•æ ¡éªŒ">7.3.2 è¡¨å•æ ¡éªŒ</a></li><li><a href="#t617.3.3 é˜²CSRFæ”»å‡»">7.3.3 é˜²CSRFæ”»å‡»</a><ul><li><a href="#t627.3.3.1 å—ä¿¡ä»»ç½‘ç«™">7.3.3.1 å—ä¿¡ä»»ç½‘ç«™</a></li><li><a href="#t637.3.3.2 login">7.3.3.2 login</a></li><li><a href="#t647.3.3.3 å–æ¬¾">7.3.3.3 å–æ¬¾</a></li><li><a href="#t657.3.3.4 éä¿¡ä»»ç½‘ç«™">7.3.3.4 éä¿¡ä»»ç½‘ç«™</a></li><li><a href="#t667.3.3.5 csrf">7.3.3.5 csrf</a></li><li><a href="#t677.3.3.6 form">7.3.3.6 form</a></li></ul></li><li><a href="#t687.3.4 æ”¯æŒdecorators">7.3.4 æ”¯æŒdecorators</a></li><li><a href="#t697.3.5 ç±»decorators">7.3.5 ç±»decorators</a></li><li><a href="#t707.3.6 æ–¹æ³•decorators">7.3.6 æ–¹æ³•decorators</a></li></ul></li></ul></li><li><a href="#t718.ä»£ç†æ¨¡å¼">8.ä»£ç†æ¨¡å¼</a><ul><li><a href="#t728.1 ç±»å›¾">8.1 ç±»å›¾</a></li><li><a href="#t738.2 ä»£ç ">8.2 ä»£ç </a></li><li><a href="#t748.3 åœºæ™¯">8.3 åœºæ™¯</a><ul><li><a href="#t758.3.1 äº‹ä»¶å§”æ‰˜">8.3.1 äº‹ä»¶å§”æ‰˜</a></li><li><a href="#t768.3.2 å›¾ç‰‡æ‡’åŠ è½½">8.3.2 å›¾ç‰‡æ‡’åŠ è½½</a><ul><li><a href="#t778.3.2.1 app.js">8.3.2.1 app.js</a></li><li><a href="#t788.3.2.2 index.html">8.3.2.2 index.html</a></li></ul></li><li><a href="#t798.3.3 é˜²æŠ–ä»£ç†">8.3.3 é˜²æŠ–ä»£ç†</a><ul><li><a href="#t808.3.3.1 todo.html">8.3.3.1 todo.html</a></li><li><a href="#t818.3.3.2 todos.html">8.3.3.2 todos.html</a></li><li><a href="#t828.3.3.3 app.js">8.3.3.3 app.js</a></li><li><a href="#t838.3.3.4 app.js">8.3.3.4 app.js</a></li></ul></li><li><a href="#t848.3.4 ä»£ç†è·¨åŸŸ">8.3.4 ä»£ç†è·¨åŸŸ</a><ul><li><a href="#t858.3.4.1 3000.js">8.3.4.1 3000.js</a></li><li><a href="#t868.3.4.2 4000.js">8.3.4.2 4000.js</a></li><li><a href="#t878.3.4.3 index.html">8.3.4.3 index.html</a></li><li><a href="#t888.3.4.4 target.html">8.3.4.4 target.html</a></li></ul></li><li><a href="#t898.3.5 ä»£ç†ç¼“å­˜">8.3.5 ä»£ç†ç¼“å­˜</a></li><li><a href="#t908.3.5 $.proxy">8.3.5 $.proxy</a></li><li><a href="#t918.3.6 Proxy">8.3.6 Proxy</a></li></ul></li></ul></li><li><a href="#t929. å¤–è§‚æ¨¡å¼">9. å¤–è§‚æ¨¡å¼</a><ul><li><a href="#t939.1 ç±»å›¾">9.1 ç±»å›¾</a></li><li><a href="#t949.2 ä»£ç ">9.2 ä»£ç </a></li><li><a href="#t959.3 ä»£ç ">9.3 ä»£ç </a></li><li><a href="#t969.3 åœºæ™¯">9.3 åœºæ™¯</a><ul><li><a href="#t979.3.1 redux">9.3.1 redux</a></li></ul></li></ul></li><li><a href="#t9810.è§‚å¯Ÿè€…æ¨¡å¼">10.è§‚å¯Ÿè€…æ¨¡å¼</a><ul><li><a href="#t9910.1 ç±»å›¾">10.1 ç±»å›¾</a></li><li><a href="#t10010.2 ä»£ç ">10.2 ä»£ç </a></li><li><a href="#t10110.3 åœºæ™¯">10.3 åœºæ™¯</a><ul><li><a href="#t10210.3.1 äº‹ä»¶ç»‘å®š">10.3.1 äº‹ä»¶ç»‘å®š</a></li><li><a href="#t10310.3.2 Promise">10.3.2 Promise</a></li><li><a href="#t10410.3.3 callbacks">10.3.3 callbacks</a></li><li><a href="#t10510.3.4 events">10.3.4 events</a></li><li><a href="#t10610.3.5 æµ">10.3.5 æµ</a></li><li><a href="#t10710.3.6 httpæœåŠ¡å™¨">10.3.6 httpæœåŠ¡å™¨</a></li><li><a href="#t10810.3.7 ç”Ÿå‘½å‘¨æœŸå‡½æ•°">10.3.7 ç”Ÿå‘½å‘¨æœŸå‡½æ•°</a></li><li><a href="#t10910.3.8 vue watch">10.3.8 vue watch</a></li><li><a href="#t11010.3.9 redux">10.3.9 redux</a></li></ul></li></ul></li><li><a href="#t11111. è¿­ä»£å™¨æ¨¡å¼">11. è¿­ä»£å™¨æ¨¡å¼</a><ul><li><a href="#t11211.1 ç±»å›¾">11.1 ç±»å›¾</a></li><li><a href="#t11311.2 ä»£ç ">11.2 ä»£ç </a></li><li><a href="#t11411.3 åœºæ™¯">11.3 åœºæ™¯</a><ul><li><a href="#t11511.3.1 Iterator">11.3.1 Iterator</a></li><li><a href="#t11611.3.2 ...">11.3.2 ...</a></li><li><a href="#t11711.3.3 yield*">11.3.3 yield*</a></li></ul></li><li><a href="#t11812. çŠ¶æ€æ¨¡å¼">12. çŠ¶æ€æ¨¡å¼</a></li><li><a href="#t11912.1 ç±»å›¾">12.1 ç±»å›¾</a></li><li><a href="#t12012.2 ä»£ç ">12.2 ä»£ç </a></li><li><a href="#t12112.3 åº”ç”¨åœºæ™¯">12.3 åº”ç”¨åœºæ™¯</a><ul><li><a href="#t12212.3.1 ç‚¹èµ">12.3.1 ç‚¹èµ</a></li><li><a href="#t12312.3.2 promise">12.3.2 promise</a></li><li><a href="#t12412.3.3  Reactå¯¼èˆª">12.3.3  Reactå¯¼èˆª</a></li><li><a href="#t12512.3.4 æœ‰é™çŠ¶æ€æœº">12.3.4 æœ‰é™çŠ¶æ€æœº</a></li></ul></li></ul></li><li><a href="#t12613.ç­–ç•¥æ¨¡å¼">13.ç­–ç•¥æ¨¡å¼</a><ul><li><a href="#t12713.1 ç±»å›¾">13.1 ç±»å›¾</a></li><li><a href="#t12813.2 ä»£ç ">13.2 ä»£ç </a></li><li><a href="#t12913.3 åº”ç”¨åœºæ™¯">13.3 åº”ç”¨åœºæ™¯</a><ul><li><a href="#t13013.3.1 animate">13.3.1 animate</a></li><li><a href="#t13113.3.2 è¡¨å•æ ¡éªŒ">13.3.2 è¡¨å•æ ¡éªŒ</a></li></ul></li></ul></li><li><a href="#t13214. åŸå‹æ¨¡å¼">14. åŸå‹æ¨¡å¼</a><ul><li><a href="#t13314.1 ç±»å›¾">14.1 ç±»å›¾</a></li><li><a href="#t13414.2 ä»£ç ">14.2 ä»£ç </a></li><li><a href="#t13514.3 JavaScriptä¸­çš„åŸå‹">14.3 JavaScriptä¸­çš„åŸå‹</a><ul><li><a href="#t13614.3.1 å‡½æ•°å’Œå¯¹è±¡">14.3.1 å‡½æ•°å’Œå¯¹è±¡</a></li><li><a href="#t13714.3.2 prototype">14.3.2 prototype</a></li><li><a href="#t13814.3.3 instanceof">14.3.3 instanceof</a></li><li><a href="#t13914.3.4 åŸå‹é“¾">14.3.4 åŸå‹é“¾</a></li><li><a href="#t14014.3.5 åŸå‹ä¼˜åŠ¿">14.3.5 åŸå‹ä¼˜åŠ¿</a></li></ul></li><li><a href="#t14114.4 åœºæ™¯">14.4 åœºæ™¯</a></li></ul></li><li><a href="#t14215. æ¡¥æ¥æ¨¡å¼">15. æ¡¥æ¥æ¨¡å¼</a><ul><li><a href="#t14315.1 ç±»å›¾">15.1 ç±»å›¾</a></li><li><a href="#t14415.2 ä»£ç ">15.2 ä»£ç </a></li><li><a href="#t14515.3 åº”ç”¨åœºæ™¯">15.3 åº”ç”¨åœºæ™¯</a><ul><li><a href="#t14615.3.1 äº‹ä»¶ç›‘å¬">15.3.1 äº‹ä»¶ç›‘å¬</a></li><li><a href="#t14715.3.2 åˆ†ç¦»å˜åŒ–">15.3.2 åˆ†ç¦»å˜åŒ–</a></li></ul></li></ul></li><li><a href="#t14816. ç»„åˆæ¨¡å¼">16. ç»„åˆæ¨¡å¼</a><ul><li><a href="#t14916.1 ç±»å›¾">16.1 ç±»å›¾</a></li><li><a href="#t15016.2 ä»£ç ">16.2 ä»£ç </a></li><li><a href="#t15116.3 åº”ç”¨åœºæ™¯">16.3 åº”ç”¨åœºæ™¯</a><ul><li><a href="#t15216.3.1 æ–‡ä»¶å¤¹å’Œæ–‡ä»¶">16.3.1 æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</a></li><li><a href="#t15316.3.2 ç»˜åˆ¶è¡¨å•">16.3.2 ç»˜åˆ¶è¡¨å•</a></li></ul></li></ul></li><li><a href="#t15417. å‘½ä»¤æ¨¡å¼">17. å‘½ä»¤æ¨¡å¼</a><ul><li><a href="#t15517.1 ç±»å›¾">17.1 ç±»å›¾</a></li><li><a href="#t15617.2 ä»£ç ">17.2 ä»£ç </a></li><li><a href="#t15717.3 åº”ç”¨åœºæ™¯">17.3 åº”ç”¨åœºæ™¯</a><ul><li><a href="#t15817.3.1 è®¡æ•°å™¨">17.3.1 è®¡æ•°å™¨</a></li><li><a href="#t15917.3.2 æ’¤é”€å’Œé‡åš">17.3.2 æ’¤é”€å’Œé‡åš</a></li><li><a href="#t16017.3.3 å¤šæ­¥æ’¤é”€å’Œé‡åš">17.3.3 å¤šæ­¥æ’¤é”€å’Œé‡åš</a></li></ul></li></ul></li><li><a href="#t16118. äº«å…ƒæ¨¡å¼">18. äº«å…ƒæ¨¡å¼</a><ul><li><a href="#t16218.1 ç±»å›¾">18.1 ç±»å›¾</a></li><li><a href="#t16318.2 ä»£ç ">18.2 ä»£ç </a></li><li><a href="#t16418.3 åœºæ™¯">18.3 åœºæ™¯</a><ul><li><a href="#t16518.3.1 å¯¹è±¡">18.3.1 å¯¹è±¡</a></li><li><a href="#t16618.3.2 åˆ†é¡µ">18.3.2 åˆ†é¡µ</a></li></ul></li></ul></li><li><a href="#t16719. æ¨¡ç‰ˆæ–¹æ³•">19. æ¨¡ç‰ˆæ–¹æ³•</a><ul><li><a href="#t16819.1 ç±»å›¾">19.1 ç±»å›¾</a></li><li><a href="#t16919.2 ä»£ç ">19.2 ä»£ç </a></li><li><a href="#t17019.3 åœºæ™¯">19.3 åœºæ™¯</a><ul><li><a href="#t17119.3.1 æç¤ºæ¡†">19.3.1 æç¤ºæ¡†</a></li><li><a href="#t17219.3.2">19.3.2</a></li></ul></li></ul></li><li><a href="#t17320. èŒè´£é“¾æ¨¡å¼">20. èŒè´£é“¾æ¨¡å¼</a><ul><li><a href="#t17420.1 ç±»å›¾">20.1 ç±»å›¾</a></li><li><a href="#t17520.2 ä»£ç ">20.2 ä»£ç </a></li></ul></li><li><a href="#t17621. å¤‡å¿˜å½•æ¨¡å¼">21. å¤‡å¿˜å½•æ¨¡å¼</a><ul><li><a href="#t17721.1 ç±»å›¾">21.1 ç±»å›¾</a></li><li><a href="#t17821.2 ä»£ç ">21.2 ä»£ç </a></li></ul></li><li><a href="#t17922. ä¸­ä»‹è€…æ¨¡å¼">22. ä¸­ä»‹è€…æ¨¡å¼</a><ul><li><a href="#t18022.1 ç±»åº“">22.1 ç±»åº“</a></li><li><a href="#t18122.2 ä»£ç ">22.2 ä»£ç </a></li></ul></li><li><a href="#t18223. è®¿é—®è€…æ¨¡å¼">23. è®¿é—®è€…æ¨¡å¼</a><ul><li><a href="#t18323.1 ç»„æˆéƒ¨åˆ†">23.1 ç»„æˆéƒ¨åˆ†</a></li><li><a href="#t18423.2 ç±»å›¾">23.2 ç±»å›¾</a></li><li><a href="#t18523.3 ä»£ç ">23.3 ä»£ç </a></li><li><a href="#t18623.3 åº”ç”¨åœºæ™¯">23.3 åº”ç”¨åœºæ™¯</a></li></ul></li><li><a href="#t18724. è§£é‡Šå™¨æ¨¡å¼">24. è§£é‡Šå™¨æ¨¡å¼</a><ul><li><a href="#t18824.1 ç±»å›¾">24.1 ç±»å›¾</a></li><li><a href="#t18924.2 ä»£ç ">24.2 ä»£ç </a></li></ul></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h2 id="t01. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡">1. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ <a href="#t01. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡"> # </a></h2>
<ul>
<li>æŠŠå®¢è§‚å¯¹è±¡æŠ½è±¡æˆå±æ€§æ•°æ®å’Œå¯¹æ•°æ®çš„ç›¸å…³æ“ä½œï¼ŒæŠŠå†…éƒ¨ç»†èŠ‚å’Œä¸æƒ³å…³çš„ä¿¡æ¯éšè—èµ·æ¥ï¼ŒæŠŠåŒä¸€ä¸ªç±»å‹çš„å®¢è§‚å¯¹è±¡çš„å±æ€§æ•°æ®å’Œæ“ä½œç»‘å®šåœ¨ä¸€èµ·ï¼Œå°è£…æˆç±»ï¼Œå¹¶ä¸”å…è®¸åˆ†æˆä¸åŒå±‚æ¬¡è¿›è¡ŒæŠ½è±¡ï¼Œé€šè¿‡ç»§æ‰¿å®ç°å±æ€§å’Œæ“ä½œçš„å…±äº«<ul>
<li>é¢å‘å¯¹è±¡çš„åˆ†æ OOA</li>
<li>é¢å‘å¯¹è±¡çš„è®¾è®¡ OOD</li>
<li>é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ OOP</li>
</ul>
</li>
</ul>
<h3 id="t11.1 æ¦‚å¿µ">1.1 æ¦‚å¿µ <a href="#t11.1 æ¦‚å¿µ"> # </a></h3>
<ul>
<li>ç±»ã€å¯¹è±¡(å®ä¾‹)</li>
<li>çˆ¶ç±»æ˜¯å…¬å…±çš„</li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">this</span>.name=name;
    }
    eat() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> eat`</span>)
    }
}
<span class="hljs-keyword">let</span> animal=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">'åŠ¨ç‰©'</span>);
animal.eat();
</code></pre>
<h3 id="t21.2 ç»§æ‰¿">1.2 ç»§æ‰¿ <a href="#t21.2 ç»§æ‰¿"> # </a></h3>
<ul>
<li>å­ç±»ç»§æ‰¿çˆ¶ç±»</li>
<li>ç»§æ‰¿å¯ä»¥æŠŠå…¬å…±æ–¹æ³•æŠ½ç¦»å‡ºæ¥ï¼Œæé«˜å¤ç”¨ï¼Œå‡å°‘å†—ä½™</li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">this</span>.name=name;
    }
    eat() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> eat`</span>)
    }
    speak() {

    }
}
<span class="hljs-keyword">let</span> animal=<span class="hljs-keyword">new</span> Animal(<span class="hljs-string">'åŠ¨ç‰©'</span>);
animal.eat();

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>{
    <span class="hljs-keyword">constructor</span>(name,age) {
        <span class="hljs-keyword">super</span>(name);
        <span class="hljs-keyword">this</span>.age=age;
    }
    speak() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> is barking!`</span>);
    }
}
<span class="hljs-keyword">let</span> dog=<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">'ğŸ¶'</span>,<span class="hljs-number">5</span>);
dog.eat();
dog.bark();
</code></pre>
<h3 id="t31.3 å°è£…">1.3 å°è£… <a href="#t31.3 å°è£…"> # </a></h3>
<ul>
<li>æŠŠæ•°æ®å°è£…èµ·æ¥</li>
<li>å‡å°‘è€¦åˆï¼Œä¸è¯¥å¤–éƒ¨è®¿é—®çš„ä¸è¦è®©å¤–éƒ¨è®¿é—®</li>
<li>åˆ©äºæ•°æ®çš„æ¥å£æƒé™ç®¡ç†</li>
<li>ES6 ç›®å‰ä¸æ”¯æŒï¼Œä¸€èˆ¬è®¤ä¸º_å¼€å¤´çš„éƒ½ä¼šç§æœ‰çš„ï¼Œä¸è¦ä½¿ç”¨</li>
<li>å®ç°<ul>
<li>public:å…¬æœ‰ä¿®é¥°ç¬¦ï¼Œå¯ä»¥åœ¨ç±»å†…æˆ–è€…ç±»å¤–ä½¿ç”¨publicä¿®é¥°çš„å±æ€§æˆ–è€…è¡Œä¸ºï¼Œé»˜è®¤ä¿®é¥°ç¬¦</li>
<li>protected:å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦ï¼Œå¯ä»¥æœ¬ç±»å’Œå­ç±»ä¸­ä½¿ç”¨protectedä¿®é¥°çš„å±æ€§å’Œè¡Œä¸º</li>
<li>private : ç§æœ‰ä¿®é¥°ç¬¦ï¼Œåªå¯ä»¥åœ¨ç±»å†…ä½¿ç”¨privateä¿®é¥°çš„å±æ€§å’Œè¡Œä¸º</li>
</ul>
</li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
    public name;
    protected age;
    private weight;
    <span class="hljs-keyword">constructor</span>(name,age,weight) {
        <span class="hljs-keyword">this</span>.name=name;
        <span class="hljs-keyword">this</span>.age=age;
        <span class="hljs-keyword">this</span>.weight=weight;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
    private money;
    <span class="hljs-keyword">constructor</span>(name,age,weight,money) {
        <span class="hljs-keyword">super</span>(name,age,weight);
        <span class="hljs-keyword">this</span>.money=money;
    }
    getName() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
    }
    getAge() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.age);
    }
    getWeight() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.weight);
    }
}
<span class="hljs-keyword">let</span> p=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">'zfpx'</span>,<span class="hljs-number">9</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>);
<span class="hljs-built_in">console</span>.log(p.name);
<span class="hljs-built_in">console</span>.log(p.age);
<span class="hljs-built_in">console</span>.log(p.weight);
</code></pre>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                    <span class="hljs-attr">options</span>: {
                        <span class="hljs-attr">presets</span>:[<span class="hljs-string">"@babel/preset-env"</span>]
                    }
                }
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.ts$/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'ts-loader'</span>
                }
            }
        ]
    }
</code></pre>
<h3 id="t41.4 å¤šæ€">1.4 å¤šæ€ <a href="#t41.4 å¤šæ€"> # </a></h3>
<ul>
<li>åŒä¸€ä¸ªæ¥å£å¯ä»¥ä¸åŒå®ç°</li>
<li>ä¿æŒå­ç±»çš„å¼€æ”¾æ€§å’Œçµæ´»æ€§</li>
<li>é¢å‘æ¥å£ç¼–ç¨‹  </li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>{
    public name;
    protected age;
    private weight;
    <span class="hljs-keyword">constructor</span>(name,age,weight) {
        <span class="hljs-keyword">this</span>.name=name;
        <span class="hljs-keyword">this</span>.age=age;
        <span class="hljs-keyword">this</span>.weight=weight;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
    private money;
    <span class="hljs-keyword">constructor</span>(name,age,weight,money) {
        <span class="hljs-keyword">super</span>(name,age,weight);
        <span class="hljs-keyword">this</span>.money=money;
    }
    speak() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ä½ å¥½!'</span>);
    }    
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>{
    private money;
    <span class="hljs-keyword">constructor</span>(name,age,weight) {
        <span class="hljs-keyword">super</span>(name,age,weight);
    }
    speak() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ±ªæ±ªæ±ª!'</span>);
    }    
}

<span class="hljs-keyword">let</span> p=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">'zfpx'</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);
p.speak();
<span class="hljs-keyword">let</span> d=<span class="hljs-keyword">new</span> Dog(<span class="hljs-string">'zfpx'</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);
d.speak();
</code></pre>
<h2 id="t52. è®¾è®¡åŸåˆ™">2. è®¾è®¡åŸåˆ™ <a href="#t52. è®¾è®¡åŸåˆ™"> # </a></h2>
<h3 id="t62.1 ä»€ä¹ˆæ˜¯è®¾è®¡ï¼Ÿ">2.1 ä»€ä¹ˆæ˜¯è®¾è®¡ï¼Ÿ <a href="#t62.1 ä»€ä¹ˆæ˜¯è®¾è®¡ï¼Ÿ"> # </a></h3>
<ul>
<li>æŒ‰å“ªä¸€ç§æ€è·¯æˆ–è€…æ ‡å‡†æ¥å®ç°åŠŸèƒ½</li>
<li>åŠŸèƒ½ç›¸åŒï¼Œå¯ä»¥æœ‰ä¸åŒè®¾è®¡çš„æ–¹å¼</li>
<li>éœ€æ±‚å¦‚æœä¸æ–­å˜åŒ–ï¼Œè®¾è®¡çš„ä½œç”¨æ‰èƒ½ä½“ç°å‡ºæ¥</li>
</ul>
<h2 id="t72.2 SOLIDäº”å¤§è®¾è®¡åŸåˆ™">2.2 SOLIDäº”å¤§è®¾è®¡åŸåˆ™ <a href="#t72.2 SOLIDäº”å¤§è®¾è®¡åŸåˆ™"> # </a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">é¦–å­—æ¯</th>
<th style="text-align:left">æŒ‡ä»£</th>
<th style="text-align:left">æ¦‚å¿µ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">S</td>
<td style="text-align:left">å•ä¸€èŒè´£åŸåˆ™</td>
<td style="text-align:left">å•ä¸€åŠŸèƒ½åŸåˆ™è®¤ä¸ºå¯¹è±¡åº”è¯¥ä»…å…·æœ‰ä¸€ç§å•ä¸€åŠŸèƒ½çš„æ¦‚å¿µã€‚</td>
</tr>
<tr>
<td style="text-align:left">O</td>
<td style="text-align:left">å¼€æ”¾å°é—­åŸåˆ™</td>
<td style="text-align:left">å¼€é—­åŸåˆ™è®¤ä¸ºâ€œè½¯ä»¶ä½“åº”è¯¥æ˜¯å¯¹äºæ‰©å±•å¼€æ”¾çš„ï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹å°é—­çš„â€çš„æ¦‚å¿µã€‚</td>
</tr>
<tr>
<td style="text-align:left">L</td>
<td style="text-align:left">é‡Œæ°æ›¿æ¢åŸåˆ™</td>
<td style="text-align:left">é‡Œæ°æ›¿æ¢åŸåˆ™è®¤ä¸ºâ€œç¨‹åºä¸­çš„å¯¹è±¡åº”è¯¥æ˜¯å¯ä»¥åœ¨ä¸æ”¹å˜ç¨‹åºæ­£ç¡®æ€§çš„å‰æä¸‹è¢«å®ƒçš„å­ç±»æ‰€æ›¿æ¢çš„â€çš„æ¦‚å¿µã€‚å‚è€ƒ å¥‘çº¦å¼è®¾è®¡ã€‚</td>
</tr>
<tr>
<td style="text-align:left">I</td>
<td style="text-align:left">æ¥å£éš”ç¦»åŸåˆ™</td>
<td style="text-align:left">æ¥å£éš”ç¦»åŸåˆ™è®¤ä¸ºâ€œå¤šä¸ªç‰¹å®šå®¢æˆ·ç«¯æ¥å£è¦å¥½äºä¸€ä¸ªå®½æ³›ç”¨é€”çš„æ¥å£â€[5] çš„æ¦‚å¿µã€‚</td>
</tr>
<tr>
<td style="text-align:left">D</td>
<td style="text-align:left">ä¾èµ–åè½¬åŸåˆ™</td>
<td style="text-align:left">ä¾èµ–åè½¬åŸåˆ™è®¤ä¸ºä¸€ä¸ªæ–¹æ³•åº”è¯¥éµä»â€œä¾èµ–äºæŠ½è±¡è€Œä¸æ˜¯ä¸€ä¸ªå®ä¾‹â€[5] çš„æ¦‚å¿µã€‚ä¾èµ–æ³¨å…¥æ˜¯è¯¥åŸåˆ™çš„ä¸€ç§å®ç°æ–¹å¼ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="t82.2.1 S å•ä¸€èŒè´£åŸåˆ™">2.2.1 S å•ä¸€èŒè´£åŸåˆ™ <a href="#t82.2.1 S å•ä¸€èŒè´£åŸåˆ™"> # </a></h3>
<ul>
<li>Single responsibility principle</li>
<li>ä¸€ä¸ªç¨‹åºåªåšå¥½ä¸€ä»¶äº‹</li>
<li>å¦‚æœåŠŸèƒ½ç‰¹åˆ«å¤æ‚å°±è¿›è¡Œæ‹†åˆ†</li>
</ul>
<h3 id="t92.2.2 O å¼€æ”¾å°é—­åŸåˆ™">2.2.2 O å¼€æ”¾å°é—­åŸåˆ™ <a href="#t92.2.2 O å¼€æ”¾å°é—­åŸåˆ™"> # </a></h3>
<ul>
<li>Open Closed Principle</li>
<li>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</li>
<li>å¢åŠ éœ€æ±‚æ—¶ï¼Œæ‰©å±•æ–°ä»£ç ï¼Œè€Œéä¿®æ”¹å·²æœ‰ä»£ç </li>
<li>è¿™æ˜¯è½¯ä»¶è®¾è®¡çš„ç»ˆæç›®æ ‡</li>
</ul>
<p>src/utils/request.js</p>
<pre><code class="lang-js">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJSON</span>(<span class="hljs-params">response</span>) </span>{
  <span class="hljs-keyword">return</span> response.json();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkStatus</span>(<span class="hljs-params">response</span>) </span>{
  <span class="hljs-keyword">if</span> (response.status &gt;= <span class="hljs-number">200</span> &amp;&amp; response.status &lt; <span class="hljs-number">300</span>) {
    <span class="hljs-keyword">return</span> response;
  }

  <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(response.statusText);
  error.response = response;
  <span class="hljs-keyword">throw</span> error;
}


<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">url, options</span>) </span>{
  <span class="hljs-keyword">return</span> fetch(url, options)
    .then(checkStatus)
    .then(parseJSON)
    .then(<span class="hljs-function"><span class="hljs-params">data</span>=&gt;</span>{data})
    .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> ({ err }));
}
</code></pre>
<h3 id="t102.2.3 L é‡Œæ°æ›¿æ¢åŸåˆ™">2.2.3 L é‡Œæ°æ›¿æ¢åŸåˆ™ <a href="#t102.2.3 L é‡Œæ°æ›¿æ¢åŸåˆ™"> # </a></h3>
<ul>
<li>Liskov Substitution Principle</li>
<li>å­ç±»èƒ½è¦†ç›–çˆ¶ç±»</li>
<li>çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±èƒ½å‡ºç°</li>
<li>JSä½¿ç”¨æ¯”è¾ƒå°‘</li>
</ul>
<h3 id="t112.2.4  I æ¥å£éš”ç¦»åŸåˆ™">2.2.4  I æ¥å£éš”ç¦»åŸåˆ™ <a href="#t112.2.4  I æ¥å£éš”ç¦»åŸåˆ™"> # </a></h3>
<ul>
<li>Interface Segregation Principle</li>
<li>ä¿æŒæ¥å£çš„å•ä¸€ç‹¬ç«‹ï¼Œé¿å…å‡ºç°èƒ–æ¥å£</li>
<li>JSä¸­æ²¡æœ‰æ¥å£ï¼Œä½¿ç”¨è¾ƒå°‘</li>
<li>ç±»ä¼¼äºå•ä¸€èŒè´£åŸåˆ™ï¼Œæ›´å…³æ³¨æ¥å£</li>
</ul>
<h3 id="t122.2.5 D ä¾èµ–å€’ç½®åŸåˆ™">2.2.5 D ä¾èµ–å€’ç½®åŸåˆ™ <a href="#t122.2.5 D ä¾èµ–å€’ç½®åŸåˆ™"> # </a></h3>
<ul>
<li>Dependence Inversion Principle</li>
<li>é¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“å®ç°</li>
<li>ä½¿ç”¨æ–¹åªå…³æ³¨æ¥å£è€Œä¸å…³æ³¨å…·ä½“ç±»çš„å®ç°</li>
<li>JSä¸­ä½¿ç”¨è¾ƒå°‘ï¼ˆæ²¡æœ‰æ¥å£ï¼Œå¼±ç±»å‹ï¼‰</li>
</ul>
<h2 id="t133. 23ç§è®¾è®¡æ¨¡å¼">3. 23ç§è®¾è®¡æ¨¡å¼ <a href="#t133. 23ç§è®¾è®¡æ¨¡å¼"> # </a></h2>
<h3 id="t143.1 åˆ›å»ºå‹">3.1 åˆ›å»ºå‹ <a href="#t143.1 åˆ›å»ºå‹"> # </a></h3>
<ul>
<li>å·¥å‚æ¨¡å¼(å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€ç®€å•å·¥å‚æ¨¡å¼)</li>
<li>å»ºé€ è€…æ¨¡å¼</li>
<li>å•ä¾‹æ¨¡å¼</li>
<li>åŸå‹æ¨¡å¼</li>
</ul>
<h3 id="t153.2 ç»“æ„å‹æ¨¡å¼">3.2 ç»“æ„å‹æ¨¡å¼ <a href="#t153.2 ç»“æ„å‹æ¨¡å¼"> # </a></h3>
<ul>
<li>é€‚é…å™¨æ¨¡å¼</li>
<li>è£…é¥°å™¨æ¨¡å¼</li>
<li>ä»£ç†æ¨¡å¼</li>
<li>å¤–è§‚æ¨¡å¼</li>
<li>å·§æ¥æ¨¡å¼</li>
<li>ç»„åˆæ¨¡å¼</li>
<li>äº«å…ƒæ¨¡å¼</li>
</ul>
<h3 id="t163.3 è¡Œä¸ºå‹">3.3 è¡Œä¸ºå‹ <a href="#t163.3 è¡Œä¸ºå‹"> # </a></h3>
<ul>
<li>ç­–ç•¥æ¨¡å¼</li>
<li>æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼</li>
<li>è¿­ä»£å™¨æ¨¡å¼</li>
<li>èŒè´£é“¾æ¨¡å¼</li>
<li>å‘½ä»¤æ¨¡å¼</li>
<li>å¤‡å¿˜å½•æ¨¡å¼</li>
<li>çŠ¶æ€æ¨¡å¼</li>
<li>è®¿é—®è€…æ¨¡å¼</li>
<li>ä¸­ä»‹è€…æ¨¡å¼</li>
<li>è§£é‡Šå™¨æ¨¡å¼</li>
</ul>
<h2 id="t174. å·¥å‚æ¨¡å¼">4. å·¥å‚æ¨¡å¼ <a href="#t174. å·¥å‚æ¨¡å¼"> # </a></h2>
<h3 id="t184.1 ç®€å•å·¥å‚æ¨¡å¼">4.1 ç®€å•å·¥å‚æ¨¡å¼ <a href="#t184.1 ç®€å•å·¥å‚æ¨¡å¼"> # </a></h3>
<ul>
<li>ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹<h4 id="t194.1.1 ç±»å›¾">4.1.1 ç±»å›¾ <a href="#t194.1.1 ç±»å›¾"> # </a></h4>
</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192757_d81529bf_1720749.jpeg" alt="simplefactory"></p>
<h4 id="t204.1.2 ä»£ç ">4.1.2 ä»£ç  <a href="#t204.1.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Plant</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">this</span>.name=name;
    }
    grow() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'growing~~~~~~'</span>);    
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Apple</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Plant</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">super</span>(name);
        <span class="hljs-keyword">this</span>.taste=<span class="hljs-string">'ç”œ'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Orange</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Plant</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">super</span>(name);
        <span class="hljs-keyword">this</span>.taste=<span class="hljs-string">'é…¸'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Factory</span></span>{
    <span class="hljs-keyword">static</span> create(name) {
        <span class="hljs-keyword">switch</span> (name) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'apple'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Apple(<span class="hljs-string">'è‹¹æœ'</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">'orange'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Orange(<span class="hljs-string">'æ©˜å­'</span>);
        }
    }
}
<span class="hljs-keyword">let</span> apple=Factory.create(<span class="hljs-string">'apple'</span>);
<span class="hljs-built_in">console</span>.log(apple);
<span class="hljs-keyword">let</span> orange=Factory.create(<span class="hljs-string">'orange'</span>);
<span class="hljs-built_in">console</span>.log(orange);
</code></pre>
<h4 id="t214.1.3 ç»å…¸åœºæ™¯">4.1.3 ç»å…¸åœºæ™¯ <a href="#t214.1.3 ç»å…¸åœºæ™¯"> # </a></h4>
<h5 id="t224.1.3.1 jQuery">4.1.3.1 jQuery <a href="#t224.1.3.1 jQuery"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">jQuery</span></span>{
    <span class="hljs-keyword">constructor</span>(selector){
        <span class="hljs-keyword">let</span> elements = <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.querySelectorAll(selector));
        <span class="hljs-keyword">let</span> length = elements?elements.length:<span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;length;i++){
            <span class="hljs-keyword">this</span>[i]=elements[i];
        }
        <span class="hljs-keyword">this</span>.length = length;
    }
    html(){

    }
}
<span class="hljs-built_in">window</span>.$ = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selector</span>)</span>{
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> jQuery(selector);
}
</code></pre>
<h5 id="t234.1.3.2 React">4.1.3.2 React <a href="#t234.1.3.2 React"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Vnode</span></span>{
    <span class="hljs-keyword">constructor</span>(tag,attrs,children){
        <span class="hljs-keyword">this</span>.tag = tag;
        <span class="hljs-keyword">this</span>.attrs = attrs;
        <span class="hljs-keyword">this</span>.children = children;
    }
}
React.createElement = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">tag,attrs,children</span>)</span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Vnode(tag,attr,children);
}
</code></pre>
<h3 id="t244.2 å·¥å‚æ–¹æ³•æ¨¡å¼">4.2 å·¥å‚æ–¹æ³•æ¨¡å¼ <a href="#t244.2 å·¥å‚æ–¹æ³•æ¨¡å¼"> # </a></h3>
<ul>
<li>å·¥å‚æ–¹æ³•æ¨¡å¼Factory Methodï¼Œåˆç§°å¤šæ€æ€§å·¥å‚æ¨¡å¼ã€‚</li>
<li>åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ ¸å¿ƒçš„å·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰çš„äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºçš„å·¥ä½œäº¤ç»™å­ç±»å»åšã€‚</li>
</ul>
<h4 id="t254.2.1 ç±»å›¾">4.2.1 ç±»å›¾ <a href="#t254.2.1 ç±»å›¾"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192757_4be3dac2_1720749.jpeg" alt="factorymethod"></p>
<h4 id="t264.2.2 ä»£ç ">4.2.2 ä»£ç  <a href="#t264.2.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Plant</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">this</span>.name=name;
    }
    grow() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'growing~~~~~~'</span>);    
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Apple</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Plant</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">super</span>(name);
        <span class="hljs-keyword">this</span>.taste=<span class="hljs-string">'ç”œ'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Orange</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Plant</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">super</span>(name);
        <span class="hljs-keyword">this</span>.taste=<span class="hljs-string">'é…¸'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppleFactory</span></span>{
    create() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Apple();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrangeFactory</span></span>{
    create() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Orange();
    }
}
<span class="hljs-keyword">const</span> settings={
    <span class="hljs-string">'apple'</span>: AppleFactory,
    <span class="hljs-string">'orange'</span>:OrangeFactory
}
<span class="hljs-keyword">let</span> apple=<span class="hljs-keyword">new</span> settings[<span class="hljs-string">'apple'</span>]().create();
<span class="hljs-built_in">console</span>.log(apple);
<span class="hljs-keyword">let</span> orange=<span class="hljs-keyword">new</span> settings[<span class="hljs-string">'orange'</span>]().create();
<span class="hljs-built_in">console</span>.log(orange);
</code></pre>
<h3 id="t274.3 æŠ½è±¡å·¥å‚æ¨¡å¼">4.3 æŠ½è±¡å·¥å‚æ¨¡å¼ <a href="#t274.3 æŠ½è±¡å·¥å‚æ¨¡å¼"> # </a></h3>
<ul>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯æŒ‡å½“æœ‰å¤šä¸ªæŠ½è±¡è§’è‰²æ—¶ï¼Œä½¿ç”¨çš„ä¸€ç§å·¥å‚æ¨¡å¼</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥å‘å®¢æˆ·ç«¯æä¾›ä¸€ä¸ªæ¥å£ï¼Œä½¿å®¢æˆ·ç«¯åœ¨ä¸å¿…æŒ‡å®šäº§å“çš„å…·ä½“çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºå¤šä¸ªäº§å“æ—ä¸­çš„äº§å“å¯¹è±¡</li>
</ul>
<h4 id="t284.3.1 ç±»å›¾">4.3.1 ç±»å›¾ <a href="#t284.3.1 ç±»å›¾"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192757_7dc3c74a_1720749.jpeg" alt="abstractfactory"></p>
<h4 id="t294.3.2 ä»£ç ">4.3.2 ä»£ç  <a href="#t294.3.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span></span>{
    render() {

    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppleButton</span></span>{
    render() {
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'è‹¹æœæŒ‰é’®'</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WindowButton</span></span>{
    render() {
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'WindowsæŒ‰é’®'</span>);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Icon</span></span>{
    render() {

    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppleIcon</span></span>{
    render() {
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'è‹¹æœå›¾æ ‡'</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WindowIcon</span></span>{
    render() {
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Windowså›¾æ ‡'</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Factory</span></span>{
    createButton() {}
    createIcon() {}
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppleFactory</span></span>{
    createButton() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AppleButton();
    }
    createIcon() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AppleButton();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WindowsFactory</span></span>{
    createButton() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> WindowButton();
    }
    createIcon() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> WindowIcon();
    }
}
<span class="hljs-keyword">const</span> settings={
    <span class="hljs-string">'apple'</span>: AppleFactory,
    <span class="hljs-string">'windows'</span>:WindowsFactory
}
<span class="hljs-keyword">let</span> appleFactory=<span class="hljs-keyword">new</span> settings[<span class="hljs-string">'apple'</span>]();
appleFactory.createButton().render();
appleFactory.createIcon().render();

<span class="hljs-keyword">let</span> windowsFactory=<span class="hljs-keyword">new</span> settings[<span class="hljs-string">'windows'</span>]();
windowsFactory.createButton().render();
windowsFactory.createIcon().render();
</code></pre>
<h2 id="t305.å•ä¾‹æ¨¡å¼">5.å•ä¾‹æ¨¡å¼ <a href="#t305.å•ä¾‹æ¨¡å¼"> # </a></h2>
<h4 id="t315.1 ç±»å›¾">5.1 ç±»å›¾ <a href="#t315.1 ç±»å›¾"> # </a></h4>
<p><a href="http://img.zhufengpeixun.cn/singleobject.jpg">singleobject</a></p>
<h4 id="t325.2 ä»£ç ">5.2 ä»£ç  <a href="#t325.2 ä»£ç "> # </a></h4>
<h5 id="t335.2.1 typescript">5.2.1 typescript <a href="#t335.2.1 typescript"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span> </span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">this</span>.name = name;
    }
    <span class="hljs-keyword">static</span> getInstance(name) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.instance) {
            <span class="hljs-keyword">this</span>.instance = <span class="hljs-keyword">new</span> Window(name);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.instance;
    }
}

<span class="hljs-keyword">var</span> w1 = Window.getInstance();
<span class="hljs-keyword">var</span> w2 = Window.getInstance();
<span class="hljs-built_in">console</span>.log(w1 === w2);
</code></pre>
<h5 id="t345.2.2 ES5å•ä¾‹æ¨¡å¼">5.2.2 ES5å•ä¾‹æ¨¡å¼ <a href="#t345.2.2 ES5å•ä¾‹æ¨¡å¼"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span>  Window = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
}
Window.prototype.getName=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
}
Window.getInstance=(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">window</span>=<span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>)
           <span class="hljs-built_in">window</span>=<span class="hljs-keyword">new</span> Window(name);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>;
    }
})();
<span class="hljs-keyword">let</span> <span class="hljs-built_in">window</span>=Window.getInstance(<span class="hljs-string">'zfpx'</span>);
<span class="hljs-built_in">window</span>.getName();
</code></pre>
<h5 id="t355.2.3 é€æ˜å•ä¾‹">5.2.3 é€æ˜å•ä¾‹ <a href="#t355.2.3 é€æ˜å•ä¾‹"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> Window=(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">window</span>;
    <span class="hljs-keyword">let</span> Window=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.name=name;
            <span class="hljs-keyword">return</span> (<span class="hljs-built_in">window</span>=<span class="hljs-keyword">this</span>);
        }
    }
    Window.prototype.getName=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
    }
    <span class="hljs-keyword">return</span> Window;
})();

<span class="hljs-keyword">let</span> window1=<span class="hljs-keyword">new</span> Window(<span class="hljs-string">'zfpx'</span>);
<span class="hljs-keyword">let</span> window2=<span class="hljs-keyword">new</span> Window(<span class="hljs-string">'zfpx'</span>);
window1.getName();
<span class="hljs-built_in">console</span>.log(window1 === window2)
</code></pre>
<h5 id="t365.2.4 å•ä¾‹ä¸æ„å»ºåˆ†ç¦»">5.2.4 å•ä¾‹ä¸æ„å»ºåˆ†ç¦» <a href="#t365.2.4 å•ä¾‹ä¸æ„å»ºåˆ†ç¦»"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Window</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
}
Window.prototype.getName=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
}

<span class="hljs-keyword">let</span> createSingle=(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> instance;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
        <span class="hljs-keyword">if</span> (!instance) {
            instance=<span class="hljs-keyword">new</span> Window();
        }
        <span class="hljs-keyword">return</span> instance;
    }
})();

<span class="hljs-keyword">let</span> window1=<span class="hljs-keyword">new</span> createSingle(<span class="hljs-string">'zfpx'</span>);
<span class="hljs-keyword">let</span> window2=<span class="hljs-keyword">new</span> createSingle(<span class="hljs-string">'zfpx'</span>);
window1.getName();
<span class="hljs-built_in">console</span>.log(window1 === window2)
</code></pre>
<h5 id="t375.2.5 å°è£…å˜åŒ–">5.2.5 å°è£…å˜åŒ– <a href="#t375.2.5 å°è£…å˜åŒ–"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Window</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
}
Window.prototype.getName=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
}

<span class="hljs-keyword">let</span> createSingle=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Constructor</span>) </span>{
    <span class="hljs-keyword">let</span> instance;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!instance) {
            Constructor.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
            <span class="hljs-built_in">Object</span>.setPrototypeOf(<span class="hljs-keyword">this</span>,Constructor.prototype)
            instance=<span class="hljs-keyword">this</span>;
        }
        <span class="hljs-keyword">return</span> instance;
    }
};
<span class="hljs-keyword">let</span> CreateWindow=createSingle(Window);
<span class="hljs-keyword">let</span> window1=<span class="hljs-keyword">new</span> CreateWindow(<span class="hljs-string">'zfpx'</span>);
<span class="hljs-keyword">let</span> window2=<span class="hljs-keyword">new</span> CreateWindow(<span class="hljs-string">'zfpx'</span>);
window1.getName();
<span class="hljs-built_in">console</span>.log(window1 === window2)
</code></pre>
<h5 id="t385.2.6 å‘½åç©ºé—´">5.2.6 å‘½åç©ºé—´ <a href="#t385.2.6 å‘½åç©ºé—´"> # </a></h5>
<ul>
<li>ç”¨æˆ·ç¼–å†™çš„ä»£ç ä¸å†…éƒ¨çš„ç±»/å‡½æ•°/å¸¸é‡æˆ–ç¬¬ä¸‰æ–¹ç±»/å‡½æ•°/å¸¸é‡ä¹‹é—´çš„åå­—å†²çªã€‚</li>
<li>ä¸ºå¾ˆé•¿çš„æ ‡è¯†ç¬¦åç§°åˆ›å»ºä¸€ä¸ªåˆ«åï¼ˆæˆ–ç®€çŸ­ï¼‰çš„åç§°ï¼Œæé«˜æºä»£ç çš„å¯è¯»æ€§ã€‚
jQuery<pre><code class="lang-js"><span class="hljs-keyword">let</span> $ = {
  ajax(){},
  get(){},
  post(){}
}
</code></pre>
</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> utils={};
utils.def=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">namespace,fn</span>) </span>{
    <span class="hljs-keyword">let</span> namespaces=namespace.split(<span class="hljs-string">'.'</span>);
    <span class="hljs-keyword">let</span> fnName=namespaces.pop();
    <span class="hljs-keyword">let</span> current=utils;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;namespaces.length;i++){
        <span class="hljs-keyword">let</span> namespace=namespaces[i];
        <span class="hljs-keyword">if</span> (!current[namespace]) {
            current[namespace]={};
        }
        current=current[namespace];
    }
    current[fnName]=fn;
}
utils.def(<span class="hljs-string">'dom.attr'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'dom.attr'</span>);
});
utils.def(<span class="hljs-string">'dom.html'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">html</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'dom.html'</span>);
});
utils.def(<span class="hljs-string">'string.trim'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'string.trim'</span>);
});
utils.dom.attr(<span class="hljs-string">'src'</span>);
utils.string.trim(<span class="hljs-string">' aaa '</span>);
</code></pre>
<h4 id="t395.3 åœºæ™¯">5.3 åœºæ™¯ <a href="#t395.3 åœºæ™¯"> # </a></h4>
<h5 id="t405.3.1 jQuery">5.3.1 jQuery <a href="#t405.3.1 jQuery"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.jQuery!=<span class="hljs-literal">null</span>){
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.jQuery;
}<span class="hljs-keyword">else</span>{
    <span class="hljs-comment">//init~~~~~~~</span>
}
</code></pre>
<h5 id="t415.3.2 æ¨¡æ€çª—å£">5.3.2 æ¨¡æ€çª—å£ <a href="#t415.3.2 æ¨¡æ€çª—å£"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Login</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.element=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
        <span class="hljs-keyword">this</span>.element.innerHTML=(
            <span class="hljs-string">`
            ç”¨æˆ·å &lt;input type="text"/&gt;
            &lt;button&gt;ç™»å½•&lt;/button&gt;
            `</span>
        );
        <span class="hljs-keyword">this</span>.element.style.cssText=<span class="hljs-string">'width: 100px; height: 100px; position: absolute; left: 50%; top: 50%; display: block;'</span>;
        <span class="hljs-comment">/* this.element.style.width='100px';
        this.element.style.height='100px';
        this.element.style.position='absolute';
        this.element.style.left='50%';
        this.element.style.top='50%'; */</span>
        <span class="hljs-built_in">document</span>.body.appendChild(<span class="hljs-keyword">this</span>.element);
    }
    show() {
        <span class="hljs-keyword">this</span>.element.style.display=<span class="hljs-string">'block'</span>;
    }
    hide() {
        <span class="hljs-keyword">this</span>.element.style.display=<span class="hljs-string">'none'</span>;
    }
}
Login.getInstance=(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> instance;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!instance) {
            instance=<span class="hljs-keyword">new</span> Login();
        }
        <span class="hljs-keyword">return</span> instance;
    }
})();

<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'showBtn'</span>).addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
    Login.getInstance().show();
});
<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'hideBtn'</span>).addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
    Login.getInstance().hide();
});
</code></pre>
<h5 id="t425.3.3 store">5.3.3 store <a href="#t425.3.3 store"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStore</span>(<span class="hljs-params">reducer</span>) </span>{
    <span class="hljs-keyword">let</span> state;
    <span class="hljs-keyword">let</span> listeners=[];
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getState</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> state;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dispatch</span>(<span class="hljs-params">action</span>) </span>{
        state=reducer(state,action);
        listeners.forEach(<span class="hljs-function"><span class="hljs-params">l</span>=&gt;</span>l());
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscribe</span>(<span class="hljs-params">listener</span>) </span>{
        listeners.push(listener);
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            listeners = listeners.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item!=listener);
            <span class="hljs-built_in">console</span>.log(listeners);
        }
    }
    dispatch({});
    <span class="hljs-keyword">return</span> {
        getState,
        dispatch,
        subscribe
    }
}
<span class="hljs-keyword">let</span> store = createStore();
</code></pre>
<h5 id="t435.3.4 ç¼“å­˜">5.3.4 ç¼“å­˜ <a href="#t435.3.4 ç¼“å­˜"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> fs=<span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">let</span> cache={};
<span class="hljs-keyword">let</span> app=express();
app.get(<span class="hljs-string">'/user/:id'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    <span class="hljs-keyword">let</span> id=req.params.id;
    <span class="hljs-keyword">let</span> user=cache.get(id);
    <span class="hljs-keyword">if</span> (user) {
        res.json(user);
    } <span class="hljs-keyword">else</span> {
        fs.readFile(<span class="hljs-string">`./users/<span class="hljs-subst">${id}</span>.json`</span>,<span class="hljs-string">'utf8'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) </span>{
            <span class="hljs-keyword">let</span> user=<span class="hljs-built_in">JSON</span>.parse(data);
            cache.put(id,user);
            res.json(user);
        });
    }
});

app.get(<span class="hljs-string">'/user'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    <span class="hljs-keyword">let</span> user=req.query;
    fs.writeFile(<span class="hljs-string">`./users/<span class="hljs-subst">${user.id}</span>.json`</span>,<span class="hljs-built_in">JSON</span>.stringify(user),(err) =&gt; {
        <span class="hljs-built_in">console</span>.log(err);
        res.json({<span class="hljs-attr">code</span>: <span class="hljs-number">0</span>,<span class="hljs-attr">data</span>: <span class="hljs-string">'å†™å…¥æˆåŠŸ'</span>});
    });
});
app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<h5 id="t445.3.5 LRUç¼“å­˜">5.3.5 LRUç¼“å­˜ <a href="#t445.3.5 LRUç¼“å­˜"> # </a></h5>
<ul>
<li><a href="https://leetcode.com/problems/lru-cache/">lru-cache</a></li>
<li>ä¸ºLRU Cacheè®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒæ”¯æŒä¸¤ä¸ªæ“ä½œï¼š<ul>
<li>1ï¼‰get(key)ï¼šå¦‚æœkeyåœ¨cacheä¸­ï¼Œåˆ™è¿”å›å¯¹åº”çš„valueå€¼ï¼Œå¦åˆ™è¿”å›-1</li>
<li>2ï¼‰set(key,value):å¦‚æœkeyä¸åœ¨cacheä¸­ï¼Œåˆ™å°†è¯¥(key,value)æ’å…¥cacheä¸­ï¼ˆæ³¨æ„ï¼Œå¦‚æœcacheå·²æ»¡ï¼Œåˆ™å¿…é¡»æŠŠæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„å…ƒç´ ä»cacheä¸­åˆ é™¤ï¼‰ï¼›å¦‚æœkeyåœ¨cacheä¸­ï¼Œåˆ™é‡ç½®valueçš„å€¼ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="lang-js"><span class="hljs-comment">/**
- ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨æ•°æ®ï¼Œç»™æ¯ä¸€ä¸ªæ•°æ®é¡¹æ ‡è®°ä¸€ä¸ªè®¿é—®æ—¶é—´æˆ³
- æ¯æ¬¡æ’å…¥æ–°æ•°æ®é¡¹çš„æ—¶å€™ï¼Œå…ˆæŠŠæ•°ç»„ä¸­å­˜åœ¨çš„æ•°æ®é¡¹çš„æ—¶é—´æˆ³è‡ªå¢,å¹¶å°†æ–°æ•°æ®é¡¹çš„æ—¶é—´æˆ³ç½®ä¸º0å¹¶æ’å…¥åˆ°æ•°ç»„ä¸­
- æ¯æ¬¡è®¿é—®æ•°ç»„ä¸­çš„æ•°æ®é¡¹çš„æ—¶å€™ï¼Œå°†è¢«è®¿é—®çš„æ•°æ®é¡¹çš„æ—¶é—´æˆ³ç½®ä¸º0ã€‚
- å½“æ•°ç»„ç©ºé—´å·²æ»¡æ—¶ï¼Œå°†æ—¶é—´æˆ³æœ€å¤§çš„æ•°æ®é¡¹æ·˜æ±°ã€‚
*/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LRUCache</span></span>{
    <span class="hljs-keyword">constructor</span>(capacity) {
        <span class="hljs-keyword">this</span>.capacity=capacity;
        <span class="hljs-keyword">this</span>.members=[];
    }
    put(key,value) {
        <span class="hljs-keyword">let</span> found=<span class="hljs-literal">false</span>;
        <span class="hljs-keyword">let</span> oldestIndex=<span class="hljs-number">-1</span>;
        <span class="hljs-keyword">let</span> oldestAge=<span class="hljs-number">-1</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>.members.length;i++){
            <span class="hljs-keyword">let</span> member=<span class="hljs-keyword">this</span>.members[i];
            <span class="hljs-keyword">if</span> (member.age &gt; oldestAge) {
                oldestIndex=i;
                oldestAge=member.age;
            }
            <span class="hljs-keyword">if</span> (member.key==key) {
                <span class="hljs-keyword">this</span>.members[i]={key,value,<span class="hljs-attr">age</span>: <span class="hljs-number">0</span>};
                found=<span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                member++;
            }
        }
        <span class="hljs-keyword">if</span> (!found) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.members.length&gt;=<span class="hljs-keyword">this</span>.capacity) {
                <span class="hljs-keyword">this</span>.members.splice(oldestIndex,<span class="hljs-number">1</span>);
            }
            <span class="hljs-keyword">this</span>.members[<span class="hljs-keyword">this</span>.members.length]={
                key,
                value,
                <span class="hljs-attr">age</span>:<span class="hljs-number">0</span>
            }
        }
    }
    get(key) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>.members.length;i++){
            <span class="hljs-keyword">let</span> member=<span class="hljs-keyword">this</span>.members[i];
            <span class="hljs-keyword">if</span> (member.key==key) {
                member.age=<span class="hljs-number">0</span>;
                <span class="hljs-keyword">return</span> member.value;
            }
        }    
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
}

<span class="hljs-keyword">let</span> cache=<span class="hljs-keyword">new</span> LRUCache(<span class="hljs-number">3</span>);
cache.put(<span class="hljs-string">'1'</span>,<span class="hljs-number">1</span>);
cache.put(<span class="hljs-string">'2'</span>,<span class="hljs-number">2</span>);
cache.put(<span class="hljs-string">'3'</span>,<span class="hljs-number">3</span>);
<span class="hljs-built_in">console</span>.log(cache.get(<span class="hljs-string">'1'</span>));
<span class="hljs-built_in">console</span>.log(cache.get(<span class="hljs-string">'2'</span>));
<span class="hljs-built_in">console</span>.log(cache.get(<span class="hljs-string">'3'</span>));
cache.put(<span class="hljs-string">'4'</span>,<span class="hljs-number">4</span>);
<span class="hljs-built_in">console</span>.log(cache.get(<span class="hljs-string">'1'</span>));
<span class="hljs-built_in">console</span>.log(cache.get(<span class="hljs-string">'4'</span>));
<span class="hljs-built_in">console</span>.log(cache);
</code></pre>
<h2 id="t456. é€‚é…å™¨æ¨¡å¼">6. é€‚é…å™¨æ¨¡å¼ <a href="#t456. é€‚é…å™¨æ¨¡å¼"> # </a></h2>
<ul>
<li>æ—§çš„æ¥å£å’Œä½¿ç”¨è€…ä¸å…¼å®¹</li>
<li>ä¸­é—´åŠ ä¸€ä¸ªé€‚é…å™¨è½¬æ¢æ¥å£</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192757_60d9b4d0_1720749.jpeg" alt="adaptor">
<img src="https://images.gitee.com/uploads/images/2019/0109/192757_4636e2ed_1720749.jpeg" alt="hdmi2vga">
<img src="https://images.gitee.com/uploads/images/2019/0109/192757_6782d834_1720749.jpeg" alt="usbadaptor"></p>
<h4 id="t466.1 ç±»å›¾">6.1 ç±»å›¾ <a href="#t466.1 ç±»å›¾"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_7cb9542a_1720749.jpeg" alt="adapter"></p>
<h4 id="t476.2 ä»£ç ">6.2 ä»£ç  <a href="#t476.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Power</span></span>{
    charge() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'220V'</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Adapter</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.power=<span class="hljs-keyword">new</span> Power();
    }
    charge() {
        <span class="hljs-keyword">let</span> power=<span class="hljs-keyword">this</span>.power.charge();
        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${power}</span> =&gt; 12V`</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.adapter=<span class="hljs-keyword">new</span> Adapter();
    }
    use() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.adapter.charge());
    }
}
<span class="hljs-keyword">new</span> Client().use();

</code></pre>
<h4 id="t486.3 åœºæ™¯">6.3 åœºæ™¯ <a href="#t486.3 åœºæ™¯"> # </a></h4>
<h5 id="t496.3.1 æ’ä»¶é€‚é…">6.3.1 æ’ä»¶é€‚é… <a href="#t496.3.1 æ’ä»¶é€‚é…"> # </a></h5>
<ul>
<li>é€‚é…å‚æ•°</li>
<li>é€‚é…åç«¯æ¥å£æ•°æ®</li>
</ul>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ajax</span>(<span class="hljs-params">options</span>)</span>{
  <span class="hljs-keyword">let</span> _default = {
      <span class="hljs-attr">method</span>:<span class="hljs-string">'GET'</span>,
      <span class="hljs-attr">dataType</span>:<span class="hljs-string">'json'</span>
  }
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> attr <span class="hljs-keyword">in</span> options){
    _default[attr] = options[attr]||_default[attr];
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">url</span>)</span>{
  <span class="hljs-keyword">let</span> options = {<span class="hljs-attr">method</span>:<span class="hljs-string">'GET'</span>,url};
  ajax(options);
}
</code></pre>
<h5 id="t506.3.1 promisify">6.3.1 promisify <a href="#t506.3.1 promisify"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> fs=<span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisify</span>(<span class="hljs-params">readFile</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">filename,encoding</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve,reject</span>) </span>{
            readFile(filename,encoding,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) </span>{
                <span class="hljs-keyword">if</span> (err)
                    reject(err);
                <span class="hljs-keyword">else</span>
                    resolve(data);
            })
        });
    }
}
<span class="hljs-keyword">let</span> readFile=promisify(fs.readFile);
readFile(<span class="hljs-string">'./1.txt'</span>,<span class="hljs-string">'utf8'</span>).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(data));
</code></pre>
<h5 id="t516.3.2 jquery">6.3.2 jquery <a href="#t516.3.2 jquery"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> $=<span class="hljs-built_in">require</span>(<span class="hljs-string">'jquery'</span>);
$.ajax({
    url,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">dataType</span>: <span class="hljs-string">'json'</span>,
    <span class="hljs-attr">data</span>:{<span class="hljs-attr">id</span>:<span class="hljs-number">1</span>}
});

<span class="hljs-keyword">let</span> $={
    ajax(options) {
        fetch(options.url,{
            <span class="hljs-attr">method</span>: options.type,
            <span class="hljs-attr">body</span>:<span class="hljs-built_in">JSON</span>.stringify(options.data)
        })
    }
}
</code></pre>
<h5 id="t526.3.3 computed">6.3.3 computed <a href="#t526.3.3 computed"> # </a></h5>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;script src="https://cdn.bootcss.com/vue/2.5.17/vue.js"&gt;&lt;/script&gt;
    &lt;title&gt;vue&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="root"&gt;
&lt;p&gt;{{name}}&lt;/p&gt;
&lt;p&gt;{{upperName}}&lt;/p&gt;
&lt;/div&gt;    
&lt;script&gt;
let vm=new Vue({
    el: '#root',
    data: {
        name:'zfpx'
    },
    computed: {
        upperName() {
            return this.name.toUpperCase();
        }
    }
});
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="t537.è£…é¥°å™¨æ¨¡å¼">7.è£…é¥°å™¨æ¨¡å¼ <a href="#t537.è£…é¥°å™¨æ¨¡å¼"> # </a></h2>
<ul>
<li>åœ¨ä¸æ”¹å˜å…¶åŸæœ‰çš„ç»“æ„å’ŒåŠŸèƒ½ä¸ºå¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½</li>
<li>è£…é¥°æ¯”ç»§æ‰¿æ›´åŠ çµæ´»</li>
</ul>
<h4 id="t547.1 ç±»å›¾">7.1 ç±»å›¾ <a href="#t547.1 ç±»å›¾"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_4ef3d187_1720749.png" alt="decorator"></p>
<h4 id="t557.2 ä»£ç ">7.2 ä»£ç  <a href="#t557.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Duck</span></span>{
    eat(food) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'åƒ${food}'</span>);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TangDuck</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.duck=<span class="hljs-keyword">new</span> Duck();
    }
    eat() {
        <span class="hljs-keyword">this</span>.duck.eat();
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'è°¢è°¢'</span>);
    }
}
</code></pre>
<h4 id="t567.3 åŒ…è£…å™¨">7.3 åŒ…è£…å™¨ <a href="#t567.3 åŒ…è£…å™¨"> # </a></h4>
<p>è£…é¥°å™¨æ¨¡å¼æ˜¯å°†ä¸€ä¸ªå¯¹è±¡åµŒå…¥å¦ä¸€ä¸ªå¯¹è±¡ä¹‹ä¸­ï¼Œå®é™…ä¸Šç›¸å½“äºè¿™ä¸ªå¯¹è±¡è¢«å¦ä¸€ä¸ªå¯¹è±¡åŒ…è£…èµ·æ¥ï¼Œå½¢æˆä¸€æ¡åŒ…è£…é“¾ã€‚è¯·æ±‚éšç€è¿™æ¡é“¾æ¡ä¾æ¬¡ä¼ é€’åˆ°æ‰€æœ‰çš„å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡æœ‰å¤„ç†è¿™ä¸ªè¯·æ±‚çš„æœºä¼šã€‚</p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Coffee</span></span>{
  make(water){
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${water}</span>+å’–å•¡`</span>;
  }
  cost(){
      <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MilkCoffee</span></span>{
    <span class="hljs-keyword">constructor</span>(parent){
        <span class="hljs-keyword">this</span>.parent = parent;
    }
    make(water){
        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.parent.make(water)}</span>+ç‰›å¥¶`</span>;
    }
    cost(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parent.cost()+<span class="hljs-number">1</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SugerCoffee</span></span>{
    <span class="hljs-keyword">constructor</span>(parent){
        <span class="hljs-keyword">this</span>.parent = parent;
    }
    make(water){
        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.parent.make(water)}</span>+ç³–`</span>;
    }
    cost(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parent.cost()+<span class="hljs-number">2</span>;
    }
}
<span class="hljs-keyword">let</span> coffee = <span class="hljs-keyword">new</span> Coffee();
<span class="hljs-keyword">let</span> milkCoffee = <span class="hljs-keyword">new</span> MilkCoffee(coffee);
<span class="hljs-keyword">let</span> milksugerCoffee = <span class="hljs-keyword">new</span> SugerCoffee(milkCoffee);
<span class="hljs-built_in">console</span>.log(milksugerCoffee.make(<span class="hljs-string">'æ°´'</span>)+<span class="hljs-string">'='</span>+milksugerCoffee.cost());
</code></pre>
<h4 id="t577.4 AOP">7.4 AOP <a href="#t577.4 AOP"> # </a></h4>
<ul>
<li>åœ¨è½¯ä»¶ä¸šï¼ŒAOPä¸ºAspect Oriented Programmingçš„ç¼©å†™ï¼Œæ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹</li>
<li>å¯ä»¥é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ç»™ç¨‹åºåŠ¨æ€ç»Ÿä¸€æ·»åŠ åŠŸèƒ½çš„ä¸€ç§æŠ€æœ¯</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_281046e5_1720749.jpeg" alt="springaop">
<img src="https://images.gitee.com/uploads/images/2019/0109/192758_c7aedff9_1720749.jpeg" alt="businessaop"></p>
<pre><code class="lang-js"><span class="hljs-built_in">Function</span>.prototype.before = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">beforeFn</span>)</span>{
    <span class="hljs-keyword">let</span> _this = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        beforeFn.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
        <span class="hljs-keyword">return</span> _this.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
    }
}
<span class="hljs-built_in">Function</span>.prototype.after = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">afterFn</span>)</span>{
    <span class="hljs-keyword">let</span> _this = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
         _this.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
        afterFn.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buy</span>(<span class="hljs-params">money,goods</span>)</span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`èŠ±<span class="hljs-subst">${money}</span>ä¹°<span class="hljs-subst">${goods}</span>`</span>);
}
buy = buy.before(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`å‘åª³å¦‡ç”³è¯·1å—é’±.`</span>);
});
buy = buy.after(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`æŠŠå‰©ä¸‹çš„2æ¯›é’±è¿˜ç»™åª³å¦‡.`</span>);
});
buy(<span class="hljs-number">.8</span>,<span class="hljs-string">'ç›'</span>);
</code></pre>
<h4 id="t587.3 åœºæ™¯">7.3 åœºæ™¯ <a href="#t587.3 åœºæ™¯"> # </a></h4>
<h5 id="t597.3.1 åŸ‹ç‚¹">7.3.1 åŸ‹ç‚¹ <a href="#t597.3.1 åŸ‹ç‚¹"> # </a></h5>
<p>åŸ‹ç‚¹åˆ†æï¼Œæ˜¯ç½‘ç«™åˆ†æçš„ä¸€ç§å¸¸ç”¨çš„æ•°æ®é‡‡é›†æ–¹æ³•</p>
<ul>
<li>åŸ‹ç‚¹æ–¹å¼<ul>
<li>æœåŠ¡å™¨å±‚é¢çš„ï¼šä¸»è¦æ˜¯é€šè¿‡å®¢æˆ·ç«¯çš„è¯·æ±‚è¿›è¡Œåˆ†æ</li>
<li>å®¢æˆ·ç«¯å±‚é¢çš„ï¼šé€šè¿‡åŸ‹ç‚¹è¿›è¡Œç›¸åº”çš„åˆ†æ<ul>
<li>ä»£ç åŸ‹ç‚¹</li>
<li>è‡ªåŠ¨åŒ–åŸ‹ç‚¹ï¼šé€šè¿‡AOPæ€æƒ³å¯¹ç›¸åº”çš„æ–¹æ³•è¿›è¡Œç»Ÿè®¡</li>
<li>ç¬¬ä¸‰æ–¹å®ç° ç™¾åº¦ã€å‹ç›Ÿç­‰...</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">data-name</span>=<span class="hljs-string">"è¥¿ç“œ"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"watermelon"</span>&gt;</span>è¥¿ç“œ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">data-name</span>=<span class="hljs-string">"è‹¹æœ"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"apple"</span>&gt;</span>è‹¹æœ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 <span class="hljs-keyword">let</span> watermelon = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'watermelon'</span>);
 <span class="hljs-keyword">let</span> apple = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'apple'</span>);
 <span class="hljs-built_in">Function</span>.prototype.after = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">afterFn</span>)</span>{
    <span class="hljs-keyword">let</span> _this = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
         _this.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
        afterFn.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
    }
}

 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">click</span>(<span class="hljs-params"></span>)</span>{
     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ç‚¹å‡»'</span>+<span class="hljs-keyword">this</span>.dataset.name);
 }
 click = click.after(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
     <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">new</span> Image();
     img.src = <span class="hljs-string">`http://localhost:3000?name=<span class="hljs-subst">${<span class="hljs-keyword">this</span>.dataset.name}</span>`</span>;
 });
 <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'button'</span>)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">button</span>)</span>{
    button.addEventListener(<span class="hljs-string">'click'</span>,click);
 });
</span></code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> app = express();
app.get(<span class="hljs-string">'/'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
   <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'name'</span>,req.query.name);
   res.end(<span class="hljs-string">'ok'</span>);
});
app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<h5 id="t607.3.2 è¡¨å•æ ¡éªŒ">7.3.2 è¡¨å•æ ¡éªŒ <a href="#t607.3.2 è¡¨å•æ ¡éªŒ"> # </a></h5>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">""</span>&gt;</span>
        ç”¨æˆ·å<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span>&gt;</span>
        å¯†ç <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"submit-btn"</span> &gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
         <span class="hljs-built_in">Function</span>.prototype.before = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">beforeFn</span>)</span>{
            <span class="hljs-keyword">let</span> _this = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                <span class="hljs-keyword">let</span> ret = beforeFn.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
                <span class="hljs-keyword">if</span>(ret)
                _this.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
            }
        }
      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">submit</span>(<span class="hljs-params"></span>)</span>{
          alert(<span class="hljs-string">'æäº¤è¡¨å•'</span>);
      }
      submit= submit.before(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">let</span> username = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'username'</span>).value;
          <span class="hljs-keyword">if</span>(username.length&lt;<span class="hljs-number">6</span>){
              <span class="hljs-keyword">return</span> alert(<span class="hljs-string">'ç”¨æˆ·åä¸èƒ½å°‘äº6ä½'</span>);
          }
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      });
      submit = submit.before(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">let</span> username = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'username'</span>).value;
          <span class="hljs-keyword">if</span>(!username){
              <span class="hljs-keyword">return</span> alert(<span class="hljs-string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span>);
          }
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      });


      <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'submit-btn'</span>).addEventListener(<span class="hljs-string">'click'</span>,submit);
</span></code></pre>
<h5 id="t617.3.3 é˜²CSRFæ”»å‡»">7.3.3 é˜²CSRFæ”»å‡» <a href="#t617.3.3 é˜²CSRFæ”»å‡»"> # </a></h5>
<ul>
<li>CSRFé€šè¿‡ä¼ªè£…æ¥è‡ªå—ä¿¡ä»»ç”¨æˆ·çš„è¯·æ±‚æ¥åˆ©ç”¨å—ä¿¡ä»»çš„ç½‘ç«™</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_c0455bf9_1720749.jpeg" alt="csrf.jpg"></p>
<h6 id="t627.3.3.1 å—ä¿¡ä»»ç½‘ç«™">7.3.3.1 å—ä¿¡ä»»ç½‘ç«™ <a href="#t627.3.3.1 å—ä¿¡ä»»ç½‘ç«™"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">'body-parser'</span>);
<span class="hljs-keyword">let</span> session = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express-session'</span>);
<span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">let</span> app = express();
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({<span class="hljs-attr">extended</span>:<span class="hljs-literal">true</span>}));
app.use(session({
    <span class="hljs-attr">resave</span>:<span class="hljs-literal">true</span>,
    <span class="hljs-attr">secret</span>:<span class="hljs-string">'zfpx'</span>,
    <span class="hljs-attr">saveUninitialized</span>:<span class="hljs-literal">true</span>
}));
app.set(<span class="hljs-string">'view engine'</span>,<span class="hljs-string">'ejs'</span>);
app.set(<span class="hljs-string">'views'</span>,path.resolve(<span class="hljs-string">'views'</span>));
app.engine(<span class="hljs-string">'html'</span>,<span class="hljs-built_in">require</span>(<span class="hljs-string">'ejs'</span>).__express);
<span class="hljs-keyword">let</span> users = {};
app.get(<span class="hljs-string">'/login'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
  res.render(<span class="hljs-string">'login.html'</span>);
});
app.post(<span class="hljs-string">'/login'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
    <span class="hljs-keyword">let</span> body = req.body;
    users[body.username] = <span class="hljs-number">100</span>;
    req.session.username = body.username;
    res.json({<span class="hljs-attr">code</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">data</span>:<span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>});
});
app.get(<span class="hljs-string">'/money'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
   res.send(users[req.session.username]+<span class="hljs-string">"å…ƒ"</span>);
});
app.get(<span class="hljs-string">'/withdraw'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
    <span class="hljs-keyword">let</span> token = req.session.token =  <span class="hljs-built_in">Math</span>.random()+<span class="hljs-string">''</span>;
    res.cookie(<span class="hljs-string">'token'</span>,token);
    res.render(<span class="hljs-string">'withdraw.html'</span>);
});
app.post(<span class="hljs-string">'/withdraw'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
    <span class="hljs-comment">//users[req.session.username] -= (req.body.money?Number(req.body.money):10);</span>
    <span class="hljs-comment">//res.json({code:0,data:'å–æ¬¾æˆåŠŸ'});</span>
    <span class="hljs-built_in">console</span>.log(req.body.token, req.session.token)
      <span class="hljs-keyword">if</span>(req.body.token== req.session.token){
        users[req.session.username] -= (req.body.money?<span class="hljs-built_in">parseInt</span>(req.body.money):<span class="hljs-number">10</span>);
        res.json({<span class="hljs-attr">code</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">data</span>:<span class="hljs-string">'å–æ¬¾æˆåŠŸ'</span>});
      }<span class="hljs-keyword">else</span>{
        res.json({<span class="hljs-attr">code</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">data</span>:<span class="hljs-string">'å–æ¬¾å¤±è´¥'</span>});
      } 
});
app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<h6 id="t637.3.3.2 login">7.3.3.2 login <a href="#t637.3.3.2 login"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://localhost:3000/money"</span>&gt;</span>æŸ¥çœ‹ä½™é¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://localhost:3000/withdraw"</span>&gt;</span>å–æ¬¾<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    ç”¨æˆ·å <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"login()"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ajax</span>(<span class="hljs-params">method,url,data</span>)</span>{
            <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest;
            xhr.open(method,url,<span class="hljs-literal">true</span>);
            xhr.setRequestHeader(<span class="hljs-string">'Content-Type'</span>,<span class="hljs-string">'application/json'</span>);
            xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                <span class="hljs-keyword">if</span>(xhr.readyState == <span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>){
                    <span class="hljs-built_in">console</span>.log(xhr.responseText);
                }
            }
            xhr.send(<span class="hljs-built_in">JSON</span>.stringify(data));
        }
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span>{
            <span class="hljs-keyword">let</span> username = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'username'</span>).value;
            ajax(<span class="hljs-string">'POST'</span>,<span class="hljs-string">'/login'</span>,{username});
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h6 id="t647.3.3.3 å–æ¬¾">7.3.3.3 å–æ¬¾ <a href="#t647.3.3.3 å–æ¬¾"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    é‡‘é¢ <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"money"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"money"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"login()"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-built_in">Function</span>.prototype.before = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">beforeFn</span>)</span>{
            <span class="hljs-keyword">let</span> _this = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                beforeFn.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
                <span class="hljs-keyword">return</span> _this.apply(<span class="hljs-keyword">this</span>,<span class="hljs-built_in">arguments</span>);
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ajax</span>(<span class="hljs-params">method,url,data</span>)</span>{
            <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest;
            xhr.open(method,url,<span class="hljs-literal">true</span>);
            xhr.setRequestHeader(<span class="hljs-string">'Content-Type'</span>,<span class="hljs-string">'application/json'</span>);
            xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                <span class="hljs-keyword">if</span>(xhr.readyState == <span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>){
                    <span class="hljs-built_in">console</span>.log(xhr.responseText);
                }
            }
            xhr.send(<span class="hljs-built_in">JSON</span>.stringify(data));
        }
        ajax = ajax.before(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method,url,data</span>)</span>{
            <span class="hljs-keyword">let</span> result = <span class="hljs-built_in">document</span>.cookie.match(<span class="hljs-regexp">/(^|; )token=(.+?)($|; )/</span>);
            <span class="hljs-built_in">console</span>.log(result,result);
            data.token = result[<span class="hljs-number">2</span>];
        });
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span>{
            <span class="hljs-keyword">let</span> money = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'money'</span>).value;
            ajax(<span class="hljs-string">'POST'</span>,<span class="hljs-string">'/withdraw'</span>,{money});
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h6 id="t657.3.3.4 éä¿¡ä»»ç½‘ç«™">7.3.3.4 éä¿¡ä»»ç½‘ç«™ <a href="#t657.3.3.4 éä¿¡ä»»ç½‘ç«™"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">let</span> app = express();
app.set(<span class="hljs-string">'view engine'</span>,<span class="hljs-string">'ejs'</span>);
app.set(<span class="hljs-string">'views'</span>,path.resolve(<span class="hljs-string">'views'</span>));
app.engine(<span class="hljs-string">'html'</span>,<span class="hljs-built_in">require</span>(<span class="hljs-string">'ejs'</span>).__express);

app.get(<span class="hljs-string">'/'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
  res.render(<span class="hljs-string">'csrf.html'</span>);
});
app.get(<span class="hljs-string">'/form'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
  res.render(<span class="hljs-string">'form.html'</span>);
});

app.listen(<span class="hljs-number">4000</span>);
</code></pre>
<h6 id="t667.3.3.5 csrf">7.3.3.5 csrf <a href="#t667.3.3.5 csrf"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.baidu.com/img/bd_logo1.png"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/form"</span> <span class="hljs-attr">frameborder</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:0;height:0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h6 id="t677.3.3.6 form">7.3.3.6 form <a href="#t677.3.3.6 form"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myform"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"http://localhost:3000/withdraw"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"money"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"money"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
                setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                   <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'myform'</span>).submit();
                },<span class="hljs-number">100</span>);
            </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h5 id="t687.3.4 æ”¯æŒdecorators">7.3.4 æ”¯æŒdecorators <a href="#t687.3.4 æ”¯æŒdecorators"> # </a></h5>
<ul>
<li><a href="https://babeljs.io/docs/en/babel-plugin-proposal-decorators">babel-plugin-proposal-decorators</a><pre><code class="lang-js"><span class="hljs-string">"plugins"</span>: [
  [<span class="hljs-string">"@babel/plugin-proposal-decorators"</span>, { <span class="hljs-string">"legacy"</span>: <span class="hljs-literal">true</span> }],
  [<span class="hljs-string">"@babel/plugin-proposal-class-properties"</span>, { <span class="hljs-string">"loose"</span> : <span class="hljs-literal">true</span> }]
]
</code></pre>
<h5 id="t697.3.5 ç±»decorators">7.3.5 ç±»decorators <a href="#t697.3.5 ç±»decorators"> # </a></h5>
<code>`</code>js
@testable
class Person{</li>
</ul>
<p>}
function testable(target) {
    target.testable=true;
}
console.log(Person.testable);</p>
<pre><code>
```js
let Hooks={
    componentWillMount() {
        console.log('componentWillMount');
    },
    componentDidMount() {
        console.log('componentDidMount');
    }
}
function mixins(...others) {
    return function (target) {
        Object.assign(target.prototype,...others);
    }
}
@mixins(Hooks)
class Component{

}
let c=new Component();
console.log(c);
</code></pre><h5 id="t707.3.6 æ–¹æ³•decorators">7.3.6 æ–¹æ³•decorators <a href="#t707.3.6 æ–¹æ³•decorators"> # </a></h5>
<ul>
<li><a href="https://www.npmjs.com/package/core-decorators">core-decorators</a></li>
</ul>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readonly</span>(<span class="hljs-params">target,attr,descriptor</span>) </span>{
    descriptor.writable=<span class="hljs-literal">false</span>;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span></span>{
    @readonly
    PI=<span class="hljs-number">3.14</span>;
}
<span class="hljs-keyword">let</span> c=<span class="hljs-keyword">new</span> Circle();
c.PI=<span class="hljs-number">100</span>;
<span class="hljs-built_in">console</span>.log(c.PI)
</code></pre>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logger</span>(<span class="hljs-params">target,attr,descriptor</span>) </span>{
    <span class="hljs-keyword">let</span> oldVal=descriptor.value;
    descriptor.value=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`å‚æ•°:<span class="hljs-subst">${args}</span>`</span>);
        <span class="hljs-keyword">return</span> oldVal(...args);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Caculator</span></span>{
    @logger
    sum(a,b) {
        <span class="hljs-keyword">return</span> a+b;
    }
}
<span class="hljs-keyword">let</span> c=<span class="hljs-keyword">new</span> Caculator();
<span class="hljs-keyword">let</span> ret=c.sum(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);
<span class="hljs-built_in">console</span>.log(ret);
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> {readonly}=<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-decorators'</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecate</span>(<span class="hljs-params">msg,options</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">target,attr,descriptor</span>) </span>{
        <span class="hljs-comment">//DEPRECATION Caculator#sum: This function will be removed in future versions.</span>
        <span class="hljs-keyword">let</span> oldVal=descriptor.value;
        descriptor.value=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) </span>{
            <span class="hljs-keyword">let</span> message=msg? msg:<span class="hljs-string">`DEPRECATION <span class="hljs-subst">${target.constructor.name}</span>#<span class="hljs-subst">${attr}</span>: This function will be removed in future versions.`</span>;
            <span class="hljs-keyword">let</span> see=options&amp;&amp;options.url? <span class="hljs-string">`see <span class="hljs-subst">${options.url}</span>`</span>:<span class="hljs-string">``</span>;
            <span class="hljs-built_in">console</span>.warn(message+<span class="hljs-string">'\r\n'</span>+see);
            <span class="hljs-keyword">return</span> oldVal(...args);
        }
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Caculator</span></span>{
    @readonly PI=<span class="hljs-number">3.14</span>;
    @deprecate
    sum(a,b) {
        <span class="hljs-keyword">return</span> a+b;
    }
    @deprecate(<span class="hljs-string">'stop using this'</span>)
    minus(a,b) {
        <span class="hljs-keyword">return</span> a-b;
    }
    @deprecate(<span class="hljs-string">'stop using this'</span>,{<span class="hljs-attr">url</span>:<span class="hljs-string">'http://www.baidu.com'</span>})
    multiply(a,b) {
        <span class="hljs-keyword">return</span> a*b;
    }
}
<span class="hljs-keyword">let</span> c=<span class="hljs-keyword">new</span> Caculator();
c.PI=<span class="hljs-number">5</span>;
<span class="hljs-built_in">console</span>.log(c.PI);
<span class="hljs-keyword">let</span> ret=c.sum(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);
<span class="hljs-built_in">console</span>.log(ret);
<span class="hljs-keyword">let</span> ret2=c.minus(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(ret2);
<span class="hljs-keyword">let</span> ret3=c.multiply(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(ret3);
</code></pre>
<h2 id="t718.ä»£ç†æ¨¡å¼">8.ä»£ç†æ¨¡å¼ <a href="#t718.ä»£ç†æ¨¡å¼"> # </a></h2>
<ul>
<li>ç”±äºä¸€ä¸ªå¯¹è±¡ä¸èƒ½ç›´æ¥å¼•ç”¨å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä»£ç†å¯¹è±¡åœ¨è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹ä½œç”¨</li>
<li>å¯ä»¥åœ¨ä½¿ç”¨è€…å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´åŠ ä¸€ä¸ªä»£ç†å¯¹è±¡,é€šè¿‡ä»£ç†å¯ä»¥å®ç°æ§åˆ¶</li>
</ul>
<h4 id="t728.1 ç±»å›¾">8.1 ç±»å›¾ <a href="#t728.1 ç±»å›¾"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_e26dc7bc_1720749.jpeg" alt="proxy"></p>
<h4 id="t738.2 ä»£ç ">8.2 ä»£ç  <a href="#t738.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Goole</span></span>{
    <span class="hljs-keyword">constructor</span>() {    }
    get() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'google'</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Proxy</span> </span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.google=<span class="hljs-keyword">new</span> Goole();
    }
    get() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.google.get();
    }
}
<span class="hljs-keyword">let</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>();
<span class="hljs-keyword">let</span> ret = proxy.get();
<span class="hljs-built_in">console</span>.log(ret);
</code></pre>
<h4 id="t748.3 åœºæ™¯">8.3 åœºæ™¯ <a href="#t748.3 åœºæ™¯"> # </a></h4>
<h5 id="t758.3.1 äº‹ä»¶å§”æ‰˜">8.3.1 äº‹ä»¶å§”æ‰˜ <a href="#t758.3.1 äº‹ä»¶å§”æ‰˜"> # </a></h5>
<ul>
<li>äº‹ä»¶æ•è·æŒ‡çš„æ˜¯ä»documentåˆ°è§¦å‘äº‹ä»¶çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå³è‡ªä¸Šè€Œä¸‹çš„å»è§¦å‘äº‹ä»¶</li>
<li>äº‹ä»¶å†’æ³¡æ˜¯è‡ªä¸‹è€Œä¸Šçš„å»è§¦å‘äº‹ä»¶</li>
<li>ç»‘å®šäº‹ä»¶æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ§åˆ¶äº‹ä»¶è§¦å‘é¡ºåºæ˜¯å¦ä¸ºäº‹ä»¶æ•è·ã€‚trueä¸ºäº‹ä»¶æ•è·ï¼›falseä¸ºäº‹ä»¶å†’æ³¡,é»˜è®¤falseã€‚</li>
</ul>
<pre><code class="lang-js">&lt;body&gt;
    &lt;ul id="list"&gt;
        &lt;li&gt;1&lt;/li&gt;
        &lt;li&gt;2&lt;/li&gt;
        &lt;li&gt;3&lt;/li&gt;
    &lt;/ul&gt;
&lt;script&gt;
  let list = document.querySelector('#list');
  list.addEventListener('click',event=&gt;{
       alert(event.target.innerHTML);
  });     
&lt;/script&gt;    
&lt;/body&gt;
</code></pre>
<h5 id="t768.3.2 å›¾ç‰‡æ‡’åŠ è½½">8.3.2 å›¾ç‰‡æ‡’åŠ è½½ <a href="#t768.3.2 å›¾ç‰‡æ‡’åŠ è½½"> # </a></h5>
<h6 id="t778.3.2.1 app.js">8.3.2.1 app.js <a href="#t778.3.2.1 app.js"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> path=<span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">let</span> app=express();
app.get(<span class="hljs-string">'/images/loading.gif'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    res.sendFile(path.join(__dirname,req.path));
});
app.get(<span class="hljs-string">'/images/:name'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        res.sendFile(path.join(__dirname,req.path));
    }, <span class="hljs-number">2000</span>);
});
app.get(<span class="hljs-string">'/'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    res.sendFile(path.resolve(<span class="hljs-string">'index.html'</span>));
});
app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<h6 id="t788.3.2.2 index.html">8.3.2.2 index.html <a href="#t788.3.2.2 index.html"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        *{
            <span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;
            <span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;
        }
        <span class="hljs-selector-tag">ul</span>,<span class="hljs-selector-tag">li</span>{
            <span class="hljs-attribute">list-style</span>:none;
        }
        <span class="hljs-selector-id">#background</span>{
            <span class="hljs-attribute">position</span>:absolute;
            <span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid green;
            <span class="hljs-attribute">right</span>:<span class="hljs-number">10px</span>;
            <span class="hljs-attribute">top</span>:<span class="hljs-number">10px</span>;
        }
        <span class="hljs-selector-id">#background</span> <span class="hljs-selector-tag">li</span>{
            <span class="hljs-attribute">float</span>:left;
            <span class="hljs-attribute">margin-left</span>:<span class="hljs-number">10px</span>;
            <span class="hljs-attribute">text-align</span>:center;
            <span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid red;
            <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">5px</span>;
        }
        <span class="hljs-selector-id">#myImage</span>{
            <span class="hljs-attribute">width</span>:<span class="hljs-number">600px</span>;
            <span class="hljs-attribute">height</span>:<span class="hljs-number">400px</span>;
            <span class="hljs-attribute">margin</span>:<span class="hljs-number">100px</span> auto;
        }
        <span class="hljs-selector-id">#myImage</span> <span class="hljs-selector-tag">img</span>{
            <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"background"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">"/images/bg1.jpg"</span>&gt;</span>å›¾ç‰‡1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">"/images/bg2.jpg"</span>&gt;</span>å›¾ç‰‡2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myImage"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 <span class="hljs-keyword">let</span> container = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#background'</span>);
 <span class="hljs-keyword">let</span> myImage = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#myImage'</span>);
 <span class="hljs-keyword">let</span> Background = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
     <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">new</span> Image();
     myImage.appendChild(img);
     <span class="hljs-keyword">return</span> {
         set(src){
             img.src = src;
         }
     }
 })();
 <span class="hljs-keyword">let</span> LoadingBackground = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
     <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">new</span> Image();
     img.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
         Background.set(<span class="hljs-keyword">this</span>.src);
     }
     <span class="hljs-keyword">return</span> {
         set(src){ 
            Background.set(<span class="hljs-string">`/images/loading.gif`</span>);
            img.src = src;
         }
     }
 })();
 container.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
     <span class="hljs-keyword">let</span> src = event.target.dataset.src;
     LoadingBackground.set(src+<span class="hljs-string">'?ts='</span>+<span class="hljs-built_in">Date</span>.now());
 });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<ul>
<li>æ›´ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™å’Œå¼€é—­åŸåˆ™</li>
</ul>
<h5 id="t798.3.3 é˜²æŠ–ä»£ç†">8.3.3 é˜²æŠ–ä»£ç† <a href="#t798.3.3 é˜²æŠ–ä»£ç†"> # </a></h5>
<h6 id="t808.3.3.1 todo.html">8.3.3.1 todo.html <a href="#t808.3.3.1 todo.html"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"todos"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">let</span> todos = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#todos'</span>);
    <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        fetch(<span class="hljs-string">'/todos'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            todos.innerHTML = response.map(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span><span class="hljs-string">`&lt;li "&gt;&lt;input value="<span class="hljs-subst">${item.id}</span>" type="checkbox" <span class="hljs-subst">${item.completed?<span class="hljs-string">"checked"</span>:<span class="hljs-string">""</span>}</span>/&gt;<span class="hljs-subst">${item.text}</span>&lt;/li&gt;`</span>).join(<span class="hljs-string">''</span>);
        });
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggle</span>(<span class="hljs-params">id</span>)</span>{
       fetch(<span class="hljs-string">`/toggle/<span class="hljs-subst">${id}</span>`</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'response'</span>,response);
        });
    }
    todos.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
        <span class="hljs-keyword">let</span> checkbox = event.target;
        <span class="hljs-keyword">let</span> id = checkbox.value;
        toggle(id);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<h6 id="t818.3.3.2 todos.html">8.3.3.2 todos.html <a href="#t818.3.3.2 todos.html"> # </a></h6>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"todos"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">let</span> todos = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#todos'</span>);
    <span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        fetch(<span class="hljs-string">'/todos'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            todos.innerHTML = response.map(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span><span class="hljs-string">`&lt;li "&gt;&lt;input value="<span class="hljs-subst">${item.id}</span>" type="checkbox" <span class="hljs-subst">${item.completed?<span class="hljs-string">"checked"</span>:<span class="hljs-string">""</span>}</span>/&gt;<span class="hljs-subst">${item.text}</span>&lt;/li&gt;`</span>).join(<span class="hljs-string">''</span>);
        });
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggle</span>(<span class="hljs-params">id</span>)</span>{
       fetch(<span class="hljs-string">`/toggle/<span class="hljs-subst">${id}</span>`</span>).then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>res.json()).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'response'</span>,response);
        });
    }
    <span class="hljs-keyword">let</span> LazyToggle = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>)</span>{
        <span class="hljs-keyword">let</span> ids = [];
        <span class="hljs-keyword">let</span> timer;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>)</span>{
            ids.push(id);
            <span class="hljs-keyword">if</span>(!timer){
              timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
                  toggle(ids.join(<span class="hljs-string">','</span>));
                  ids = <span class="hljs-literal">null</span>;
                  clearTimeout(timer);
                  timer = <span class="hljs-literal">null</span>;
              },<span class="hljs-number">2000</span>);
            }
        }
    })();
    todos.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
        <span class="hljs-keyword">let</span> checkbox = event.target;
        <span class="hljs-keyword">let</span> id = checkbox.value;
        LazyToggle(id);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h6 id="t828.3.3.3 app.js">8.3.3.3 app.js <a href="#t828.3.3.3 app.js"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> app=express();
app.use(express.static(__dirname));
<span class="hljs-keyword">let</span> todos=[
    {<span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<span class="hljs-attr">text</span>: <span class="hljs-string">'a'</span>,<span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>},
    {<span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,<span class="hljs-attr">text</span>: <span class="hljs-string">'b'</span>,<span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>},
    {<span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,<span class="hljs-attr">text</span>: <span class="hljs-string">'c'</span>,<span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>},
];
app.get(<span class="hljs-string">'/todos'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    res.json(todos);
});
app.get(<span class="hljs-string">'/toggle/:id'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    <span class="hljs-keyword">let</span> id=req.params.id;
    todos = todos.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (item.id==id) {
            item.completed=!item.completed;
        }
        <span class="hljs-keyword">return</span> item;
    });
    res.json({<span class="hljs-attr">code</span>:<span class="hljs-number">0</span>});
});
app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<h6 id="t838.3.3.4 app.js">8.3.3.4 app.js <a href="#t838.3.3.4 app.js"> # </a></h6>
<pre><code class="lang-js">app.get(<span class="hljs-string">'/toggle/:ids'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    <span class="hljs-keyword">let</span> ids=req.params.ids;
    ids=ids.split(<span class="hljs-string">','</span>).map(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span><span class="hljs-built_in">parseInt</span>(item));
    todos = todos.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (ids.includes(item.id)) {
            item.completed=!item.completed;
        }
        <span class="hljs-keyword">return</span> item;
    });
    res.json({<span class="hljs-attr">code</span>:<span class="hljs-number">0</span>});
});
</code></pre>
<h5 id="t848.3.4 ä»£ç†è·¨åŸŸ">8.3.4 ä»£ç†è·¨åŸŸ <a href="#t848.3.4 ä»£ç†è·¨åŸŸ"> # </a></h5>
<h6 id="t858.3.4.1 3000.js">8.3.4.1 3000.js <a href="#t858.3.4.1 3000.js"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> app=express();
app.use(express.static(__dirname));
app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<h6 id="t868.3.4.2 4000.js">8.3.4.2 4000.js <a href="#t868.3.4.2 4000.js"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> app=express();
<span class="hljs-keyword">let</span> bodyParser=<span class="hljs-built_in">require</span>(<span class="hljs-string">'body-parser'</span>);
app.use(bodyParser.urlencoded({<span class="hljs-attr">extended</span>:<span class="hljs-literal">true</span>}));
app.use(express.static(__dirname));
<span class="hljs-keyword">let</span> users=[];
app.post(<span class="hljs-string">'/register'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>)</span>{
    <span class="hljs-keyword">let</span> body=req.body;
    <span class="hljs-keyword">let</span> target=body.target;
    <span class="hljs-keyword">let</span> callback=body.callback;
    <span class="hljs-keyword">let</span> username=body.username;
    <span class="hljs-keyword">let</span> password=body.password;
    <span class="hljs-keyword">let</span> user={username,password};
    <span class="hljs-keyword">let</span> id=users.length==<span class="hljs-number">0</span>? <span class="hljs-number">1</span>:users[users.length<span class="hljs-number">-1</span>].id+<span class="hljs-number">1</span>;
    user.id=id;
    users.push(user);
    res.status(<span class="hljs-number">302</span>);
    res.header(<span class="hljs-string">'Location'</span>,<span class="hljs-string">`<span class="hljs-subst">${target}</span>?callback=<span class="hljs-subst">${callback}</span>&amp;args=<span class="hljs-subst">${id}</span>`</span>);
    res.end();
});
app.listen(<span class="hljs-number">4000</span>);
</code></pre>
<h6 id="t878.3.4.3 index.html">8.3.4.3 index.html <a href="#t878.3.4.3 index.html"> # </a></h6>
<pre><code class="lang-js">&lt;script type="text/javascript"&gt;
  function receiveId(data){
      alert('ç”¨æˆ·ID='+data);
  }
&lt;/script&gt;
&lt;iframe name="proxyIframe" id="proxyIframe"  frameborder="0" &gt;&lt;/iframe&gt;
&lt;form action="http://localhost:4000/register" method="POST" target="proxyIframe"&gt;
   &lt;input type="hidden" name="callback" value="receiveId"&gt;
     &lt;input type="hidden" name="target" value="http://localhost:3000/target.html"&gt;
     ç”¨æˆ·å&lt;input type="text" name="username"/&gt;
     å¯†ç &lt;input type="text" name="password"/&gt;
     &lt;input type="submit" value="æäº¤"&gt;
&lt;/form&gt;
</code></pre>
<h6 id="t888.3.4.4 target.html">8.3.4.4 target.html <a href="#t888.3.4.4 target.html"> # </a></h6>
<pre><code class="lang-js"><span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">var</span> query = location.search.substr(<span class="hljs-number">1</span>).split(<span class="hljs-string">'&amp;'</span>);
        <span class="hljs-keyword">let</span> fn,args;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>,len=query.length;i&lt;len;i++){
            <span class="hljs-keyword">let</span> item = query[i].split(<span class="hljs-string">'='</span>);
            <span class="hljs-keyword">if</span>(item[<span class="hljs-number">0</span>]==<span class="hljs-string">'callback'</span>){
                fn = item[<span class="hljs-number">1</span>];
            }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(item[<span class="hljs-number">0</span>] == <span class="hljs-string">'args'</span>){
                args = item[<span class="hljs-number">1</span>];
            }
        }
        <span class="hljs-keyword">try</span>{
            <span class="hljs-built_in">eval</span>(<span class="hljs-string">`top.<span class="hljs-subst">${fn}</span>('<span class="hljs-subst">${args}</span>')`</span>);
        }<span class="hljs-keyword">catch</span>(e){}
    }
</code></pre>
<h5 id="t898.3.5 ä»£ç†ç¼“å­˜">8.3.5 ä»£ç†ç¼“å­˜ <a href="#t898.3.5 ä»£ç†ç¼“å­˜"> # </a></h5>
<p>ç¼“å­˜ä»£ç†å¯ä»¥ä¸ºå¼€é”€å¤§çš„è®¡ç®—ç»“æœæä¾›æš‚æ—¶çš„å­˜å‚¨</p>
<pre><code class="lang-js"><span class="hljs-number">0</span>!=<span class="hljs-number">1</span>ï¼Œn!=(n<span class="hljs-number">-1</span>)!Ã—n
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> m = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">if</span> (n&lt;=<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> n*m(n<span class="hljs-number">-1</span>);
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">let</span> result=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
        result+=m(i);
    }
    <span class="hljs-keyword">return</span> result;
}
<span class="hljs-built_in">console</span>.log(sum(<span class="hljs-number">4</span>));
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> m = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">if</span> (n&lt;=<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> n*m(n<span class="hljs-number">-1</span>);
    }
}
<span class="hljs-keyword">let</span> sum=(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> cache={};
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">n</span>) </span>{
        <span class="hljs-keyword">let</span> result=<span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
            <span class="hljs-keyword">let</span> r=cache[i];
            <span class="hljs-keyword">if</span> (r) {
                result+=r;
            } <span class="hljs-keyword">else</span> {
                r=m(i);
                cache[i]=r;
                result+=r;
            }
        }
        <span class="hljs-keyword">return</span> result;
    }
})()

<span class="hljs-built_in">console</span>.log(sum(<span class="hljs-number">4</span>));
</code></pre>
<h5 id="t908.3.5 $.proxy">8.3.5 $.proxy <a href="#t908.3.5 $.proxy"> # </a></h5>
<ul>
<li>æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªæ–°å‡½æ•°å§‹ç»ˆä¿æŒäº†ç‰¹å®šçš„ä¸Šä¸‹æ–‡è¯­å¢ƒã€‚</li>
<li>jQuery.proxy( function, context ) functionä¸ºæ‰§è¡Œçš„å‡½æ•°ï¼Œcontentä¸ºå‡½æ•°çš„ä¸Šä¸‹æ–‡thiså€¼ä¼šè¢«è®¾ç½®æˆè¿™ä¸ªobjectå¯¹è±¡</li>
</ul>
<pre><code class="lang-js">&lt;script src=<span class="hljs-string">"http://libs.baidu.com/jquery/2.0.0/jquery.min.js"</span>&gt;<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
&lt;script&gt;
   <span class="hljs-keyword">let</span> btn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'btn'</span>);
   btn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
       setTimeout($.proxy((<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
           $(<span class="hljs-keyword">this</span>).css(<span class="hljs-string">'color'</span>,<span class="hljs-string">'red'</span>);
       }),<span class="hljs-keyword">this</span>),<span class="hljs-number">1000</span>);
   });    
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>    
</code></pre>
<h5 id="t918.3.6 Proxy">8.3.6 Proxy <a href="#t918.3.6 Proxy"> # </a></h5>
<ul>
<li>Proxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸º</li>
<li>Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚Proxy è¿™ä¸ªè¯çš„åŸæ„æ˜¯ä»£ç†ï¼Œç”¨åœ¨è¿™é‡Œè¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œå¯ä»¥è¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> wang={
    <span class="hljs-attr">name</span>: <span class="hljs-string">'wangy'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">29</span>,
    <span class="hljs-attr">height</span>:<span class="hljs-number">165</span>
}
<span class="hljs-keyword">let</span> wangMama=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>(wang,{
    get(target,key) {
        <span class="hljs-keyword">if</span> (key == <span class="hljs-string">'age'</span>) {
            <span class="hljs-keyword">return</span> wang.age<span class="hljs-number">-1</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key == <span class="hljs-string">'height'</span>) {
            <span class="hljs-keyword">return</span> wang.height+<span class="hljs-number">5</span>;
        }
        <span class="hljs-keyword">return</span> target[key];
    },
    set(target,key,val) {
        <span class="hljs-keyword">if</span> (key == <span class="hljs-string">'boyfriend'</span>) {
            <span class="hljs-keyword">let</span> boyfriend=val;
            <span class="hljs-keyword">if</span> (boyfriend.age&gt;<span class="hljs-number">40</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'å¤ªè€'</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (boyfriend.salary&lt;<span class="hljs-number">20000</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'å¤ªç©·'</span>);
            } <span class="hljs-keyword">else</span> {
                target[key]=val;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
});
<span class="hljs-built_in">console</span>.log(wangMama.age);
<span class="hljs-built_in">console</span>.log(wangMama.height);
wangMama.boyfriend={
    <span class="hljs-attr">age</span>: <span class="hljs-number">41</span>,
    <span class="hljs-attr">salary</span>:<span class="hljs-number">3000</span>
}
</code></pre>
<ul>
<li>ä»£ç†æ¨¡å¼ VS é€‚é…å™¨æ¨¡å¼ é€‚é…å™¨æä¾›ä¸åŒæ¥å£ï¼Œä»£ç†æ¨¡å¼æä¾›ä¸€æ¨¡ä¸€æ ·çš„æ¥å£</li>
<li>ä»£ç†æ¨¡å¼ VS è£…é¥°å™¨æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼åŸæ¥çš„åŠŸèƒ½ä¸å˜è¿˜å¯ä»¥ä½¿ç”¨ï¼Œä»£ç†æ¨¡å¼æ”¹å˜åŸæ¥çš„åŠŸèƒ½</li>
</ul>
<h2 id="t929. å¤–è§‚æ¨¡å¼">9. å¤–è§‚æ¨¡å¼ <a href="#t929. å¤–è§‚æ¨¡å¼"> # </a></h2>
<p>è¯¥æ¨¡å¼å°±æ˜¯æŠŠä¸€äº›å¤æ‚çš„æµç¨‹å°è£…æˆä¸€ä¸ªæ¥å£ä¾›ç»™å¤–éƒ¨ç”¨æˆ·æ›´ç®€å•çš„ä½¿ç”¨</p>
<ul>
<li>é—¨é¢è§’è‰²ï¼šå¤–è§‚æ¨¡å¼çš„æ ¸å¿ƒã€‚å®ƒè¢«å®¢æˆ·è§’è‰²è°ƒç”¨ï¼Œå®ƒç†Ÿæ‚‰å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å†…éƒ¨æ ¹æ®å®¢æˆ·è§’è‰²çš„éœ€æ±‚é¢„å®šäº†å‡ ç§åŠŸèƒ½çš„ç»„åˆ</li>
<li>å­ç³»ç»Ÿè§’è‰²:å®ç°äº†å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å®ƒå¯¹å®¢æˆ·è§’è‰²å’ŒFacadeæ—¶æœªçŸ¥çš„</li>
<li>å®¢æˆ·è§’è‰²:é€šè¿‡è°ƒç”¨Facedeæ¥å®Œæˆè¦å®ç°çš„åŠŸèƒ½</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_281c9c59_1720749.jpeg" alt="facade22"></p>
<h4 id="t939.1 ç±»å›¾">9.1 ç±»å›¾ <a href="#t939.1 ç±»å›¾"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_519053fe_1720749.jpeg" alt="facade"></p>
<h4 id="t949.2 ä»£ç ">9.2 ä»£ç  <a href="#t949.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sum</span></span>{
    sum(a,b) {
        <span class="hljs-keyword">return</span> a+b;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Minus</span></span>{
    minus(a,b) {
        <span class="hljs-keyword">return</span> a-b;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Multiply</span></span>{
    multiply(a,b) {
        <span class="hljs-keyword">return</span> a * b;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.sumObj=<span class="hljs-keyword">new</span> Sum();
        <span class="hljs-keyword">this</span>.minusObj=<span class="hljs-keyword">new</span> Minus();
        <span class="hljs-keyword">this</span>.multiplyObj=<span class="hljs-keyword">new</span> Multiply();
    }
    sum(...args) {
        <span class="hljs-keyword">this</span>.sumObj.sum(...args);
    }
    minus(...args) {
        <span class="hljs-keyword">this</span>.minusObj.minus(...args);
    }
    multiply(...args) {
        <span class="hljs-keyword">this</span>.multiplyObj.multiply(...args);
    }
}
<span class="hljs-keyword">let</span> calculator=<span class="hljs-keyword">new</span> Calculator();
calculator.sum(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);
calculator.minus(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);
calculator.multiply(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);
</code></pre>
<h4 id="t959.3 ä»£ç ">9.3 ä»£ç  <a href="#t959.3 ä»£ç "> # </a></h4>
<pre><code class="lang-js">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CPU</span></span>{
    start() {<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ‰“å¼€CPU'</span>);}
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Memory</span></span>{
    start() {<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ‰“å¼€å†…å­˜'</span>);}
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Disk</span></span>{
    start() {<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ‰“å¼€ç¡¬ç›˜'</span>);}
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Computer</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.cpu=<span class="hljs-keyword">new</span> CPU();
        <span class="hljs-keyword">this</span>.memory=<span class="hljs-keyword">new</span> Memory();
        <span class="hljs-keyword">this</span>.disk=<span class="hljs-keyword">new</span> Disk();
    }
    start() {
        <span class="hljs-keyword">this</span>.cpu.start();
        <span class="hljs-keyword">this</span>.memory.start();
        <span class="hljs-keyword">this</span>.disk.start();
    }
}
<span class="hljs-keyword">new</span> Computer().start();
</code></pre>
<h4 id="t969.3 åœºæ™¯">9.3 åœºæ™¯ <a href="#t969.3 åœºæ™¯"> # </a></h4>
<ul>
<li>ä¸ºå¤æ‚çš„æ¨¡å—æˆ–å­ç³»ç»Ÿæä¾›å¤–ç•Œè®¿é—®çš„æ¨¡å—</li>
<li>å­ç³»ç»Ÿç›¸äº’ç‹¬ç«‹</li>
</ul>
<h5 id="t979.3.1 redux">9.3.1 redux <a href="#t979.3.1 redux"> # </a></h5>
<ul>
<li><a href="https://github.com/reduxjs/redux/blob/master/src/index.js">redux</a></li>
</ul>
<h2 id="t9810.è§‚å¯Ÿè€…æ¨¡å¼">10.è§‚å¯Ÿè€…æ¨¡å¼ <a href="#t9810.è§‚å¯Ÿè€…æ¨¡å¼"> # </a></h2>
<ul>
<li>è¢«è§‚å¯Ÿè€…ä¾›ç»´æŠ¤è§‚å¯Ÿè€…çš„ä¸€ç³»åˆ—æ–¹æ³•</li>
<li>è§‚å¯Ÿè€…æä¾›æ›´æ–°æ¥å£</li>
<li>è§‚å¯Ÿè€…æŠŠè‡ªå·±æ³¨å†Œåˆ°è¢«è§‚å¯Ÿè€…é‡Œ</li>
<li>åœ¨è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–æ—¶å€™ï¼Œè°ƒç”¨è§‚å¯Ÿè€…çš„æ›´æ–°æ–¹æ³•</li>
</ul>
<h4 id="t9910.1 ç±»å›¾">10.1 ç±»å›¾ <a href="#t9910.1 ç±»å›¾"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_7fdaa324_1720749.jpeg" alt="observer"></p>
<h4 id="t10010.2 ä»£ç ">10.2 ä»£ç  <a href="#t10010.2 ä»£ç "> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Star</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">this</span>.name=name;
        <span class="hljs-keyword">this</span>.state=<span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.observers=[];
    }
    getState() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.state;
    }
    setState(state) {
        <span class="hljs-keyword">this</span>.state=state;
        <span class="hljs-keyword">this</span>.notifyAllObservers();
    }
    attach(observer) {
        <span class="hljs-keyword">this</span>.observers.push(observer);
    }
    notifyAllObservers() {
        <span class="hljs-keyword">this</span>.observers.forEach(<span class="hljs-function"><span class="hljs-params">observer</span>=&gt;</span>observer.update());
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fan</span></span>{
    <span class="hljs-keyword">constructor</span>(name,subject) {
        <span class="hljs-keyword">this</span>.name=name;
        <span class="hljs-keyword">this</span>.subject=subject;
        <span class="hljs-keyword">this</span>.subject.attach(<span class="hljs-keyword">this</span>);
    }
    update() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.subject.name}</span>æœ‰æ–°çš„çŠ¶æ€-<span class="hljs-subst">${<span class="hljs-keyword">this</span>.subject.getState()}</span>,<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span>æ­£åœ¨æ›´æ–°`</span>);    
    }
}
<span class="hljs-keyword">let</span> star=<span class="hljs-keyword">new</span> Star(<span class="hljs-string">'èµµä¸½é¢–'</span>);
<span class="hljs-keyword">let</span> fan1=<span class="hljs-keyword">new</span> Fan(<span class="hljs-string">'å§œè€å¸ˆ'</span>,star);
star.setState(<span class="hljs-string">'ç»“å©š'</span>);
</code></pre>
<h4 id="t10110.3 åœºæ™¯">10.3 åœºæ™¯ <a href="#t10110.3 åœºæ™¯"> # </a></h4>
<h5 id="t10210.3.1 äº‹ä»¶ç»‘å®š">10.3.1 äº‹ä»¶ç»‘å®š <a href="#t10210.3.1 äº‹ä»¶ç»‘å®š"> # </a></h5>
<pre><code class="lang-js">    &lt;button id="btn"&gt;click&lt;/button&gt;
    &lt;script&gt;
        let btn = document.getElementById('btn');
        btn.addEventListener('click',()=&gt;{alert(1)});
        btn.addEventListener('click',()=&gt;{alert(2)});
        btn.addEventListener('click',()=&gt;{alert(3)});
    &lt;/script&gt;
</code></pre>
<h5 id="t10310.3.2 Promise">10.3.2 Promise <a href="#t10310.3.2 Promise"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Promise</span></span>{
    <span class="hljs-keyword">constructor</span>(fn) {
        <span class="hljs-keyword">this</span>.callbacks=[];
        <span class="hljs-keyword">let</span> resolve=<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">this</span>.callbacks.forEach(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> callback())
        };
        fn(resolve);
    }
    then(callback) {
        <span class="hljs-keyword">this</span>.callbacks.push(callback);
    }
}
<span class="hljs-keyword">let</span> promise=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve,reject</span>) </span>{
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        resolve(<span class="hljs-number">100</span>);
    },<span class="hljs-number">1000</span>);
});
promise.then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>));
promise.then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>));
</code></pre>
<h5 id="t10410.3.3 callbacks">10.3.3 callbacks <a href="#t10410.3.3 callbacks"> # </a></h5>
<ul>
<li>JQuery.Callbacksæ˜¯jQuery1.7+ä¹‹åå¼•å…¥çš„ï¼Œç”¨æ¥è¿›è¡Œå‡½æ•°é˜Ÿåˆ—çš„addã€removeã€fireã€lockç­‰æ“ä½œ</li>
<li>å¹¶æä¾›onceã€memoryã€uniqueã€stopOnFalseå››ä¸ªoptionè¿›è¡Œä¸€äº›ç‰¹æ®Šçš„æ§åˆ¶ã€‚</li>
<li>Callbackså¯¹è±¡å…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°é˜Ÿåˆ—ï¼Œè·å¾—Callbackså¯¹è±¡ä¹‹å ï¼Œå°±å¯ä»¥å‘è¿™ä¸ªé›†åˆä¸­å¢åŠ æˆ–è€…åˆ é™¤å‡½æ•°ã€‚addå’ŒremoveåŠŸèƒ½ç›¸åï¼Œå‡½æ•°å‚æ•°æ˜¯ç›¸åŒçš„ï¼Œempty()åˆ é™¤å›è°ƒåˆ—è¡¨ä¸­çš„æ‰€æœ‰å‡½æ•°</li>
</ul>
<pre><code class="lang-js">&lt;script src=<span class="hljs-string">"http://libs.baidu.com/jquery/2.0.0/jquery.min.js"</span>&gt;<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
&lt;script&gt;
 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Callbacks</span>(<span class="hljs-params"></span>)</span>{
     <span class="hljs-keyword">let</span> observers = [];
     <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">observer</span>)</span>{
         observers.push(observer);
     }
     <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">remove</span>(<span class="hljs-params">observer</span>)</span>{
         <span class="hljs-keyword">let</span> index = observers.indexOf(observer);
         <span class="hljs-keyword">if</span>(index != <span class="hljs-number">-1</span>)
           observers.splice(index,<span class="hljs-number">1</span>);
     }
     <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fire</span>(<span class="hljs-params"></span>)</span>{
         observers.forEach(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item());
     }
     <span class="hljs-keyword">return</span> {
         add,
         remove,
         fire
     }
 }
 <span class="hljs-keyword">let</span> callbacks = Callbacks();

 <span class="hljs-keyword">let</span> a1= <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>alert(<span class="hljs-number">1</span>);
 <span class="hljs-keyword">let</span> a2= <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>alert(<span class="hljs-number">2</span>);
 <span class="hljs-keyword">let</span> a3= <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>alert(<span class="hljs-number">13</span>);
 callbacks.add(a1);
 callbacks.add(a2);
 callbacks.add(a3);
 callbacks.remove(a3);
 callbacks.fire();
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h5 id="t10510.3.4 events">10.3.4 events <a href="#t10510.3.4 events"> # </a></h5>
<p>è‡ªå®šä¹‰äº‹ä»¶</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> EventEmitter=<span class="hljs-built_in">require</span>(<span class="hljs-string">'./events'</span>);
<span class="hljs-keyword">let</span> subject=<span class="hljs-keyword">new</span> EventEmitter();
subject.on(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>,name);
});
subject.on(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>,name);
});
subject.emit(<span class="hljs-string">'click'</span>,<span class="hljs-string">'zfpx'</span>);
</code></pre>
<p>events.js</p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EventEmitter</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>._events={};
    }
    on(type,listener) {
        <span class="hljs-keyword">let</span> listeners=<span class="hljs-keyword">this</span>._events[type];
        <span class="hljs-keyword">if</span> (listeners) {
            listeners.push(listener);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>._events[type]=[listener];
        }
    }
    emit(type) {
        <span class="hljs-keyword">let</span> listeners=<span class="hljs-keyword">this</span>._events[type];
        <span class="hljs-keyword">let</span> args=<span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">arguments</span>).slice(<span class="hljs-number">1</span>);
        listeners.forEach(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener(...args));
    }
}
<span class="hljs-built_in">module</span>.exports = EventEmitter;
</code></pre>
<h5 id="t10610.3.5 æµ">10.3.5 æµ <a href="#t10610.3.5 æµ"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> fs=<span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">let</span> rs=fs.createReadStream(<span class="hljs-string">'./1.txt'</span>);
rs.on(<span class="hljs-string">'data'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(data)
});
rs.on(<span class="hljs-string">'end'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'end'</span>)
});
</code></pre>
<h5 id="t10710.3.6 httpæœåŠ¡å™¨">10.3.6 httpæœåŠ¡å™¨ <a href="#t10710.3.6 httpæœåŠ¡å™¨"> # </a></h5>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> http=<span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">let</span> server = http.createServer();
server.on(<span class="hljs-string">'request'</span>,(req,res)=&gt;{
  req.on(<span class="hljs-string">'data'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
      <span class="hljs-built_in">console</span>.log(data)
  });
}));
</code></pre>
<h5 id="t10810.3.7 ç”Ÿå‘½å‘¨æœŸå‡½æ•°">10.3.7 ç”Ÿå‘½å‘¨æœŸå‡½æ•° <a href="#t10810.3.7 ç”Ÿå‘½å‘¨æœŸå‡½æ•°"> # </a></h5>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_ff6d2630_1720749.jpeg" alt="reactlifecycle"></p>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_ac466dd3_1720749.jpeg" alt="vuelifecycle"></p>
<h5 id="t10910.3.8 vue watch">10.3.8 vue watch <a href="#t10910.3.8 vue watch"> # </a></h5>
<pre><code class="lang-js">&lt;body&gt;
&lt;div id="root"&gt;
      &lt;p&gt;FullName: {{fullName}}&lt;/p&gt;
      &lt;p&gt;FirstName: &lt;input type="text" v-model="firstName"/&gt;&lt;/p&gt;
      &lt;p&gt;LastName: &lt;input type="text" v-model="lastName"/&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;script src="https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
new Vue({
  el:'#root',
  data: {
    firstName:'å¼ ',
    lastName: 'ä¸‰',
    fullName:'å¼ ä¸‰'
  },
  watch: {
    firstName(newName, oldName) {
      this.fullName = newName + ' ' + this.lastName;
    }
  } 
})
&lt;/script&gt;
</code></pre>
<h5 id="t11010.3.9 redux">10.3.9 redux <a href="#t11010.3.9 redux"> # </a></h5>
<ul>
<li><a href="https://github.com/reduxjs/redux/blob/master/src/createStore.js">createStore</a>
<code>`</code>js
/**<ul>
<li>åˆ›å»ºä¸€ä¸ªReduxä»“åº“æ¥ä¿å­˜æ•´ä¸ªçŠ¶æ€æ ‘</li>
<li>æ”¹å˜çŠ¶æ€æ ‘çš„å”¯ä¸€æ–¹æ³•æ˜¯è°ƒç”¨store.dispatchæ–¹æ³•</li>
<li>åœ¨æ•´ä¸ªåº”ç”¨ä¸­åªèƒ½æœ‰ä¸€ä¸ªä»“åº“</li>
<li>ä¸ºäº†æŒ‡å®šçŠ¶æ€æ ‘çš„å„ä¸ªéƒ¨åˆ†å¦‚ä½•å“åº”actionçš„å˜åŒ–ï¼Œä½ å¯èƒ½ä½¿ç”¨combineReducersæ–¹æ³•æŠŠå¤šä¸ªreduceråˆå¹¶ä¸ºä¸€ä¸ªå•ç‹¬çš„reducer</li>
<li></li>
<li>@param {Function} reducer ä¸€ä¸ªé€šè¿‡å½“å‰çŠ¶æ€å¯¹è±¡å’Œè¦å¤„ç†çš„actionè¿”å›æ–°çš„çŠ¶æ€æ ‘çš„å‡½æ•°</li>
<li>@param {any} [preloadedState] åˆå§‹çŠ¶æ€ã€‚åœ¨åŒæ„åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æŒ‡å®šå®ƒä»¥åˆå¹¶æ¥è‡ªæœåŠ¡å™¨çš„çŠ¶æ€ï¼Œæˆ–è€…ä»ä¸€ä¸ªä»¥å‰åºåˆ—åŒ–çš„ç”¨æˆ·ä¼šè¯ä¸­æ¢å¤. </li>
<li>å¦‚æœä½ ä½¿ç”¨äº†combineReducers,æ¥ä»æ ¹reducerä¸­äº§ç”ŸçŠ¶æ€ï¼Œè¿™å¿…é¡»æ˜¯ä¸€ä¸ªå’ŒcombineReducer çš„keysç›¸åŒå½¢çŠ¶çš„å¯¹è±¡</li>
<li>@param {Function} [enhancer] ä»“åº“çš„enhancer. ä½ å¯èƒ½éœ€è¦æŒ‡å®šè¿™ä¸ªå»å¢å¼ºä»“åº“çš„èƒ½åŠ›ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„èƒ½åŠ›æ¯”å¦‚ä¸­é—´ä»¶</li>
<li>æ—¶é—´æ—…è¡Œï¼ŒæŒä¹…åŒ–ç­‰ç­‰ã€‚reduxè‡ªå¸¦çš„å”¯ä¸€ä¸­é—´ä»¶æ˜¯applyMiddleware</li>
<li>@returns {Store} æ˜¯ä¸€ä¸ªReduxä»“åº“è®©ä½ å¯ä»¥è¯»å–çŠ¶æ€ï¼Œæ´¾å‘actionå¹¶è®¢é˜…çŠ¶æ€å˜åŒ–
*/</li>
</ul>
</li>
</ul>
<p>export default function createStore(reducer,preloadedState,enhancer) {
    if (enhancer) {
        return enhancer(createStore)(reducer,preloadedState);
    }
    let state=preloadedState;
    let listeners=[];
    /**</p>
<pre><code> * è¯»å–ä»“åº“ç®¡ç†çš„çŠ¶æ€æ ‘
 * @returns {any} åº”ç”¨å½“å‰çš„çŠ¶æ€æ ‘
 */
function getState() {
    return state;
}
/**
 * å¢åŠ ä¸€ä¸ªå˜åŒ–ç›‘å¬å‡½æ•°ã€‚å®ƒå°†åœ¨ä»»ä½•æ´¾å‘åŠ¨ä½œçš„æ—¶å€™è¢«è°ƒç”¨
 * çŠ¶æ€æ ‘çš„éƒ¨åˆ†æ•°æ®å¯èƒ½ä¼šå‘ç”Ÿæ½œåœ¨çš„å˜åŒ–ã€‚ä½ å¯èƒ½åœ¨é‚£ä¸ªæ—¶å€™åœ¨å›è°ƒå‡½æ•°ä¸­è°ƒç”¨getStateæ–¹æ³•ä»¥è·å–æœ€æ–°çš„çŠ¶æ€ã€‚
 * ä½ å¯èƒ½ä¼šåœ¨ç›‘å¬å‡½æ•°é‡Œè°ƒç”¨dispatchæ–¹æ³•ï¼Œå®ƒä¼šå…·å¤‡ä»¥ä¸‹æ³¨æ„äº‹é¡¹
 * 1. è®¢é˜…ä»…ä»…åœ¨æ¯ä¸€æ¬¡è°ƒç”¨æ¯ä¸€ä¸ªdispatchæ–¹æ³•æ—¶è¢«è®°å½•å¿«ç…§
 * å¦‚æœä½ åœ¨ç›‘å¬å‡½æ•°è¢«è§¦å‘çš„æ—¶å€™è®¢é˜…æˆ–å–æ¶ˆè®¢é˜…çš„è¯ï¼Œè¿™å¯¹å½“å‰æ­£åœ¨å¤„ç†ä¸­çš„dispatchæ²¡æœ‰ä»»ä½•æ•ˆæœ
 * å°½ç®¡å¦‚æ­¤ï¼Œåœ¨ä¸‹ä¸€æ¬¡dispatchæ–¹æ³•çš„è°ƒç”¨ä¸­ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯å†…åµŒï¼Œéƒ½å°†ä½¿ç”¨ä¸€ä¸ªæœ€æ–°çš„è®¢é˜…åˆ—è¡¨
 * 
 * 2.ç›‘å¬å‡½æ•°ä¸åº”è¯¥é¢„æœŸæ‰€æœ‰çš„çŠ¶æ€å˜åŒ–ï¼Œå› ä¸ºçŠ¶æ€å¯èƒ½åœ¨dispatchä¸­è¢«æ›´æ–°å¤šæ¬¡ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œåœ¨ dispatchä¹‹å‰æ³¨å†Œçš„è®¢é˜…è€…å°†ä¼šä»¥æœ€æ–°çš„çŠ¶æ€è°ƒç”¨
 * 
 * @param {*} listener  æ¯ä¸€æ¬¡dispatchæ—¶è¢«è°ƒç”¨çš„ç›‘å¬å‡½æ•°
 * @returns {Function} è¿”å›ä¸€ä¸ªå¯ä»¥ç§»é™¤æ­¤ç›‘å¬å‡½æ•°çš„å‡½æ•°
 */
function subscribe(listener) {
    listeners.push(listener);
    return function () {
        const index=listeners.indexOf(listener);
        listeners.splice(inddx,1);
    }
}

/**
 * æ´¾å‘ä¸€ä¸ªåŠ¨ä½œï¼Œè¿™æ˜¯è§¦å‘çŠ¶æ€æ”¹å˜çš„å”¯ä¸€æ–¹å¼
 * ç”¨æ¥åˆ›å»ºä»“åº“çš„reducerå‡½æ•°å°†ä¼šè¢«è°ƒç”¨ï¼Œå‚æ•°æ˜¯å½“å‰çš„çŠ¶æ€æ ‘å’Œç»™å®šçš„åŠ¨ä½œã€‚å®ƒçš„è¿”å›å€¼å°†ä¼šè¢«å½“ä½œä¸‹ä¸€ä¸ªçŠ¶æ€æ ‘ï¼Œæ‰€æœ‰çš„ç›‘å¬å‡½æ•°ä¹Ÿä¼šè¢«é€šçŸ¥
 * 
 * åŸºæœ¬å®ç°ä¸­åªæ”¯æŒç®€å•åŠ¨ä½œå¯¹è±¡ã€‚å¦‚æœä½ æƒ³è¦æ´¾å‘ä¸€ä¸ªPromiseã€ä¸€ä¸ªObserverableã€ä¸€ä¸ªthunkæˆ–è€…å…¶å®ƒçš„ä»»ä½•æ‡‚çˆ±ï¼Œä½ éœ€è¦æŠŠä½ åˆ›å»ºä»“åº“çš„å‡½æ•°åŒ…è£¹åˆ°å¯¹åº”çš„ä¸­é—´ä»¶é‡Œã€‚
 * æ¯”å¦‚ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹redux-thunkåŒ…ã€‚ç”šè‡³ä¸­é—´ä»¶æœ€åé€šè¿‡è¿™ä¸ªæ–¹æ³•å°†ä¼šæ´¾å‘ç®€å•å¯¹è±¡ã€‚
 * 
 * 
 * @param {*} action ä¸€ä¸ªè¡¨ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆçš„ç®€å•å¯¹è±¡ã€‚ä¿æŒåŠ¨ä½œåºåˆ—åŒ–å°†ä¼šæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä»¥æ–¹ä¾¿ä½ è¿›è¡Œè®°å½•å’Œå›æ”¾ç”¨æˆ·ä¼šè¯ã€‚æˆ–è€…ä½¿ç”¨æ—¶é—´æ—…è¡Œå·¥å…·redux-devtools.ä¸€ä¸ªåŠ¨ä½œå¿…é¡»æœ‰ä¸€ä¸ªtypeå±æ€§è€Œä¸”ä¸èƒ½æ˜¯undefine.ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡è¡¨ç¤ºåŠ¨ä½œç±»å‹å°†ä¼šæ˜¯ä¸ªå¥½ä¸»æ„ã€‚
 * @returns {object} ä¸ºäº†æ–¹ä¾¿ï¼Œä½ æ´¾å‘çš„ç›¸åŒçš„åŠ¨ä½œå¯¹è±¡
 * è¯·æ³¨æ„ï¼Œå¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œä½ å¯èƒ½éœ€è¦åŒ…è£¹ dispatchå»è¿”å›åˆ«çš„ä¸œè¥¿(æ¯”å¦‚ä½ ç­‰å¾…çš„Promise)
 */
function dispatch(action) {
    state=reducer(state,action);
    listeners.forEach(listener=&gt;listener())
}
dispatch({type:'@@redux/INIT'});
return {
    dispatch,
    subscribe,
    getState
}
</code></pre><p>}</p>
<pre><code>
#### 10.4 è§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼
##### 10.4.1 è§‚å¯Ÿè€…æ¨¡å¼(Observer)
- è®¢é˜…è€…æŠŠè‡ªå·±æƒ³è®¢é˜…çš„äº‹ä»¶æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒ
- å½“è¯¥äº‹ä»¶è§¦å‘æ—¶å€™ï¼Œå‘å¸ƒè€…å‘å¸ƒè¯¥äº‹ä»¶åˆ°è°ƒåº¦ä¸­å¿ƒ,ç”±è°ƒåº¦ä¸­å¿ƒç»Ÿä¸€è°ƒåº¦è®¢é˜…è€…æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒçš„å¤„ç†ä»£ç ã€‚

```js
class Agency{
    constructor() {
        this._topics={};
    }
    subscribe(topic,listener) {
        let listeners=this._topics[topic];
        if (listeners) {
            listeners.push(listener);
        } else {
            this._topics[topic]=[listener];
        }
    }
    publish(topic) {
        let listeners=this._topics[topic];
        let args=Array.from(arguments).slice(1);
        listeners.forEach(listener =&gt; listener(...args));
    }
}
let agent=new Agency();
class Landlord{
    constructor(name) {
        this.name=name;
    }
    lend(agent,area,money) {
        agent.publish('house',area,money);
    }
}

class Tenant{
    constructor(name) {
        this.name=name;
    }
    rent(agent) {
        agent.subscribe('house', (area,money)=&gt; {
            console.log(`æœ‰æ–°æˆ¿æºäº†, ${area}å¹³ç±³, ${money}å…ƒ`);
        });
    }
}
let t1=new Tenant('æˆ¿å®¢1');
let t2=new Tenant('æˆ¿å®¢2');
let l1=new Landlord('æˆ¿ä¸œ1');
t1.rent(agent);
t2.rent(agent);
l1.lend(agent,30,2000);
</code></pre><ul>
<li>è™½ç„¶ä¸¤ç§æ¨¡å¼éƒ½å­˜åœ¨è®¢é˜…è€…å’Œå‘å¸ƒè€…ï¼ˆè§‚å¯Ÿè€…å¯è®¤ä¸ºæ˜¯è®¢é˜…è€…ã€è¢«è§‚å¯Ÿè€…å¯è®¤ä¸ºæ˜¯å‘å¸ƒè€…ï¼‰</li>
<li>ä½†æ˜¯è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ç”±è¢«è§‚å¯Ÿè€…è°ƒåº¦çš„ï¼Œè€Œå‘å¸ƒ/è®¢é˜…æ¨¡å¼æ˜¯ç»Ÿä¸€ç”±è°ƒåº¦ä¸­å¿ƒè°ƒçš„</li>
<li>æ‰€ä»¥è§‚å¯Ÿè€…æ¨¡å¼çš„è®¢é˜…è€…ä¸å‘å¸ƒè€…ä¹‹é—´æ˜¯å­˜åœ¨ä¾èµ–çš„ï¼Œè€Œå‘å¸ƒ/è®¢é˜…æ¨¡å¼åˆ™ä¸ä¼šã€‚</li>
</ul>
<h2 id="t11111. è¿­ä»£å™¨æ¨¡å¼">11. è¿­ä»£å™¨æ¨¡å¼ <a href="#t11111. è¿­ä»£å™¨æ¨¡å¼"> # </a></h2>
<ul>
<li>é¡ºåºè®¿é—®ä¸€ä¸ªé›†åˆ</li>
<li>ä½¿ç”¨è€…æ— éœ€çŸ¥é“é›†åˆçš„å†…éƒ¨æ•°æ®ç»“æ„</li>
</ul>
<h3 id="t11211.1 ç±»å›¾">11.1 ç±»å›¾ <a href="#t11211.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_27475743_1720749.jpeg" alt="iterator"></p>
<h3 id="t11311.2 ä»£ç ">11.2 ä»£ç  <a href="#t11311.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createIterator</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-keyword">let</span> index=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> {
        next() {
            <span class="hljs-keyword">return</span> index&lt;arr.length?
                {<span class="hljs-attr">value</span>: arr[index++],<span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>}:
                {<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span>}
        }
    }
}
<span class="hljs-keyword">let</span> it=createIterator([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]);
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
</code></pre>
<h3 id="t11411.3 åœºæ™¯">11.3 åœºæ™¯ <a href="#t11411.3 åœºæ™¯"> # </a></h3>
<h4 id="t11511.3.1 Iterator">11.3.1 Iterator <a href="#t11511.3.1 Iterator"> # </a></h4>
<ul>
<li>åœ¨ES6ä¸­æœ‰åºé›†åˆæ•°æ®ç±»å‹æœ‰Arrayã€Mapã€Setã€Stringã€TypedArrayã€argumentsã€NodeList</li>
<li>æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªç»Ÿä¸€çš„éå†æ¥å£æ¥éå†æ‰€æœ‰çš„æ•°æ®ç±»å‹</li>
<li>ä»–ä»¬éƒ½æœ‰ [Symbol.Iterator]å±æ€§ï¼Œå±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œå‡½æ•°ä¼šè¿”å›è¿­ä»£å™¨</li>
<li>è¿­ä»£å™¨å°±æœ‰nextæ–¹æ³•é¡ºåºè¿”å›å­å…ƒç´ <pre><code class="lang-js"><span class="hljs-built_in">Array</span>.prototype[<span class="hljs-built_in">Symbol</span>.iterator]=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> index=<span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">next</span>:<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span> {
          <span class="hljs-keyword">return</span> index&lt;<span class="hljs-keyword">this</span>.length?
              {<span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>[index++],<span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>}:
              {<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span>}
      }
  }
}
<span class="hljs-keyword">let</span> arr=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];
<span class="hljs-keyword">let</span> it=arr[<span class="hljs-built_in">Symbol</span>.iterator]();
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
<span class="hljs-built_in">console</span>.log(it.next());
</code></pre>
</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> result={};
<span class="hljs-keyword">while</span> (!result.done) {
    result=it.next();
    <span class="hljs-built_in">console</span>.log(result);
}
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> arr) {
    <span class="hljs-built_in">console</span>.log(item);
}
</code></pre>
<h4 id="t11611.3.2 ...">11.3.2 ... <a href="#t11611.3.2 ..."> # </a></h4>
<p>è§£æ„èµ‹å€¼</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>];
<span class="hljs-keyword">let</span> [x,y] = arr;
<span class="hljs-keyword">let</span> arr2 = [<span class="hljs-number">1</span>, ...arr];
</code></pre>
<h4 id="t11711.3.3 yield*">11.3.3 yield* <a href="#t11711.3.3 yield*"> # </a></h4>
<p>yield*åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„ç»“æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£ã€‚</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> generator = <span class="hljs-function"><span class="hljs-keyword">function</span>* (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">yield</span>* [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>];
    <span class="hljs-keyword">yield</span> <span class="hljs-number">5</span>;
  };

<span class="hljs-keyword">var</span> iterator = generator();

<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 1, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 2, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next());<span class="hljs-comment">// { value: 3, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 4, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: 5, done: false }</span>
<span class="hljs-built_in">console</span>.log(iterator.next()); <span class="hljs-comment">// { value: undefined, done: true }</span>
</code></pre>
<h3 id="t11812. çŠ¶æ€æ¨¡å¼">12. çŠ¶æ€æ¨¡å¼ <a href="#t11812. çŠ¶æ€æ¨¡å¼"> # </a></h3>
<ul>
<li>å½“ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šå¯¼è‡´å…¶è¡Œä¸ºçš„æ”¹å˜ï¼Œè¿™çœ‹èµ·æ¥åƒæ˜¯æ”¹å˜äº†å¯¹è±¡</li>
<li>å¯¹è±¡æœ‰è‡ªå·±çš„çŠ¶æ€</li>
<li>ä¸åŒçŠ¶æ€ä¸‹æ‰§è¡Œçš„é€»è¾‘ä¸ä¸€æ ·</li>
<li>æ˜ç¡®çŠ¶æ€å’Œæ¯ä¸ªçŠ¶æ€ä¸‹æ‰§è¡Œçš„åŠ¨ä½œ</li>
<li>ç”¨æ¥å‡å°‘<code>if...else</code>å­å¥</li>
</ul>
<h3 id="t11912.1 ç±»å›¾">12.1 ç±»å›¾ <a href="#t11912.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_c048eb45_1720749.jpeg" alt="state"></p>
<h3 id="t12012.2 ä»£ç ">12.2 ä»£ç  <a href="#t12012.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Battery</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.amount=<span class="hljs-string">'high'</span>;
    }
    show() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.amount == <span class="hljs-string">'high'</span>) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ç»¿è‰²'</span>);
            <span class="hljs-keyword">this</span>.amount=<span class="hljs-string">'middle'</span>;
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.amount == <span class="hljs-string">'middle'</span>) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'é»„è‰²'</span>);
            <span class="hljs-keyword">this</span>.amount=<span class="hljs-string">'low'</span>;
        }<span class="hljs-keyword">else</span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'çº¢è‰²'</span>);
        }
    }
}
<span class="hljs-keyword">let</span> battery=<span class="hljs-keyword">new</span> Battery();
battery.show();
battery.show();
battery.show();
</code></pre>
<ul>
<li><code>show</code>è¿åå¼€æ”¾-å°é—­åŸåˆ™</li>
<li><code>show</code>æ–¹æ³•é€»è¾‘å¤ªå¤šå¤ªå¤æ‚</li>
<li>é¢œè‰²çŠ¶æ€åˆ‡æ¢ä¸æ˜æ˜¾</li>
<li>è¿‡å¤šçš„ <code>if/else</code> è®©ä»£ç ä¸å¯ç»´æŠ¤</li>
</ul>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Battery</span> </span>{
    <span class="hljs-keyword">constructor</span>(state) {
        <span class="hljs-keyword">this</span>.amount = <span class="hljs-string">'high'</span>;
        <span class="hljs-keyword">this</span>.state = <span class="hljs-keyword">new</span> SuccessState();
    }
    show() {
        <span class="hljs-keyword">this</span>.state.show();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.amount == <span class="hljs-string">'high'</span>) {
            <span class="hljs-keyword">this</span>.amount=<span class="hljs-string">'middle'</span>;
            <span class="hljs-keyword">this</span>.setState(<span class="hljs-keyword">new</span> WarningState());
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.amount==<span class="hljs-string">'middle'</span>){
            <span class="hljs-keyword">this</span>.amount=<span class="hljs-string">'low'</span>;
            <span class="hljs-keyword">this</span>.setState(<span class="hljs-keyword">new</span> DangerState());
        }
    }
    setState(state) {
        <span class="hljs-keyword">this</span>.state = state;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuccessState</span> </span>{
    <span class="hljs-keyword">constructor</span>(battery){
        <span class="hljs-keyword">this</span>.battery = battery;
    }
    show() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`ç»¿è‰² <span class="hljs-subst">${battery.amount}</span>`</span>);

  }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WarningState</span> </span>{
    <span class="hljs-keyword">constructor</span>(battery){
        <span class="hljs-keyword">this</span>.battery = battery;
    }
    show() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`é»„è‰² <span class="hljs-subst">${battery.amount}</span>`</span>);
  }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DangerState</span> </span>{
    <span class="hljs-keyword">constructor</span>(battery){
        <span class="hljs-keyword">this</span>.battery = battery;
    }
    show() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`çº¢è‰² <span class="hljs-subst">${battery.amount}</span>`</span>);
  }
}

<span class="hljs-keyword">let</span> battery=<span class="hljs-keyword">new</span> Battery();
battery.show();
battery.show();
battery.show();
</code></pre>
<h3 id="t12112.3 åº”ç”¨åœºæ™¯">12.3 åº”ç”¨åœºæ™¯ <a href="#t12112.3 åº”ç”¨åœºæ™¯"> # </a></h3>
<h4 id="t12212.3.1 ç‚¹èµ">12.3.1 ç‚¹èµ <a href="#t12212.3.1 ç‚¹èµ"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> likeState={
    render(element) {
        element.innerHTML=<span class="hljs-string">'èµğŸ‘'</span>;
    }
}
<span class="hljs-keyword">let</span> likedState={
    render(element) {
        element.innerHTML=<span class="hljs-string">'å–æ¶ˆ'</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span></span>{
    <span class="hljs-keyword">constructor</span>(container) {
        <span class="hljs-keyword">this</span>.liked=<span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.state = likeState;
        <span class="hljs-keyword">this</span>.element=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'button'</span>);
        container.appendChild(<span class="hljs-keyword">this</span>.element);
        <span class="hljs-keyword">this</span>.render();
    }
    setState(state) {
        <span class="hljs-keyword">this</span>.state=state;
        <span class="hljs-keyword">this</span>.render();
    }
    render() {
        <span class="hljs-keyword">this</span>.state.render(<span class="hljs-keyword">this</span>.element);
    }
}

<span class="hljs-keyword">let</span> button=<span class="hljs-keyword">new</span> Button(<span class="hljs-built_in">document</span>.body);
button.element.addEventListener(<span class="hljs-string">'click'</span>,() =&gt; {
    button.setState(button.liked? likeState:likedState);
    button.liked=!button.liked;
});
</code></pre>
<h4 id="t12312.3.2 promise">12.3.2 promise <a href="#t12312.3.2 promise"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Promise</span></span>{
    <span class="hljs-keyword">constructor</span>(fn) {
        <span class="hljs-keyword">this</span>.state=<span class="hljs-string">'initial'</span>;
        <span class="hljs-keyword">this</span>.successes=[];
        <span class="hljs-keyword">this</span>.fails=[];
        <span class="hljs-keyword">let</span> resolve=<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
            <span class="hljs-keyword">this</span>.state=<span class="hljs-string">'fulfilled'</span>;
            <span class="hljs-keyword">this</span>.successes.forEach(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item(data));
        }
        <span class="hljs-keyword">let</span> reject=<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
            <span class="hljs-keyword">this</span>.state=<span class="hljs-string">'failed'</span>;
            <span class="hljs-keyword">this</span>.fails.forEach(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item(error));
        }
        fn(resolve,reject);
    }
    then(success,fail) {
        <span class="hljs-keyword">this</span>.successes.push(success);
        <span class="hljs-keyword">this</span>.fails.push(fail);
    }
}
<span class="hljs-keyword">let</span> p=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve,reject</span>) </span>{
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        resolve(<span class="hljs-number">1</span>);
    },<span class="hljs-number">1000</span>);
});
p.then(<span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æˆåŠŸ'</span>),error=&gt;<span class="hljs-built_in">console</span>.error(<span class="hljs-string">'å¤±è´¥'</span>));
</code></pre>
<h4 id="t12412.3.3  Reactå¯¼èˆª">12.3.3  Reactå¯¼èˆª <a href="#t12412.3.3  Reactå¯¼èˆª"> # </a></h4>
<ul>
<li><a href="https://codepen.io/zhufengnodejs/pen/LXogOy">codepen.io</a><pre><code class="lang-js"><span class="hljs-keyword">const</span> States = {
<span class="hljs-string">'show'</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"banneræ˜¾ç¤ºï¼Œç‚¹å‡»å¯ä»¥å…³é—­"</span>);
  <span class="hljs-keyword">this</span>.setState({
    <span class="hljs-attr">currentState</span>: <span class="hljs-string">"hide"</span>
  })
},
<span class="hljs-string">'hide'</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"banneréšè—ï¼Œç‚¹å‡»å¯ä»¥æ‰“å¼€"</span>);
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">currentState</span>: <span class="hljs-string">"show"</span>
    })
}
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Banner</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>{
state={<span class="hljs-attr">currentState</span>:<span class="hljs-string">'show'</span>}
toggle = <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{
  <span class="hljs-keyword">let</span> s = <span class="hljs-keyword">this</span>.state.currentState;
  States[s] &amp;&amp; States[s].apply(<span class="hljs-keyword">this</span>);
}
render(){
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {this.state.currentState=='show'&amp;&amp;<span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>å¯¼èˆª<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.toggle}</span>&gt;</span>éšè—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
}
ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Banner</span>/&gt;</span></span>,<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>));
</code></pre>
</li>
</ul>
<h4 id="t12512.3.4 æœ‰é™çŠ¶æ€æœº">12.3.4 æœ‰é™çŠ¶æ€æœº <a href="#t12512.3.4 æœ‰é™çŠ¶æ€æœº"> # </a></h4>
<ul>
<li>äº‹ç‰©æ‹¥æœ‰å¤šç§çŠ¶æ€ï¼Œä»»ä¸€æ—¶é—´åªä¼šå¤„äºä¸€ç§çŠ¶æ€ä¸ä¼šå¤„äºå¤šç§çŠ¶æ€ï¼›</li>
<li>åŠ¨ä½œå¯ä»¥æ”¹å˜äº‹ç‰©çŠ¶æ€ï¼Œä¸€ä¸ªåŠ¨ä½œå¯ä»¥é€šè¿‡æ¡ä»¶åˆ¤æ–­ï¼Œæ”¹å˜äº‹ç‰©åˆ°ä¸åŒçš„çŠ¶æ€ï¼Œä½†æ˜¯ä¸èƒ½åŒæ—¶æŒ‡å‘å¤šä¸ªçŠ¶æ€ï¼Œä¸€ä¸ªæ—¶é—´ï¼Œå°±ä¸€ä¸ªçŠ¶æ€</li>
<li>çŠ¶æ€æ€»æ•°æ˜¯æœ‰é™çš„ï¼›</li>
<li><a href="https://github.com/jakesgordon/javascript-state-machine">javascript-state-machine</a><ul>
<li>formï¼šå½“å‰è¡Œä¸ºä»å“ªä¸ªçŠ¶æ€æ¥</li>
<li>to:å½“å‰è¡Œä¸ºæ‰§è¡Œå®Œä¼šè¿‡æ¸¡åˆ°å“ªä¸ªçŠ¶æ€</li>
<li>name:å½“å‰è¡Œä¸ºçš„åå­—</li>
</ul>
</li>
<li>fsm.can(t) - return true å¦‚æœè¿‡æ¸¡æ–¹æ³•tå¯ä»¥ä»å½“å‰çŠ¶æ€è§¦å‘</li>
<li>fsm.cannot(t) - return true å¦‚æœå½“å‰çŠ¶æ€ä¸‹ä¸èƒ½å‘ç”Ÿè¿‡æ¸¡æ–¹æ³•t</li>
<li>fsm.transitions() - è¿”å›ä»å½“å‰çŠ¶æ€å¯ä»¥è¿‡æ¸¡åˆ°çš„çŠ¶æ€çš„åˆ—è¡¨</li>
<li>fsm.allTransitions() - è¿”å›æ‰€æœ‰è¿‡æ¸¡æ–¹æ³•çš„åˆ—è¡¨</li>
<li>fsm.allStates() - è¿”å›çŠ¶æ€æœºæœ‰çš„æ‰€æœ‰çŠ¶æ€çš„åˆ—è¡¨</li>
<li>onBefore<transition> åœ¨ç‰¹å®šåŠ¨ä½œTRANSITIONå‰è§¦å‘</transition></li>
<li>onLeaveState ç¦»å¼€ä»»ä½•ä¸€ä¸ªçŠ¶æ€çš„æ—¶å€™è§¦å‘</li>
<li>onLeave<state> åœ¨ç¦»å¼€ç‰¹å®šçŠ¶æ€STATEæ—¶è§¦å‘</state></li>
<li>onTransition åœ¨ä»»ä½•åŠ¨ä½œå‘ç”ŸæœŸé—´è§¦å‘</li>
<li>onEnterState å½“è¿›å…¥ä»»ä½•çŠ¶æ€æ—¶è§¦å‘</li>
<li>onEnter<state> è¿›å…¥ä¸€ä¸ªç‰¹å®šçš„çŠ¶æ€STATEæ—¶è§¦å‘</state></li>
<li>on<state> onEnter<state>çš„ç®€å†™</state></state></li>
<li>onAfterTransition ä»»ä½•åŠ¨ä½œè§¦å‘åè§¦å‘</li>
<li>onAfter<transition> åœ¨ç‰¹å®šåŠ¨ä½œTRANSITIONåè§¦å‘</transition></li>
<li>on<transition> onAfter<transition>çš„ç®€å†™</transition></transition></li>
</ul>
<pre><code class="lang-js"><span class="hljs-comment">//æœ‰é™çŠ¶æ€æœº Finite-state machine</span>
<span class="hljs-keyword">var</span> StateMachine = <span class="hljs-built_in">require</span>(<span class="hljs-string">'javascript-state-machine'</span>);
<span class="hljs-comment">//æœ‰é™çŠ¶æ€æœº Finite-state machine</span>
<span class="hljs-comment">//var StateMachine=require('javascript-state-machine');</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StateMachine</span> </span>{
    <span class="hljs-keyword">constructor</span>(options) {
        <span class="hljs-keyword">let</span> {init,transitions,methods} =options;
        <span class="hljs-keyword">this</span>.state=init;
        transitions.forEach(<span class="hljs-function"><span class="hljs-params">transition</span> =&gt;</span> {
            <span class="hljs-keyword">let</span> {<span class="hljs-keyword">from</span>,to,name}=transition;
            <span class="hljs-keyword">this</span>[name]=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state == <span class="hljs-keyword">from</span>) {
                    <span class="hljs-keyword">this</span>.state=to;
                    <span class="hljs-keyword">let</span> onMethod=<span class="hljs-string">'on'</span>+name.slice(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>).toUpperCase()+name.slice(<span class="hljs-number">1</span>);
                    methods[onMethod]&amp;&amp;methods[onMethod]();
                }
            }
        });
    }
}
<span class="hljs-keyword">var</span> fsm = <span class="hljs-keyword">new</span> StateMachine({
    <span class="hljs-attr">init</span>: <span class="hljs-string">'solid'</span>,
    <span class="hljs-attr">transitions</span>: [{
            <span class="hljs-attr">name</span>: <span class="hljs-string">'melt'</span>,
            <span class="hljs-attr">from</span>: <span class="hljs-string">'solid'</span>,
            <span class="hljs-attr">to</span>: <span class="hljs-string">'liquid'</span>
        },
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'freeze'</span>,
            <span class="hljs-attr">from</span>: <span class="hljs-string">'liquid'</span>,
            <span class="hljs-attr">to</span>: <span class="hljs-string">'solid'</span>
        },
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'vaporize'</span>,
            <span class="hljs-attr">from</span>: <span class="hljs-string">'liquid'</span>,
            <span class="hljs-attr">to</span>: <span class="hljs-string">'gas'</span>
        },
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'condense'</span>,
            <span class="hljs-attr">from</span>: <span class="hljs-string">'gas'</span>,
            <span class="hljs-attr">to</span>: <span class="hljs-string">'liquid'</span>
        }
    ],
    <span class="hljs-attr">methods</span>: {
        <span class="hljs-attr">onMelt</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'I melted'</span>)
        },
        <span class="hljs-attr">onFreeze</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'I froze'</span>)
        },
        <span class="hljs-attr">onVaporize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'I vaporized'</span>)
        },
        <span class="hljs-attr">onCondense</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'I condensed'</span>)
        }
    }
});
fsm.melt();
</code></pre>
<h2 id="t12613.ç­–ç•¥æ¨¡å¼">13.ç­–ç•¥æ¨¡å¼ <a href="#t12613.ç­–ç•¥æ¨¡å¼"> # </a></h2>
<ul>
<li>å°†å®šä¹‰çš„ä¸€ç»„ç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å…¶ç›¸äº’ä¹‹é—´å¯ä»¥æ›¿æ¢ã€‚å°è£…çš„ç®—æ³•å…·æœ‰ä¸€å®šç‹¬ç«‹æ€§ï¼Œä¸ä¼šéšå®¢æˆ·ç«¯å˜åŒ–è€Œå˜åŒ–ã€‚</li>
<li>é¿å…å¤§é‡çš„if else æˆ– swith case</li>
</ul>
<h3 id="t12713.1 ç±»å›¾">13.1 ç±»å›¾ <a href="#t12713.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_cccc2ab0_1720749.jpeg" alt="strategy"></p>
<h3 id="t12813.2 ä»£ç ">13.2 ä»£ç  <a href="#t12813.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span></span>{
    <span class="hljs-keyword">constructor</span>(type) {
        <span class="hljs-keyword">this</span>.type=type;
    }
    pay(amount) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.type == <span class="hljs-string">'ä¼šå‘˜é¡¾å®¢'</span>) {
            <span class="hljs-keyword">return</span> amount*<span class="hljs-number">.9</span>;
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.type == <span class="hljs-string">'VIPé¡¾å®¢'</span>) {
            <span class="hljs-keyword">return</span> amount*<span class="hljs-number">.8</span>;
        } 
        <span class="hljs-keyword">return</span> amount;
    }
}
<span class="hljs-keyword">let</span> c1=<span class="hljs-keyword">new</span> Customer(<span class="hljs-string">'æ™®é€šé¡¾å®¢'</span>);
<span class="hljs-built_in">console</span>.log(c1.pay(<span class="hljs-number">100</span>));
<span class="hljs-keyword">let</span> c2=<span class="hljs-keyword">new</span> Customer(<span class="hljs-string">'ä¼šå‘˜é¡¾å®¢'</span>);
<span class="hljs-built_in">console</span>.log(c2.pay(<span class="hljs-number">100</span>));
<span class="hljs-keyword">let</span> c3=<span class="hljs-keyword">new</span> Customer(<span class="hljs-string">'VIPé¡¾å®¢'</span>);
<span class="hljs-built_in">console</span>.log(c3.pay(<span class="hljs-number">100</span>));
</code></pre>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span></span>{
    <span class="hljs-keyword">constructor</span>(kind) {
        <span class="hljs-keyword">this</span>.kind=kind;
    }
    cost(amount) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.kind.discount(amount);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Kind</span></span>{

}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Normal</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Kind</span></span>{
    discount(amount) {
        <span class="hljs-keyword">return</span> amount;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Kind</span></span>{
    discount(amount) {
        <span class="hljs-keyword">return</span> amount*<span class="hljs-number">.9</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VIP</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Kind</span></span>{
    discount(amount) {
        <span class="hljs-keyword">return</span> amount*<span class="hljs-number">.8</span>;
    }
}
<span class="hljs-keyword">let</span> c1=<span class="hljs-keyword">new</span> Customer(<span class="hljs-keyword">new</span> Normal());
<span class="hljs-built_in">console</span>.log(c1.cost(<span class="hljs-number">100</span>));
c1.kind=<span class="hljs-keyword">new</span> Member();
<span class="hljs-built_in">console</span>.log(c1.cost(<span class="hljs-number">100</span>));
c1.kind=<span class="hljs-keyword">new</span> VIP();
<span class="hljs-built_in">console</span>.log(c1.cost(<span class="hljs-number">100</span>));
</code></pre>
<p>æŠŠç®—æ³•å°è£…åœ¨ç­–ç•¥å¯¹è±¡ä¸­ï¼ŒæŒ‡å®šç®—æ³•è°ƒç”¨å³å¯</p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span></span>{
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-keyword">this</span>.kinds={
            <span class="hljs-attr">normal</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">price</span>) </span>{
                <span class="hljs-keyword">return</span> price;
            },
            <span class="hljs-attr">member</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">price</span>) </span>{
                <span class="hljs-keyword">return</span> price*<span class="hljs-number">.9</span>;
            },
            <span class="hljs-attr">vip</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">price</span>) </span>{
                <span class="hljs-keyword">return</span> price*<span class="hljs-number">.8</span>;
            }
        }
    }
    cost(kind,amount) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.kinds[kind](amount);
    }
}
<span class="hljs-keyword">let</span> c=<span class="hljs-keyword">new</span> Customer();
<span class="hljs-built_in">console</span>.log(c.cost(<span class="hljs-string">'normal'</span>,<span class="hljs-number">100</span>));
<span class="hljs-built_in">console</span>.log(c.cost(<span class="hljs-string">'member'</span>,<span class="hljs-number">100</span>));
<span class="hljs-built_in">console</span>.log(c.cost(<span class="hljs-string">'vip'</span>,<span class="hljs-number">100</span>));
</code></pre>
<h3 id="t12913.3 åº”ç”¨åœºæ™¯">13.3 åº”ç”¨åœºæ™¯ <a href="#t12913.3 åº”ç”¨åœºæ™¯"> # </a></h3>
<h4 id="t13013.3.1 animate">13.3.1 animate <a href="#t13013.3.1 animate"> # </a></h4>
<ul>
<li>animate() æ–¹æ³•æ‰§è¡Œ CSS å±æ€§é›†çš„è‡ªå®šä¹‰åŠ¨ç”»ã€‚</li>
<li>è¯¥æ–¹æ³•é€šè¿‡CSSæ ·å¼å°†å…ƒç´ ä»ä¸€ä¸ªçŠ¶æ€æ”¹å˜ä¸ºå¦ä¸€ä¸ªçŠ¶æ€ã€‚CSSå±æ€§å€¼æ˜¯é€æ¸æ”¹å˜çš„ï¼Œè¿™æ ·å°±å¯ä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœã€‚</li>
<li><code>$(selector).animate(styles,speed,easing,callback)</code><ul>
<li>swing åŠ¨ç”»çš„å¼€å§‹å˜å¾—æ›´åŠ å¿«ä¸€äº›ï¼Œç„¶åå†æ…¢ä¸‹æ¥</li>
<li>linear æ–¹æ³•æä¾›äº†ä¸€ä¸ªç¨³å®šçš„åŠ¨ç”»ï¼Œä»¥ä½¿å¾—åŠ¨ç”»çš„æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯ç›¸åŒçš„</li>
</ul>
</li>
</ul>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
      <span class="hljs-selector-id">#content</span>{
          <span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;
          <span class="hljs-attribute">height</span>:<span class="hljs-number">100px</span>;
          <span class="hljs-attribute">background-color</span>:green;
      }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"bigger"</span>&gt;</span>å˜å¤§<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://libs.baidu.com/jquery/2.0.0/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
$(<span class="hljs-string">'#bigger'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    $(<span class="hljs-string">'#content'</span>).animate({<span class="hljs-attr">width</span>:<span class="hljs-string">'200px'</span>,<span class="hljs-attr">height</span>:<span class="hljs-string">'200px'</span>},<span class="hljs-number">1000</span>,<span class="hljs-string">'linear'</span>);
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 id="t13113.3.2 è¡¨å•æ ¡éªŒ">13.3.2 è¡¨å•æ ¡éªŒ <a href="#t13113.3.2 è¡¨å•æ ¡éªŒ"> # </a></h4>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span>  <span class="hljs-attr">id</span>=<span class="hljs-string">"userform"</span>&gt;</span>
      ç”¨æˆ·å <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>/&gt;</span>
      å¯†ç  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>/&gt;</span>
      æ‰‹æœºå· <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mobile"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">let</span> Validator = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> rules = {
        notEmpty(val,msg){
            <span class="hljs-keyword">if</span>(val == <span class="hljs-string">''</span>){
                <span class="hljs-keyword">return</span> msg;
            }
        },
        minLength(val,length,msg){
            <span class="hljs-keyword">if</span>(val==<span class="hljs-string">''</span>||val.length &lt;length){
                <span class="hljs-keyword">return</span> msg;
            }
        },
        maxLength(val,length,msg){
            <span class="hljs-keyword">if</span>(val==<span class="hljs-string">''</span>||val.length &gt; length){
                <span class="hljs-keyword">return</span> msg;
            }
        },
        isMobile(val,msg){
            <span class="hljs-keyword">if</span>(!<span class="hljs-regexp">/^1\d{10}/</span>.test(val)){
                <span class="hljs-keyword">return</span> msg;
            }
        }
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRule</span>(<span class="hljs-params">name,rule</span>)</span>{
        rules[name] = rule;
    }
    <span class="hljs-keyword">let</span> checks = [];
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">element,rule</span>)</span>{
        checks.push(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
            <span class="hljs-keyword">let</span> name = rule.shift();
            rule.unshift(element.value);
            <span class="hljs-keyword">return</span> rules[name]&amp;&amp;rules[name].apply(element,rule);
        });
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;checks.length;i++){
            <span class="hljs-keyword">let</span> check = checks[i];
            <span class="hljs-keyword">let</span> msg = check();
            <span class="hljs-keyword">if</span>(msg){
                <span class="hljs-keyword">return</span> msg;
            }
        }
    }
    <span class="hljs-keyword">return</span> {
        add,
        start,
        addRule
    }
})();

<span class="hljs-keyword">let</span> form = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'userform'</span>);
form.onsubmit = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    Validator.add(form.username,[<span class="hljs-string">'notEmpty'</span>,<span class="hljs-string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span>]);
    Validator.add(form.password,[<span class="hljs-string">'minLength'</span>,<span class="hljs-number">6</span>,<span class="hljs-string">'å¯†ç å°äº6ä½æœ€å°‘é•¿åº¦'</span>]);
    Validator.add(form.password,[<span class="hljs-string">'maxLength'</span>,<span class="hljs-number">8</span>,<span class="hljs-string">'å¯†ç å¤§äº8ä½æœ€å¤§é•¿åº¦'</span>]);
    Validator.add(form.mobile,[<span class="hljs-string">'isMobile'</span>,<span class="hljs-string">'æ‰‹æœºå·ä¸åˆæ³•'</span>]);
    <span class="hljs-keyword">let</span> msg =   Validator.start();
    <span class="hljs-keyword">if</span>(msg) {
        alert(msg);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    alert(<span class="hljs-string">'æ ¡éªŒé€šè¿‡'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<ul>
<li>ç­–ç•¥æ¨¡å¼å’ŒçŠ¶æ€æ¨¡å¼éƒ½æœ‰ä¸Šä¸‹æ–‡ï¼Œæœ‰ç­–ç•¥æˆ–è€…çŠ¶æ€ç±»ï¼Œä¸Šä¸‹æ–‡æŠŠè¿™äº›è¯·æ±‚å§”æ‰˜ç»™è¿™äº›ç±»æ¥æ‰§è¡Œ</li>
<li>ç­–ç•¥æ¨¡å¼ä¸­å„ä¸ªç±»æ˜¯å¹³ç­‰çš„ï¼Œæ²¡æœ‰å…³ç³»ï¼Œå®¢æˆ·ç«¯éœ€è¦çŸ¥é“ç®—æ³•ä¸»åŠ¨åˆ‡æ¢ï¼ŒçŠ¶æ€æ¨¡å¼ä¸­ï¼ŒçŠ¶æ€çš„åˆ‡æ¢å’Œè¡Œä¸ºè¢«å°è£…å¥½äº†ï¼Œå®¢æˆ·ä¸éœ€è¦äº†è§£ç»†èŠ‚ã€‚</li>
</ul>
<h2 id="t13214. åŸå‹æ¨¡å¼">14. åŸå‹æ¨¡å¼ <a href="#t13214. åŸå‹æ¨¡å¼"> # </a></h2>
<ul>
<li>åŸå‹æ¨¡å¼æ˜¯ä¸€ä¸ªåˆ›å»ºå‹çš„æ¨¡å¼</li>
<li>åˆ›å»ºåŸºç±»çš„æ—¶å€™ï¼Œç®€å•å·®å¼‚åŒ–çš„å±æ€§æ”¾åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ¶ˆè€—èµ„æºç›¸åŒçš„åŠŸèƒ½æ”¾åœ¨åŸºç±»åŸå‹ä¸­</li>
</ul>
<h3 id="t13314.1 ç±»å›¾">14.1 ç±»å›¾ <a href="#t13314.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_40ff81b7_1720749.jpeg" alt="myprototype"></p>
<h3 id="t13414.2 ä»£ç ">14.2 ä»£ç  <a href="#t13414.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
    <span class="hljs-keyword">this</span>.getName=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
    }
}
<span class="hljs-keyword">let</span> p1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">'å¼ ä¸‰'</span>);
<span class="hljs-keyword">let</span> p2=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">'æå››'</span>);
<span class="hljs-built_in">console</span>.log(p1.getName===p2.getName);
</code></pre>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
}
Person.prototype.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name);
}
<span class="hljs-keyword">let</span> p1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">'å¼ ä¸‰'</span>);
<span class="hljs-keyword">let</span> p2=<span class="hljs-keyword">new</span> Person(<span class="hljs-string">'æå››'</span>);
<span class="hljs-built_in">console</span>.log(p1.getName===p2.getName);
</code></pre>
<h3 id="t13514.3 JavaScriptä¸­çš„åŸå‹">14.3 JavaScriptä¸­çš„åŸå‹ <a href="#t13514.3 JavaScriptä¸­çš„åŸå‹"> # </a></h3>
<h4 id="t13614.3.1 å‡½æ•°å’Œå¯¹è±¡">14.3.1 å‡½æ•°å’Œå¯¹è±¡ <a href="#t13614.3.1 å‡½æ•°å’Œå¯¹è±¡"> # </a></h4>
<ul>
<li>å‡½æ•°æ˜¯ä¸€ç§å¯¹è±¡</li>
<li>å¯¹è±¡éƒ½æ˜¯é€šè¿‡å‡½æ•°åˆ›å»ºçš„</li>
</ul>
<pre><code class="lang-js"><span class="hljs-comment">//å‡½æ•°æ˜¯ä¸€ç§å¯¹è±¡</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params"></span>) </span>{}
<span class="hljs-built_in">console</span>.log(Person <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>);

<span class="hljs-comment">//å¯¹è±¡éƒ½æ˜¯é€šè¿‡å‡½æ•°åˆ›å»ºçš„</span>
<span class="hljs-keyword">let</span> p1=<span class="hljs-keyword">new</span> Person();
<span class="hljs-keyword">let</span> obj1={<span class="hljs-attr">name</span>: <span class="hljs-string">'zfpx'</span>}
<span class="hljs-keyword">let</span> obj=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
obj2.name=<span class="hljs-string">'zfpx'</span>;
</code></pre>
<h4 id="t13714.3.2 prototype">14.3.2 prototype <a href="#t13714.3.2 prototype"> # </a></h4>
<ul>
<li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå±æ€§å«åš<code>prototype</code></li>
<li><code>prototype</code>çš„å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡,é»˜è®¤çš„åªæœ‰ä¸€ä¸ªå«åš<code>constructor</code>çš„å±æ€§ï¼ŒæŒ‡å‘è¿™ä¸ªå‡½æ•°æœ¬èº«</li>
<li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªéšè—çš„å±æ€§<code>__proto__</code>,è¿™ä¸ªå±æ€§å¼•ç”¨äº†åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„å‡½æ•°çš„<code>prototype</code></li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_82db32b7_1720749.png" alt="__proto__"></p>
<ul>
<li>è‡ªå®šä¹‰å‡½æ•°çš„prototypeæ˜¯ç”±Objectåˆ›å»ºï¼Œæ‰€ä»¥å®ƒçš„<strong>proto</strong>æŒ‡å‘çš„å°±æ˜¯Object.prototype</li>
<li>Object.prototypeçš„<strong>proto</strong>æŒ‡å‘çš„æ˜¯null</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192758_c8e0b1cf_1720749.png" alt="object.prototype"></p>
<ul>
<li>è‡ªå®šä¹‰å‡½æ•°<code>Foo.__proto__</code>æŒ‡å‘Function.prototype</li>
<li><code>Object.__proto__</code>æŒ‡å‘Function.prototype</li>
<li><code>Function.__proto__</code>æŒ‡å‘Function.prototype<pre><code class="lang-js"><span class="hljs-keyword">let</span> sum = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'return a+b'</span>);
</code></pre>
</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_01cd602d_1720749.png" alt="function.prototype"></p>
<ul>
<li>Function.prototypeçš„<strong>proto</strong>ä¹ŸæŒ‡å‘Object.prototype</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_a5a04401_1720749.png" alt="function.prototype.__proto__"></p>
<h4 id="t13814.3.3 instanceof">14.3.3 instanceof <a href="#t13814.3.3 instanceof"> # </a></h4>
<ul>
<li>Instanceofè¿ç®—ç¬¦çš„ç¬¬ä¸€ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæš‚æ—¶ç§°ä¸ºAï¼›ç¬¬äºŒä¸ªå˜é‡ä¸€èˆ¬æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæš‚æ—¶ç§°ä¸ºB</li>
<li>Instanceofçš„åˆ¤æ–­è§„åˆ™æ˜¯ï¼šæ²¿ç€Açš„<code>__proto__</code>è¿™æ¡çº¿æ¥æ‰¾ï¼ŒåŒæ—¶æ²¿ç€Bçš„<code>prototype</code>è¿™æ¡çº¿æ¥æ‰¾ï¼Œå¦‚æœä¸¤æ¡çº¿èƒ½æ‰¾åˆ°åŒä¸€ä¸ªå¼•ç”¨ï¼Œå³åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è¿”å›<code>true</code>ã€‚å¦‚æœæ‰¾åˆ°ç»ˆç‚¹è¿˜æœªé‡åˆï¼Œåˆ™è¿”å›<code>false</code>ã€‚<pre><code class="lang-js"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span>);
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Function</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>);
<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Function</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span>);
</code></pre>
</li>
</ul>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_a727097d_1720749.png" alt="fullprototype"></p>
<h4 id="t13914.3.4 åŸå‹é“¾">14.3.4 åŸå‹é“¾ <a href="#t13914.3.4 åŸå‹é“¾"> # </a></h4>
<ul>
<li>è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå…ˆåœ¨åŸºæœ¬å±æ€§ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†æ²¿ç€<strong>proto</strong>è¿™æ¡é“¾å‘ä¸Šæ‰¾ï¼Œè¿™å°±æ˜¯åŸå‹é“¾</li>
<li><code>hasOwnProperty</code>å¯ä»¥åŒºåˆ†ä¸€ä¸ªå±æ€§åˆ°åº•æ˜¯è‡ªå·±çš„è¿˜æ˜¯ä»åŸå‹ä¸­æ‰¾åˆ°</li>
</ul>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">this</span>.a = <span class="hljs-number">10</span>;
}
Foo.prototype.b = <span class="hljs-number">20</span>;

<span class="hljs-keyword">let</span> f1  = <span class="hljs-keyword">new</span> Foo();
<span class="hljs-built_in">console</span>.log(f1.a);
<span class="hljs-built_in">console</span>.log(f1.b);
</code></pre>
<h4 id="t14014.3.5 åŸå‹ä¼˜åŠ¿">14.3.5 åŸå‹ä¼˜åŠ¿ <a href="#t14014.3.5 åŸå‹ä¼˜åŠ¿"> # </a></h4>
<ul>
<li>å¯ä»¥éšæ„æ‰©å±•</li>
<li>å¯ä»¥é‡å†™ç»§æ‰¿çš„æ–¹æ³•</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> obj = {};
<span class="hljs-built_in">console</span>.log(obj.toString());
<span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];
<span class="hljs-built_in">console</span>.log(arr.toString());
</code></pre>
<h3 id="t14114.4 åœºæ™¯">14.4 åœºæ™¯ <a href="#t14114.4 åœºæ™¯"> # </a></h3>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        * {
            <span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;
        }
        <span class="hljs-selector-tag">canvas</span>{
            <span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"1000"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">//éšæœºé¢œè‰²ï¼Œåå…­è¿›åˆ¶æ–¹æ³•ï¼›</span>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRandomColor</span>(<span class="hljs-params"> </span>) </span>{
          <span class="hljs-keyword">var</span> rand = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random( ) * <span class="hljs-number">0xFFFFFF</span>).toString(<span class="hljs-number">16</span>);
          <span class="hljs-keyword">if</span>(rand.length == <span class="hljs-number">6</span>){        
            <span class="hljs-keyword">return</span> <span class="hljs-string">'#'</span>+rand;
          }<span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">return</span> getRandomColor();
          }
        }
        <span class="hljs-keyword">let</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'canvas'</span>);
        <span class="hljs-keyword">let</span> ctx = canvas.getContext(<span class="hljs-string">'2d'</span>);
        <span class="hljs-keyword">let</span> circles = [];
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Circle</span>(<span class="hljs-params">x,y,radius</span>)</span>{
                <span class="hljs-keyword">this</span>.x=x;
                <span class="hljs-keyword">this</span>.y=y;
                <span class="hljs-keyword">this</span>.radius= radius;
                circles.push(<span class="hljs-keyword">this</span>);
        }
        Circle.prototype.update = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">this</span>.radius--;
                <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.radius&gt;<span class="hljs-number">0</span>){
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
        }
        Circle.prototype.render = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
            ctx.beginPath();
            ctx.arc(<span class="hljs-keyword">this</span>.x,<span class="hljs-keyword">this</span>.y,<span class="hljs-keyword">this</span>.radius,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI);
            ctx.fillStyle = getRandomColor();
            ctx.fill();
        }

        <span class="hljs-keyword">let</span> circle = <span class="hljs-keyword">new</span> Circle(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">30</span>);
        canvas.onmousemove = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
            circles.push(<span class="hljs-keyword">new</span> Circle(event.clientX,event.clientY,<span class="hljs-number">30</span>));
        }
        setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
            ctx.clearRect(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1000</span>,<span class="hljs-number">600</span>);
            circles.forEach(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>{
                item.update()&amp;&amp;item.render(); 
            });
            circles = circles.filter(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.radius&gt;<span class="hljs-number">0</span>);
        },<span class="hljs-number">20</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 id="t14215. æ¡¥æ¥æ¨¡å¼">15. æ¡¥æ¥æ¨¡å¼ <a href="#t14215. æ¡¥æ¥æ¨¡å¼"> # </a></h2>
<ul>
<li>å°†æŠ½è±¡éƒ¨åˆ†ä¸ä»–çš„å®ç°éƒ¨åˆ†åˆ†ç¦»,è¿™æ ·æŠ½è±¡åŒ–ä¸å®ç°åŒ–è§£è€¦,ä½¿ä»–ä»¬å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–</li>
<li>åº”ç”¨åœºæ™¯æ˜¯å®ç°ç³»ç»Ÿå¯èƒ½æœ‰å¤šä¸ªè§’åº¦åˆ†ç±»,æ¯ä¸€ç§è§’åº¦éƒ½å¯èƒ½å˜åŒ–.</li>
<li>æ¡¥æ–¹å¯ä»¥é€šè¿‡å®ç°æ¡¥æ¥å£è¿›è¡Œå•æ–¹é¢æ‰©å±•ï¼Œè€Œå¦ä¸€æ–¹å¯ä»¥ç»§æ‰¿æŠ½è±¡ç±»è€Œå•æ–¹é¢æ‰©å±•ï¼Œè€Œä¹‹é—´çš„è°ƒç”¨å°±ä»æ¡¥æ¥å£æ¥ä½œä¸ºçªç ´å£ï¼Œä¸ä¼šå—åˆ°åŒæ–¹æ‰©å±•çš„ä»»ä½•å½±å“</li>
</ul>
<h3 id="t14315.1 ç±»å›¾">15.1 ç±»å›¾ <a href="#t14315.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_03de8d50_1720749.jpeg" alt="bridge"></p>
<h3 id="t14415.2 ä»£ç ">15.2 ä»£ç  <a href="#t14415.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>{
    <span class="hljs-keyword">constructor</span>(bridge) {
        <span class="hljs-keyword">this</span>.bridge=bridge;
    }
    go() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`ä»<span class="hljs-subst">${<span class="hljs-keyword">this</span>.<span class="hljs-keyword">from</span>()}</span>åˆ°<span class="hljs-subst">${<span class="hljs-keyword">this</span>.bridge.to()}</span>`</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> </span>{
    <span class="hljs-keyword">from</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'A1'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> </span>{
    <span class="hljs-keyword">from</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'A2'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> </span>{
    <span class="hljs-keyword">from</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'A3'</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> </span>{
    to() {}
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">B</span> </span>{
    to() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'B1'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">B</span> </span>{
    to() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'B2'</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">B</span> </span>{
    to() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'B3'</span>;
    }
}
<span class="hljs-keyword">let</span> b=<span class="hljs-keyword">new</span> B3();
<span class="hljs-keyword">let</span> a=<span class="hljs-keyword">new</span> A2(b);
a.go();
</code></pre>
<h3 id="t14515.3 åº”ç”¨åœºæ™¯">15.3 åº”ç”¨åœºæ™¯ <a href="#t14515.3 åº”ç”¨åœºæ™¯"> # </a></h3>
<h4 id="t14615.3.1 äº‹ä»¶ç›‘å¬">15.3.1 äº‹ä»¶ç›‘å¬ <a href="#t14615.3.1 äº‹ä»¶ç›‘å¬"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> express=<span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">let</span> path=<span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">let</span> app=express();
app.get(<span class="hljs-string">'/'</span>,(req,res) =&gt; {
    res.sendFile(path.join(__dirname,<span class="hljs-string">'4.html'</span>));
});
app.get(<span class="hljs-string">'/user/:id'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req,res</span>) </span>{
    <span class="hljs-keyword">let</span> id = req.params.id;
    res.json({id,<span class="hljs-attr">name</span>:<span class="hljs-string">`<span class="hljs-subst">${id}</span>_name`</span>});
});
app.listen(<span class="hljs-number">8888</span>);
</code></pre>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>bridage<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"1"</span> &gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"2"</span> &gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">let</span> lis = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'li'</span>);
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;lis.length;i++){
      lis[i].addEventListener(<span class="hljs-string">'click'</span>,getUserById);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserById</span>(<span class="hljs-params">event</span>)</span>{
      <span class="hljs-keyword">let</span> id = <span class="hljs-keyword">this</span>.dataset.id;
      <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest;
      xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>,<span class="hljs-literal">true</span>);
      xhr.responseType = <span class="hljs-string">'json'</span>;
      xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">if</span>(xhr.readyState ===<span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>){
            <span class="hljs-keyword">let</span> user = xhr.response;
            <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'content'</span>).innerHTML = user.name;
          }
      }
      xhr.send();
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserById</span>(<span class="hljs-params">id,callback</span>)</span>{
      <span class="hljs-keyword">let</span> id = <span class="hljs-keyword">this</span>.dataset.id;
      <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest;
      xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>,<span class="hljs-literal">true</span>);
      xhr.responseType = <span class="hljs-string">'json'</span>;
      xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">if</span>(xhr.readyState ===<span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>){
            <span class="hljs-keyword">let</span> user = xhr.response;
            <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'content'</span>).innerHTML = user.name;
          }
      }
      xhr.send();
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>    
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"1"</span> &gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">data-id</span>=<span class="hljs-string">"2"</span> &gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">let</span> lis = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'li'</span>);
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;lis.length;i++){
      lis[i].addEventListener(<span class="hljs-string">'click'</span>,addBridage);
  }
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserById</span>(<span class="hljs-params">event</span>)</span>{
      <span class="hljs-keyword">let</span> id = <span class="hljs-keyword">this</span>.dataset.id;
      <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest;
      xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>,<span class="hljs-literal">true</span>);
      xhr.responseType = <span class="hljs-string">'json'</span>;
      xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">if</span>(xhr.readyState ===<span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>){
            <span class="hljs-keyword">let</span> user = xhr.response;
             <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'content'</span>).innerHTML = user.name;
          }
      }
      xhr.send();
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addBridage</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-keyword">let</span> id = <span class="hljs-keyword">this</span>.dataset.id;
      getUserById(id,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">user</span>)</span>{
         <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'content'</span>).innerHTML = user.name;
      });
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserById</span>(<span class="hljs-params">id,callback</span>)</span>{
      <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest;
      xhr.open(<span class="hljs-string">'GET'</span>,<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>,<span class="hljs-literal">true</span>);
      xhr.responseType = <span class="hljs-string">'json'</span>;
      xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">if</span>(xhr.readyState ===<span class="hljs-number">4</span> &amp;&amp; xhr.status == <span class="hljs-number">200</span>){
            <span class="hljs-keyword">let</span> user = xhr.response;
            callback(user);
          }
      }
      xhr.send();
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>    
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 id="t14715.3.2 åˆ†ç¦»å˜åŒ–">15.3.2 åˆ†ç¦»å˜åŒ– <a href="#t14715.3.2 åˆ†ç¦»å˜åŒ–"> # </a></h4>
<ul>
<li>åˆ†ç¦»å¤šç»´å˜åŒ–</li>
</ul>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>html<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        * {
            <span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;
        }
        <span class="hljs-selector-tag">canvas</span>{
            <span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"600"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">//å½¢çŠ¶ é¢œè‰² åæ ‡</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Position</span>(<span class="hljs-params">x,y</span>) </span>{
  <span class="hljs-keyword">this</span>.x=x;
  <span class="hljs-keyword">this</span>.y=y;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Color</span>(<span class="hljs-params">color</span>) </span>{
    <span class="hljs-keyword">this</span>.color=color;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ball</span>(<span class="hljs-params">x,y,color</span>) </span>{
    <span class="hljs-keyword">this</span>.position=<span class="hljs-keyword">new</span> Position(x,y);
    <span class="hljs-keyword">this</span>.color=<span class="hljs-keyword">new</span> Color(color);
}
Ball.prototype.draw=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'canvas'</span>);
  <span class="hljs-keyword">let</span> ctx = canvas.getContext(<span class="hljs-string">'2d'</span>);
  ctx.beginPath();
  ctx.arc(<span class="hljs-keyword">this</span>.position.x,<span class="hljs-keyword">this</span>.position.y,<span class="hljs-number">100</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI);
  ctx.fillStyle = <span class="hljs-keyword">this</span>.color.color;
  ctx.fill();
}
<span class="hljs-keyword">new</span> Ball(<span class="hljs-number">300</span>,<span class="hljs-number">300</span>,<span class="hljs-string">'red'</span>).draw();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>    
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 id="t14816. ç»„åˆæ¨¡å¼">16. ç»„åˆæ¨¡å¼ <a href="#t14816. ç»„åˆæ¨¡å¼"> # </a></h2>
<ul>
<li>åˆç§°æ•´ä½“-éƒ¨åˆ†æ¨¡å¼</li>
<li>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºéƒ¨åˆ†-æ•´ä½“çš„å±‚æ¬¡ç»“æ„</li>
<li>å®¢æˆ·å¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼å¯¹å¾…ç»„åˆå¯¹è±¡å’Œå¶å­å¯¹è±¡</li>
</ul>
<h3 id="t14916.1 ç±»å›¾">16.1 ç±»å›¾ <a href="#t14916.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_5fb1222e_1720749.jpeg" alt="compose"></p>
<h3 id="t15016.2 ä»£ç ">16.2 ä»£ç  <a href="#t15016.2 ä»£ç "> # </a></h3>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.red</span>{
        <span class="hljs-attribute">color</span>:red;
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ReactElement</span>(<span class="hljs-params">type,props</span>) </span>{
    <span class="hljs-keyword">this</span>.type = type;
    <span class="hljs-keyword">this</span>.props = props;
}
<span class="hljs-keyword">let</span> React = {
    createElement(type,props={},...childrens){
        childrens.length===<span class="hljs-number">1</span>?childrens = childrens[<span class="hljs-number">0</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ReactElement(type,{...props,<span class="hljs-attr">children</span>:childrens})
    }
};
<span class="hljs-keyword">let</span> render = <span class="hljs-function">(<span class="hljs-params">eleObj,container</span>)=&gt;</span>{
    <span class="hljs-comment">// å…ˆå–å‡ºç¬¬ä¸€å±‚ è¿›è¡Œåˆ›å»ºçœŸå®dom</span>
    <span class="hljs-keyword">let</span> {type,props} = eleObj;
    <span class="hljs-keyword">let</span> elementNode = <span class="hljs-built_in">document</span>.createElement(type); <span class="hljs-comment">// åˆ›å»ºç¬¬ä¸€ä¸ªå…ƒç´ </span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> attr <span class="hljs-keyword">in</span> props){ <span class="hljs-comment">// å¾ªç¯æ‰€æœ‰å±æ€§</span>
        <span class="hljs-keyword">if</span>(attr === <span class="hljs-string">'children'</span>){ <span class="hljs-comment">// å¦‚æœæ˜¯childrenè¡¨ç¤ºæœ‰åµŒå¥—å…³ç³»</span>
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> props[attr] == <span class="hljs-string">'object'</span>){ <span class="hljs-comment">// çœ‹æ˜¯å¦æ˜¯åªæœ‰ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹</span>
                props[attr].forEach(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>{ <span class="hljs-comment">// å¤šä¸ªçš„è¯å¾ªç¯åˆ¤æ–­ å¦‚æœæ˜¯å¯¹è±¡å†æ¬¡è°ƒç”¨renderæ–¹æ³•</span>
                    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> item === <span class="hljs-string">'object'</span>){
                        render(item,elementNode)
                    }<span class="hljs-keyword">else</span>{ <span class="hljs-comment">//æ˜¯æ–‡æœ¬èŠ‚ç‚¹ ç›´æ¥åˆ›å»ºå³å¯</span>
                        elementNode.appendChild(<span class="hljs-built_in">document</span>.createTextNode(item));
                    }
                })
            }<span class="hljs-keyword">else</span>{ <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ç›´æ¥åˆ›å»ºå³å¯</span>
                elementNode.appendChild(<span class="hljs-built_in">document</span>.createTextNode(props[attr]));
            }
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(attr === <span class="hljs-string">'className'</span>){ <span class="hljs-comment">// æ˜¯ä¸æ˜¯classå±æ€§ class å±æ€§ç‰¹æ®Šå¤„ç†</span>
            elementNode.setAttribute(<span class="hljs-string">'class'</span>,props[attr]);
        }<span class="hljs-keyword">else</span>{
            elementNode.setAttribute(attr,props[attr]);
        }
    }
    container.appendChild(elementNode)
};
<span class="hljs-comment">//ReactDOM.render(&lt;div&gt;hello&lt;span&gt;world&lt;/span&gt;&lt;/div&gt;);</span>
<span class="hljs-comment">//ReactDOM.render(React.createElement("div",null,"hello,",React.createElement("span",null,"world")));</span>
render(React.createElement(<span class="hljs-string">"div"</span>,<span class="hljs-literal">null</span>,<span class="hljs-string">"hello,"</span>,React.createElement(<span class="hljs-string">"span"</span>,{<span class="hljs-attr">class</span>:<span class="hljs-string">"red"</span>},<span class="hljs-string">"world"</span>)),<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>));

</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 id="t15116.3 åº”ç”¨åœºæ™¯">16.3 åº”ç”¨åœºæ™¯ <a href="#t15116.3 åº”ç”¨åœºæ™¯"> # </a></h3>
<h4 id="t15216.3.1 æ–‡ä»¶å¤¹å’Œæ–‡ä»¶">16.3.1 æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ <a href="#t15216.3.1 æ–‡ä»¶å¤¹å’Œæ–‡ä»¶"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Folder</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
    <span class="hljs-keyword">this</span>.children=[];
    <span class="hljs-keyword">this</span>.parent=<span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.level=<span class="hljs-number">0</span>;
}
Folder.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">child</span>) </span>{
    child.level=<span class="hljs-keyword">this</span>.level+<span class="hljs-number">1</span>;
    child.parent=<span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.children.push(child);
}
Folder.prototype.show=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">' '</span>.repeat(<span class="hljs-keyword">this</span>.level)+<span class="hljs-string">'æ–‡ä»¶å¤¹'</span>+<span class="hljs-keyword">this</span>.name);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>.children.length;i++){
        <span class="hljs-keyword">this</span>.children[i].show();
    }
}
Folder.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.parent) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>.parent.children.length;i++){
        <span class="hljs-keyword">let</span> current=<span class="hljs-keyword">this</span>.parent.children[i];
        <span class="hljs-keyword">if</span> (current === <span class="hljs-keyword">this</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parent.children.splice(i,<span class="hljs-number">1</span>);
        }
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">File</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
}
File.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`æ–‡ä»¶ä¸‹é¢ä¸èƒ½å†æ·»åŠ æ–‡ä»¶`</span>);
}
File.prototype.show=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">' '</span>.repeat(<span class="hljs-keyword">this</span>.level)+<span class="hljs-string">'æ–‡ä»¶'</span>+<span class="hljs-keyword">this</span>.name);
}

<span class="hljs-keyword">let</span> folder=<span class="hljs-keyword">new</span> Folder(<span class="hljs-string">'è§†é¢‘'</span>);
<span class="hljs-keyword">let</span> vueFolder=<span class="hljs-keyword">new</span> Folder(<span class="hljs-string">'Vueè§†é¢‘'</span>);
<span class="hljs-keyword">let</span> reactFolder=<span class="hljs-keyword">new</span> Folder(<span class="hljs-string">'Reactè§†é¢‘'</span>);
<span class="hljs-keyword">let</span> vueFile=<span class="hljs-keyword">new</span> File(<span class="hljs-string">'Vueä»å…¥é—¨åˆ°ç²¾é€š'</span>);
<span class="hljs-keyword">let</span> reactFile=<span class="hljs-keyword">new</span> File(<span class="hljs-string">'Reactä»å…¥é—¨åˆ°ç²¾é€š'</span>);
folder.add(vueFolder);
folder.add(reactFolder);
vueFolder.add(vueFile);
reactFolder.add(reactFile);

folder.show();
vueFolder.remove();
folder.show();
</code></pre>
<h4 id="t15316.3.2 ç»˜åˆ¶è¡¨å•">16.3.2 ç»˜åˆ¶è¡¨å• <a href="#t15316.3.2 ç»˜åˆ¶è¡¨å•"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormContainer</span> </span>{
    <span class="hljs-keyword">constructor</span>(type) {
        <span class="hljs-keyword">this</span>.element = <span class="hljs-built_in">document</span>.createElement(type);
        <span class="hljs-keyword">this</span>.children = [];
    }
    add(child) {
        <span class="hljs-keyword">this</span>.children.push(child);
        <span class="hljs-keyword">this</span>.element.appendChild(child.element);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FieldContainer</span> </span>{
    <span class="hljs-keyword">constructor</span>(type) {
        <span class="hljs-keyword">this</span>.element = <span class="hljs-built_in">document</span>.createElement(type);
        <span class="hljs-keyword">this</span>.children = [];
    }
    add(child) {
        <span class="hljs-keyword">this</span>.children.push(child);
        <span class="hljs-keyword">this</span>.element.appendChild(child.element);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LabelItem</span> </span>{
    <span class="hljs-keyword">constructor</span>(title) {
        <span class="hljs-keyword">this</span>.element = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'label'</span>);
        <span class="hljs-keyword">this</span>.element.innerHTML = title;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InputItem</span> </span>{
    <span class="hljs-keyword">constructor</span>(title) {
        <span class="hljs-keyword">this</span>.element = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'input'</span>);
        <span class="hljs-keyword">this</span>.element.name = title;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TipItem</span> </span>{
    <span class="hljs-keyword">constructor</span>(title) {
        <span class="hljs-keyword">this</span>.element = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'span'</span>);
        <span class="hljs-keyword">this</span>.element.innerHTML = title;
    }
}
<span class="hljs-keyword">let</span> userform = <span class="hljs-keyword">new</span> FormContainer(<span class="hljs-string">'form'</span>).add(
    <span class="hljs-keyword">new</span> FieldContainer(<span class="hljs-string">'p'</span>).add(
        <span class="hljs-keyword">new</span> LabelItem(<span class="hljs-string">'ç”¨æˆ·å'</span>)
    ).add(
        <span class="hljs-keyword">new</span> InputItem(<span class="hljs-string">'username'</span>)
    ).add(
        <span class="hljs-keyword">new</span> TipItem(<span class="hljs-string">'ç”¨æˆ·åé•¿åº¦ä¸º6-8ä½'</span>)
    )
).add(<span class="hljs-keyword">new</span> FieldContainer(<span class="hljs-string">'p'</span>).add(
    <span class="hljs-keyword">new</span> LabelItem(<span class="hljs-string">'å¯†ç '</span>)
).add(
    <span class="hljs-keyword">new</span> InputItem(<span class="hljs-string">'password'</span>)
).add(
    <span class="hljs-keyword">new</span> TipItem(<span class="hljs-string">'ç¡®è®¤å¯†ç '</span>)
));
<span class="hljs-built_in">document</span>.body.appendChild(userform.element);
</code></pre>
<h2 id="t15417. å‘½ä»¤æ¨¡å¼">17. å‘½ä»¤æ¨¡å¼ <a href="#t15417. å‘½ä»¤æ¨¡å¼"> # </a></h2>
<ul>
<li>æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œå‘å¸ƒè€…å’Œæ‰§è¡Œè€…åˆ†å¼€</li>
<li>ä¸­é—´åŠ å…¥å‘½ä»¤å¯¹è±¡ï¼Œä½œä¸ºä¸­è½¬ç«™</li>
</ul>
<p>ä¸‰ç§è§’è‰²</p>
<ul>
<li><code>Receiver</code>æ¥å—è€…è§’è‰²ï¼šè¯¥è§’è‰²å°±æ˜¯å¹²æ´»çš„è§’è‰²ï¼Œå‘½ä»¤ä¼ é€’åˆ°è¿™é‡Œæ˜¯åº”è¯¥è¢«æ‰§è¡Œçš„</li>
<li><code>Command</code>å‘½ä»¤è§’è‰²ï¼šéœ€è¦æ‰§è¡Œçš„æ‰€æœ‰å‘½ä»¤éƒ½åœ¨è¿™é‡Œå£°æ˜</li>
<li><code>Invoker</code>è°ƒç”¨è€…è§’è‰²ï¼šæ¥æ”¶åˆ°å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œå‘½ä»¤</li>
</ul>
<h3 id="t15517.1 ç±»å›¾">17.1 ç±»å›¾ <a href="#t15517.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_3f5aa289_1720749.jpeg" alt="command"></p>
<h3 id="t15617.2 ä»£ç ">17.2 ä»£ç  <a href="#t15617.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cooker</span></span>{
    cook() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`åšé¥­`</span>);    
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cleaner</span></span>{
    clean() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`æ¸…æ´`</span>);    
    }
}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CookCommand</span></span>{
    <span class="hljs-keyword">constructor</span>(cooker) {
        <span class="hljs-keyword">this</span>.cooker=cooker;
    }
    execute() {
        <span class="hljs-keyword">this</span>.cooker.cook();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CleanCommand</span></span>{
    <span class="hljs-keyword">constructor</span>(cleaner) {
        <span class="hljs-keyword">this</span>.cleaner=cleaner;
    }
    execute() {
        <span class="hljs-keyword">this</span>.cleaner.clean();
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span></span>{
    <span class="hljs-keyword">constructor</span>(command) {
        <span class="hljs-keyword">this</span>.command=command;
    }
    cook() {
        <span class="hljs-keyword">this</span>.command.execute();
    }
    clean() {
        <span class="hljs-keyword">this</span>.command.execute();
    }
}
<span class="hljs-keyword">let</span> cooker=<span class="hljs-keyword">new</span> Cooker();
<span class="hljs-keyword">let</span> command=<span class="hljs-keyword">new</span> CookCommand(cooker);
<span class="hljs-keyword">let</span> c=<span class="hljs-keyword">new</span> Customer(command);
c.cook();
<span class="hljs-keyword">let</span> cleaner=<span class="hljs-keyword">new</span> Cleaner();
c.command = <span class="hljs-keyword">new</span> CleanCommand(cleaner);
c.clean();
</code></pre>
<h3 id="t15717.3 åº”ç”¨åœºæ™¯">17.3 åº”ç”¨åœºæ™¯ <a href="#t15717.3 åº”ç”¨åœºæ™¯"> # </a></h3>
<h4 id="t15817.3.1 è®¡æ•°å™¨">17.3.1 è®¡æ•°å™¨ <a href="#t15817.3.1 è®¡æ•°å™¨"> # </a></h4>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è®¡æ•°å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"number"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"addBtn"</span>&gt;</span>ç‚¹å‡»æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 <span class="hljs-keyword">let</span> addBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'addBtn'</span>);
 <span class="hljs-keyword">let</span> number = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'number'</span>);

 <span class="hljs-keyword">let</span> worker = {
  add(){
   number.innerHTML = <span class="hljs-built_in">parseInt</span>(number.innerHTML)+<span class="hljs-number">1</span>;
  }
 }

 <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddCommand</span></span>{
     <span class="hljs-keyword">constructor</span>(receiver){
         <span class="hljs-keyword">this</span>.receiver = receiver;
     }
     execute(){
         <span class="hljs-keyword">this</span>.receiver.add();
     }
 }

<span class="hljs-keyword">let</span> addCommand = <span class="hljs-keyword">new</span> AddCommand(worker);
addBtn.onclick = <span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>addCommand.execute();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>    
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 id="t15917.3.2 æ’¤é”€å’Œé‡åš">17.3.2 æ’¤é”€å’Œé‡åš <a href="#t15917.3.2 æ’¤é”€å’Œé‡åš"> # </a></h4>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;title&gt;å¼¹å‡ºèœå•&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p id="number"&gt;0&lt;/p&gt;
    &lt;button id="addBtn"&gt;+&lt;/button&gt;
    &lt;button id="undoBtn"&gt;undo&lt;/button&gt;
&lt;script&gt;
 let addBtn = document.getElementById('addBtn');
 let undoBtn = document.getElementById('undoBtn');
 let number = document.getElementById('number');

 let worker = {
  lastVal:-1,
  add(){
   let oldVal = parseInt(number.innerHTML);     
   worker.lastVal = oldVal; 
   number.innerHTML = oldVal+1;
  },
  undo(){
      number.innerHTML = worker.lastVal;
  }
 }

 class AddCommand{
     constructor(receiver){
         this.receiver = receiver;
     }
     execute(){
         this.receiver.add();
     }
 }

 let addCommand = new AddCommand(worker);
 class UndoCommand{
     constructor(receiver){
         this.receiver = receiver;
     }
     execute(){
         this.receiver.undo();
     }
 }

 let undoCommand = new UndoCommand(worker);
 addBtn.onclick = ()=&gt;addCommand.execute();
 undoBtn.onclick = ()=&gt;undoCommand.execute();
&lt;/script&gt;    
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="t16017.3.3 å¤šæ­¥æ’¤é”€å’Œé‡åš">17.3.3 å¤šæ­¥æ’¤é”€å’Œé‡åš <a href="#t16017.3.3 å¤šæ­¥æ’¤é”€å’Œé‡åš"> # </a></h4>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;title&gt;å¼¹å‡ºèœå•&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p id="number"&gt;0&lt;/p&gt;
    &lt;button id="addBtn"&gt;+&lt;/button&gt;
    &lt;button id="undoBtn"&gt;undo&lt;/button&gt;
    &lt;button id="redoBtn"&gt;undo&lt;/button&gt;
&lt;script&gt;
 let addBtn = document.getElementById('addBtn');
 let undoBtn = document.getElementById('undoBtn');
 let redoBtn = document.getElementById('redoBtn');
 let number = document.getElementById('number');

 let worker = {
  history:[],
  index:-1,
  add(){
   let oldVal = parseInt(number.innerHTML);     
   let newVal = oldVal + 1;
   worker.history.push(newVal);
   worker.index = worker.history.length-1;
   number.innerHTML = newVal;
   console.log(worker);
  },
  undo(){
      if(worker.index-1&gt;=0){
          worker.index--;
        number.innerHTML = worker.history[worker.index];
        console.log(worker);
      }
  },
  redo(){
      if(worker.index+1&lt;worker.history.length){
        worker.index++;  
        number.innerHTML = worker.history[worker.index];
        console.log(worker);
      }
  }
 }

 class AddCommand{
     constructor(receiver){
         this.receiver = receiver;
     }
     execute(){
         this.receiver.add();
     }
 }

 let addCommand = new AddCommand(worker);
 class UndoCommand{
     constructor(receiver){
         this.receiver = receiver;
     }
     execute(){
         this.receiver.undo();
     }
 }

 let undoCommand = new UndoCommand(worker);
 class RedoCommand{
     constructor(receiver){
         this.receiver = receiver;
     }
     execute(){
         this.receiver.redo();
     }
 }

let redoCommand = new RedoCommand(worker);
addBtn.onclick = ()=&gt;addCommand.execute();
undoBtn.onclick = ()=&gt;undoCommand.execute();
redoBtn.onclick = ()=&gt;redoCommand.execute();
&lt;/script&gt;    
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="t16118. äº«å…ƒæ¨¡å¼">18. äº«å…ƒæ¨¡å¼ <a href="#t16118. äº«å…ƒæ¨¡å¼"> # </a></h2>
<ul>
<li>å…±äº«å†…å­˜ï¼ŒèŠ‚çº¦å†…å­˜ç©ºé—´</li>
<li>ç›¸åŒçš„æ•°æ®å…±äº«ä½¿ç”¨</li>
<li>ä¸»è¦è¿˜æ˜¯å¯¹æ•°æ®ã€æ–¹æ³•å…±äº«åˆ†ç¦»ï¼Œå°†æ•°æ®çš„æ–¹æ³•åˆ†ä¸ºå†…éƒ¨æ•°æ®ã€å†…éƒ¨æ–¹æ³•å’Œå¤–éƒ¨æ•°æ®ã€å¤–éƒ¨æ–¹æ³•ã€‚</li>
<li>å†…éƒ¨çŠ¶æ€ä¿å­˜åœ¨å¯¹è±¡å†…éƒ¨ï¼Œé€šå¸¸ä¸ä¼šæ”¹å˜ï¼Œå¯ä»¥å…±äº«</li>
<li>å¤–éƒ¨çŠ¶æ€ä¿å­˜åœ¨å¯¹è±¡å¤–éƒ¨ï¼Œå¯ä»¥éšåœºæ™¯æ”¹å˜ï¼Œä¸å¯ä»¥å…±äº«ã€‚</li>
</ul>
<h3 id="t16218.1 ç±»å›¾">18.1 ç±»å›¾ <a href="#t16218.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_f42650d7_1720749.jpeg" alt="flyweight"></p>
<h3 id="t16318.2 ä»£ç ">18.2 ä»£ç  <a href="#t16318.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name,age</span>) </span>{
    <span class="hljs-keyword">this</span>.name=name;
    <span class="hljs-keyword">this</span>.age=age;
}
Person.prototype.getAge=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.age)
}
Person.prototype.getName=<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.name)
}
</code></pre>
<h3 id="t16418.3 åœºæ™¯">18.3 åœºæ™¯ <a href="#t16418.3 åœºæ™¯"> # </a></h3>
<h4 id="t16518.3.1 å¯¹è±¡">18.3.1 å¯¹è±¡ <a href="#t16518.3.1 å¯¹è±¡"> # </a></h4>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"red"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color"</span> <span class="hljs-attr">checked</span>/&gt;</span>çº¢ 
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"yellow"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color"</span>/&gt;</span>é»„ 
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"blue"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color"</span>/&gt;</span>è“

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"draw()"</span>&gt;</span>ç»˜åˆ¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">let</span> container = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'container'</span>);
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyDiv</span></span>{
    <span class="hljs-keyword">constructor</span>(){
      <span class="hljs-keyword">this</span>.element = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
    }
    setColor(color){
        <span class="hljs-keyword">this</span>.element.style = <span class="hljs-string">`width:100px;height:100px;background-color:<span class="hljs-subst">${color}</span>`</span>; 
    }
}
<span class="hljs-keyword">let</span> div = <span class="hljs-keyword">new</span> MyDiv();
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">let</span> color = <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.getElementsByName(<span class="hljs-string">'color'</span>)).find(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>item.checked).value||<span class="hljs-string">'red'</span>;
  div.setColor(color);
  container.appendChild(div.element);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 id="t16618.3.2 åˆ†é¡µ">18.3.2 åˆ†é¡µ <a href="#t16618.3.2 åˆ†é¡µ"> # </a></h4>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"news"</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nextPage"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"goNext()"</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">let</span> list = [];
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">20</span>;i++){
    list[i]=<span class="hljs-string">`æ–°é—»<span class="hljs-subst">${i+<span class="hljs-number">1</span>}</span>`</span>
}
<span class="hljs-keyword">let</span> pageNum = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> pageSize = <span class="hljs-number">5</span>;
<span class="hljs-keyword">let</span> news = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'news'</span>);
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;list.length;i++){
    <span class="hljs-keyword">let</span> li = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'li'</span>);
    li.innerHTML = <span class="hljs-string">`æ–°é—»<span class="hljs-subst">${i+<span class="hljs-number">1</span>}</span>`</span>;
    li.style.display = <span class="hljs-string">'none'</span>;
    news.appendChild(li);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">goNext</span>(<span class="hljs-params"></span>)</span>{
  pageNum++;
  <span class="hljs-keyword">let</span> start = (pageNum <span class="hljs-number">-1</span>)*pageSize;
  <span class="hljs-keyword">let</span> lis = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'li'</span>);
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;=lis.length;i++){
     <span class="hljs-keyword">let</span> li = lis[i];
     <span class="hljs-keyword">if</span>(i&gt;=start &amp;&amp; i&lt;start+pageSize){
         li.style.display = <span class="hljs-string">'block'</span>;
     }<span class="hljs-keyword">else</span>{
         li.style.display = <span class="hljs-string">'none'</span>;
     }
  }
}
goNext();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"news"</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nextPage"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"goNext()"</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">let</span> list = [];
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">20</span>;i++){
    list[i]=<span class="hljs-string">`æ–°é—»<span class="hljs-subst">${i+<span class="hljs-number">1</span>}</span>`</span>
}
<span class="hljs-keyword">let</span> getLi = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> lis = [];
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">let</span> element;
        <span class="hljs-keyword">if</span>(lis.length&lt;<span class="hljs-number">5</span>){
            element = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'li'</span>);
            lis.push(element);
        }<span class="hljs-keyword">else</span>{
            element = lis.shift();
            lis.push(element);
        }
            <span class="hljs-keyword">return</span> element;
    }
})();

<span class="hljs-keyword">let</span> pageNum = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> pageSize = <span class="hljs-number">5</span>;
<span class="hljs-keyword">let</span> news = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'news'</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">goNext</span>(<span class="hljs-params"></span>)</span>{
  pageNum++;
  <span class="hljs-keyword">let</span> start = (pageNum <span class="hljs-number">-1</span>)*pageSize;
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">5</span>;i++){
      <span class="hljs-keyword">let</span> element = getLi();
      element.innerHTML = <span class="hljs-string">`æ–°é—»<span class="hljs-subst">${start+i}</span>`</span>;
      news.appendChild(element);
  }
}
goNext();

</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 id="t16719. æ¨¡ç‰ˆæ–¹æ³•">19. æ¨¡ç‰ˆæ–¹æ³• <a href="#t16719. æ¨¡ç‰ˆæ–¹æ³•"> # </a></h2>
<ul>
<li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤çš„å®ç°å»¶è¿Ÿåˆ°å­ç±»ä¸­</li>
<li>æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­æŸäº›æ­¥éª¤çš„å…·ä½“å®ç°</li>
<li>ä¸€èˆ¬æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ½è±¡çˆ¶ç±»ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å…·ä½“çš„å®ç°å­ç±»</li>
<li>å¥½è±ååŸåˆ™ï¼Œå­ç±»æ”¾å¼ƒäº†æ§åˆ¶æƒï¼Œæ”¹ç”±çˆ¶ç±»æ¥è°ƒç”¨<ul>
<li>å‘å¸ƒè®¢é˜…</li>
<li>å›è°ƒå‡½æ•°</li>
</ul>
</li>
</ul>
<h3 id="t16819.1 ç±»å›¾">19.1 ç±»å›¾ <a href="#t16819.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_375f96b8_1720749.jpeg" alt="template"></p>
<h3 id="t16919.2 ä»£ç ">19.2 ä»£ç  <a href="#t16919.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span></span>{
    dinner() {
        <span class="hljs-keyword">this</span>.buy();
        <span class="hljs-keyword">this</span>.cook();
        <span class="hljs-keyword">this</span>.eat();
    }
    buy() {}
    cook() {}
    eat() {}
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Jiangwen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Person</span></span>{
    buy() {<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ä¹°é»„ç“œ'</span>);}
    cook() {<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ‹é»„ç“œ'</span>);}
    eat() {<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'åƒé»„ç“œ'</span>);}
}
<span class="hljs-keyword">let</span> j=<span class="hljs-keyword">new</span> Jiangwen();
j.dinner();
</code></pre>
<h3 id="t17019.3 åœºæ™¯">19.3 åœºæ™¯ <a href="#t17019.3 åœºæ™¯"> # </a></h3>
<h4 id="t17119.3.1 æç¤ºæ¡†">19.3.1 æç¤ºæ¡† <a href="#t17119.3.1 æç¤ºæ¡†"> # </a></h4>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"3.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"3.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>    
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">let</span> dialog = <span class="hljs-keyword">new</span> ConfirmDialog({
    <span class="hljs-attr">title</span>:<span class="hljs-string">'æ ‡é¢˜'</span>,
    <span class="hljs-attr">content</span>:<span class="hljs-string">'å†…å®¹'</span>
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dialog</span></span>{
    <span class="hljs-keyword">constructor</span>(options) {
        <span class="hljs-keyword">this</span>.title = options.title||<span class="hljs-string">'æ ‡é¢˜'</span>;
        <span class="hljs-keyword">this</span>.content = options.content||<span class="hljs-string">'å†…å®¹'</span>;
        <span class="hljs-keyword">this</span>.onConfirm = options.onConfirm||<span class="hljs-keyword">this</span>.hide;
        <span class="hljs-keyword">this</span>.onCancel = options.onCancel||<span class="hljs-keyword">this</span>.hide;
        <span class="hljs-keyword">this</span>.init();
        <span class="hljs-keyword">this</span>.initEventHandler();
    }
    init() {
        <span class="hljs-keyword">this</span>.panel=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
        <span class="hljs-keyword">this</span>.panel.className=<span class="hljs-string">'dialog'</span>;

        <span class="hljs-keyword">this</span>.titleP=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'p'</span>);
        <span class="hljs-keyword">this</span>.titleP.innerHTML=<span class="hljs-keyword">this</span>.title;
        <span class="hljs-keyword">this</span>.panel.appendChild(<span class="hljs-keyword">this</span>.titleP);

        <span class="hljs-keyword">this</span>.contentP=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'p'</span>);
        <span class="hljs-keyword">this</span>.contentP.innerHTML=<span class="hljs-keyword">this</span>.content;
        <span class="hljs-keyword">this</span>.panel.appendChild(<span class="hljs-keyword">this</span>.contentP);

        <span class="hljs-keyword">this</span>.confirmBtn=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'button'</span>);
        <span class="hljs-keyword">this</span>.confirmBtn.className=<span class="hljs-string">'button confirm-button'</span>;
        <span class="hljs-keyword">this</span>.confirmBtn.innerHTML=<span class="hljs-string">'ç¡®å®š'</span>;
        <span class="hljs-keyword">this</span>.panel.appendChild(<span class="hljs-keyword">this</span>.confirmBtn);

        <span class="hljs-keyword">this</span>.cancelBtn=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'button'</span>);
        <span class="hljs-keyword">this</span>.cancelBtn.className=<span class="hljs-string">'button cancel-button'</span>;
        <span class="hljs-keyword">this</span>.cancelBtn.innerHTML=<span class="hljs-string">'å–æ¶ˆ'</span>;
        <span class="hljs-keyword">this</span>.panel.appendChild(<span class="hljs-keyword">this</span>.cancelBtn);

        <span class="hljs-built_in">document</span>.body.appendChild(<span class="hljs-keyword">this</span>.panel);
    }
    inithttp:<span class="hljs-comment">//image.bubuko.com/info/201807/20180712173511381297.pngntListener('click',() =&gt; {</span>
            <span class="hljs-keyword">this</span>.onConfirm();
            <span class="hljs-keyword">this</span>.hide();
        });
        <span class="hljs-keyword">this</span>.cancelBtn.addEventListener(<span class="hljs-string">'click'</span>,() =&gt; {
            <span class="hljs-keyword">this</span>.onCancel();
            <span class="hljs-keyword">this</span>.hide();
        });
    }
    show() {
        <span class="hljs-keyword">this</span>.panel.style.display=<span class="hljs-string">'block'</span>;
    }
    hide() {
        <span class="hljs-keyword">this</span>.panel.style.display=<span class="hljs-string">'none'</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ContentDialog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Dialog</span></span>{
    init() {
        <span class="hljs-keyword">super</span>.init();
        <span class="hljs-keyword">this</span>.titleP.parentNode.removeChild(<span class="hljs-keyword">this</span>.titleP);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfirmDialog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Dialog</span></span>{
    init() {
        <span class="hljs-keyword">super</span>.init();
        <span class="hljs-keyword">this</span>.cancelBtn.parentNode.removeChild(<span class="hljs-keyword">this</span>.cancelBtn);
    }
}
</code></pre>
<pre><code class="lang-css"><span class="hljs-selector-class">.dialog</span>{
    <span class="hljs-attribute">width</span>:<span class="hljs-number">400px</span>;
    <span class="hljs-attribute">height</span>:<span class="hljs-number">300px</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">padding</span>:<span class="hljs-number">20px</span>;
    <span class="hljs-attribute">top</span>:<span class="hljs-number">50%</span>;
    <span class="hljs-attribute">left</span>:<span class="hljs-number">50%</span>;
    <span class="hljs-attribute">margin-left</span>:-<span class="hljs-number">200px</span>;
    <span class="hljs-attribute">margin-top</span>:-<span class="hljs-number">150px</span>;
    <span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid<span class="hljs-number">#000</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#EEE</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
}

<span class="hljs-selector-class">.dialog</span> <span class="hljs-selector-tag">button</span>{
    <span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>:<span class="hljs-number">30px</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">outline</span>: none;

}
<span class="hljs-selector-class">.dialog</span> <span class="hljs-selector-class">.confirm-button</span> {
    <span class="hljs-attribute">right</span>:<span class="hljs-number">140px</span>;
    <span class="hljs-attribute">bottom</span>:<span class="hljs-number">20px</span>;
}
<span class="hljs-selector-class">.dialog</span> <span class="hljs-selector-class">.cancel-button</span> {
    <span class="hljs-attribute">right</span>:<span class="hljs-number">20px</span>;
    <span class="hljs-attribute">bottom</span>:<span class="hljs-number">20px</span>;
}
</code></pre>
<h4 id="t17219.3.2">19.3.2 <a href="#t17219.3.2"> # </a></h4>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192800_bdf6372b_1720749.png" alt="react-lifecycle"></p>
<h2 id="t17320. èŒè´£é“¾æ¨¡å¼">20. èŒè´£é“¾æ¨¡å¼ <a href="#t17320. èŒè´£é“¾æ¨¡å¼"> # </a></h2>
<ul>
<li>ä¸€æ­¥æ“ä½œå¯èƒ½åˆ†ä¸ºå¤šä¸ªèŒè´£è§’è‰²æ¥å®Œæˆ</li>
<li>æŠŠè¿™äº›è§’è‰²éƒ½åˆ†å¼€ï¼Œç„¶åç”¨ä¸€ä¸ªé“¾ä¸²èµ·æ¥</li>
<li>å°†å‘èµ·è€…å’Œå„ä¸ªå¤„ç†è€…è¿›è¡Œéš”ç¦»</li>
</ul>
<h3 id="t17420.1 ç±»å›¾">20.1 ç±»å›¾ <a href="#t17420.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_0dc3a8f6_1720749.jpeg" alt="responsibility"></p>
<h3 id="t17520.2 ä»£ç ">20.2 ä»£ç  <a href="#t17520.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span></span>{
    <span class="hljs-keyword">constructor</span>(next) {
        <span class="hljs-keyword">this</span>.next=next;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GroupLeader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Employee</span></span>{
    audit() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`ç»„é•¿å·²ç»å®¡æ‰¹!`</span>);
        <span class="hljs-keyword">this</span>.next&amp;&amp;<span class="hljs-keyword">this</span>.next.audit();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Manager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Employee</span></span>{
    audit() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`ç»ç†å·²ç»å®¡æ‰¹!`</span>);
        <span class="hljs-keyword">this</span>.next&amp;&amp;<span class="hljs-keyword">this</span>.next.audit();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Boss</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Employee</span></span>{
    audit() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`è€æ¿å·²ç»å®¡æ‰¹!`</span>);
        <span class="hljs-keyword">this</span>.next&amp;&amp;<span class="hljs-keyword">this</span>.next.audit();
    }
}
<span class="hljs-keyword">let</span> boss=<span class="hljs-keyword">new</span> Boss();
<span class="hljs-keyword">let</span> manager=<span class="hljs-keyword">new</span> Manager(boss);
<span class="hljs-keyword">let</span> groupLeader=<span class="hljs-keyword">new</span> GroupLeader(manager);
groupLeader.audit();

</code></pre>
<h2 id="t17621. å¤‡å¿˜å½•æ¨¡å¼">21. å¤‡å¿˜å½•æ¨¡å¼ <a href="#t17621. å¤‡å¿˜å½•æ¨¡å¼"> # </a></h2>
<ul>
<li>è®°å½•ä¸€ä¸ªå¯¹è±¡çš„å˜åŒ–</li>
<li>å¯ä»¥æ¢å¤ä¹‹å‰çš„æŸä¸ªçŠ¶æ€</li>
</ul>
<h3 id="t17721.1 ç±»å›¾">21.1 ç±»å›¾ <a href="#t17721.1 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_153a110d_1720749.jpeg" alt="memos"></p>
<h3 id="t17821.2 ä»£ç ">21.2 ä»£ç  <a href="#t17821.2 ä»£ç "> # </a></h3>
<pre><code class="lang-html">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"save-btn"</span>&gt;</span>ä¿å­˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"prev-btn"</span>&gt;</span>ä¸Šä¸€æ­¥<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"next-btn"</span>&gt;</span>ä¸‹ä¸€æ­¥<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
      <span class="hljs-keyword">let</span> content = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'content'</span>);
      <span class="hljs-keyword">let</span> saveBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'save-btn'</span>);
      <span class="hljs-keyword">let</span> prevBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'prev-btn'</span>);
      <span class="hljs-keyword">let</span> nextBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'next-btn'</span>);
      <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Memo</span></span>{
          <span class="hljs-keyword">constructor</span>(content){
              <span class="hljs-keyword">this</span>.content = content;
          }
      }
      <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Memos</span> </span>{
          <span class="hljs-keyword">constructor</span>(){
              <span class="hljs-keyword">this</span>.index = <span class="hljs-number">0</span>;
              <span class="hljs-keyword">this</span>.list = [<span class="hljs-keyword">new</span> Memo(<span class="hljs-string">''</span>)];
          }
          add(content){
              <span class="hljs-keyword">this</span>.list[++<span class="hljs-keyword">this</span>.index] = <span class="hljs-keyword">new</span> Memo(content);
          }
          get(){
              <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.list[<span class="hljs-keyword">this</span>.index];
          }
          prev(){
              <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.index ==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> alert(<span class="hljs-string">'æ²¡æœ‰ä¸Šä¸€æ­¥'</span>);
              <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.list[--<span class="hljs-keyword">this</span>.index];
          }
          next(){
               <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.index ==<span class="hljs-keyword">this</span>.list.length<span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> alert(<span class="hljs-string">'æ²¡æœ‰ä¸‹ä¸€æ­¥'</span>);
              <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.list[++<span class="hljs-keyword">this</span>.index];
          }
      }
      <span class="hljs-keyword">let</span> memos = <span class="hljs-keyword">new</span> Memos();
      saveBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          memos.add(content.value);
      });
      prevBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">let</span> memo = memos.prev();
          content.value = memo.content;
      });
      nextBtn.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">let</span> memo = memos.next();
          content.value = memo.content;
      });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 id="t17922. ä¸­ä»‹è€…æ¨¡å¼">22. ä¸­ä»‹è€…æ¨¡å¼ <a href="#t17922. ä¸­ä»‹è€…æ¨¡å¼"> # </a></h2>
<h3 id="t18022.1 ç±»åº“">22.1 ç±»åº“ <a href="#t18022.1 ç±»åº“"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_bb120e34_1720749.jpeg" alt="mediator"></p>
<h3 id="t18122.2 ä»£ç ">22.2 ä»£ç  <a href="#t18122.2 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Boy</span></span>{
    <span class="hljs-keyword">constructor</span>(mediator) {
        <span class="hljs-keyword">this</span>.mediator=mediator;
        <span class="hljs-keyword">this</span>.salary=<span class="hljs-number">1000</span>;
    }
    learnGirl() {
        <span class="hljs-keyword">this</span>.mediator.learnGirl();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Girl</span></span>{
    <span class="hljs-keyword">constructor</span>(mediator) {
        <span class="hljs-keyword">this</span>.mediator=mediator;
        <span class="hljs-keyword">this</span>.age=<span class="hljs-number">28</span>;
    }
    learnBoy() {
        <span class="hljs-keyword">this</span>.mediator.learnBoy();
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mediator</span></span>{
    <span class="hljs-keyword">constructor</span>(boy,girl) {
        <span class="hljs-keyword">this</span>.boy=boy;
        <span class="hljs-keyword">this</span>.girl=girl;
    }
    learnBoy() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`è¿™ä¸ªç”·å­©æœˆè–ª<span class="hljs-subst">${<span class="hljs-keyword">this</span>.boy.salary*<span class="hljs-number">10</span>}</span>`</span>);
    }
    learnGirl() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`è¿™ä¸ªå¥³å­©å¹´é¾„<span class="hljs-subst">${<span class="hljs-keyword">this</span>.girl.age<span class="hljs-number">-10</span>}</span>`</span>);
    }
}
<span class="hljs-keyword">let</span> boy=<span class="hljs-keyword">new</span> Boy();
<span class="hljs-keyword">let</span> girl=<span class="hljs-keyword">new</span> Girl();
<span class="hljs-keyword">let</span> mediator=<span class="hljs-keyword">new</span> Mediator(boy,girl);
boy.mediator=mediator;
girl.mediator=mediator;
boy.learnGirl();
girl.learnBoy();
</code></pre>
<h2 id="t18223. è®¿é—®è€…æ¨¡å¼">23. è®¿é—®è€…æ¨¡å¼ <a href="#t18223. è®¿é—®è€…æ¨¡å¼"> # </a></h2>
<ul>
<li>å°†æ•°æ®æ“ä½œå’Œæ•°æ®ç»“æ„è¿›è¡Œåˆ†ç¦»</li>
<li>æœ‰è¿™ä¹ˆä¸€ä¸ªæ“ä½œï¼Œå®ƒæ˜¯ä½œç”¨äºä¸€äº›å…ƒç´ ä¹‹ä¸Šçš„ï¼Œè€Œè¿™äº›å…ƒç´ å±äºæŸä¸€ä¸ªå¯¹è±¡ç»“æ„ã€‚</li>
<li>åŒæ—¶è¿™ä¸ªæ“ä½œæ˜¯åœ¨ä¸æ”¹å˜å„å…ƒç´ ç±»çš„å‰æä¸‹ï¼Œåœ¨è¿™ä¸ªå‰æä¸‹å®šä¹‰æ–°æ“ä½œæ˜¯è®¿é—®è€…æ¨¡å¼ç²¾é«“ä¸­çš„ç²¾é«“ã€‚</li>
</ul>
<h3 id="t18323.1 ç»„æˆéƒ¨åˆ†">23.1 ç»„æˆéƒ¨åˆ† <a href="#t18323.1 ç»„æˆéƒ¨åˆ†"> # </a></h3>
<ul>
<li>ObjectStructureï¼šå®šä¹‰å½“ä¸­æ‰€è¯´çš„å¯¹è±¡ç»“æ„ï¼Œå¯¹è±¡ç»“æ„æ˜¯ä¸€ä¸ªæŠ½è±¡è¡¨è¿°ï¼Œå®ƒå†…éƒ¨ç®¡ç†äº†å…ƒç´ é›†åˆï¼Œå¹¶ä¸”å¯ä»¥è¿­ä»£è¿™äº›å…ƒç´ ä¾›è®¿é—®è€…è®¿é—®ã€‚</li>
<li>Elementï¼šå…ƒç´ æ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ¥å—è®¿é—®è€…çš„æ–¹æ³•ï¼ˆAcceptï¼‰ï¼Œå…¶æ„ä¹‰æ˜¯æŒ‡æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¦å¯ä»¥è¢«è®¿é—®è€…è®¿é—®ã€‚</li>
<li>ConcreteElementAã€ConcreteElementBï¼šå…·ä½“çš„å…ƒç´ ç±»ï¼Œå®ƒæä¾›æ¥å—è®¿é—®æ–¹æ³•çš„å…·ä½“å®ç°ï¼Œè€Œè¿™ä¸ªå…·ä½“çš„å®ç°ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯ä½¿ç”¨è®¿é—®è€…æä¾›çš„è®¿é—®è¯¥å…ƒç´ ç±»çš„æ–¹æ³•ã€‚</li>
<li>Visitorï¼šæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†å¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆElementï¼‰è®¿é—®çš„è¡Œä¸ºï¼Œå®ƒçš„å‚æ•°å°±æ˜¯å¯ä»¥è®¿é—®çš„å…ƒç´ ï¼Œå®ƒçš„æ–¹æ³•æ•°ç†è®ºä¸Šæ¥è®²ä¸å…ƒç´ ä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤ï¼Œè®¿é—®è€…æ¨¡å¼è¦æ±‚å…ƒç´ çš„ç±»æ—è¦ç¨³å®šï¼Œå¦‚æœç»å¸¸æ·»åŠ ã€ç§»é™¤å…ƒç´ ç±»ï¼Œå¿…ç„¶ä¼šå¯¼è‡´é¢‘ç¹åœ°ä¿®æ”¹Visitoræ¥å£ï¼Œå¦‚æœè¿™æ ·åˆ™ä¸é€‚åˆä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚</li>
</ul>
<h3 id="t18423.2 ç±»å›¾">23.2 ç±»å›¾ <a href="#t18423.2 ç±»å›¾"> # </a></h3>
<p><img src="https://images.gitee.com/uploads/images/2019/0109/192759_6d3a62a9_1720749.jpeg" alt="visitor"></p>
<h3 id="t18523.3 ä»£ç ">23.3 ä»£ç  <a href="#t18523.3 ä»£ç "> # </a></h3>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father</span></span>{
    <span class="hljs-keyword">constructor</span>(name,wealth) {
        <span class="hljs-keyword">this</span>.name=name;
        <span class="hljs-keyword">this</span>.wealth=wealth;
    }
    accept(viewer) {
        viewer.viewFather(<span class="hljs-keyword">this</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mother</span></span>{
    <span class="hljs-keyword">constructor</span>(name,character) {
        <span class="hljs-keyword">this</span>.name=name;
        <span class="hljs-keyword">this</span>.character=character;
    }
    accept(viewer) {
        viewer.viewMother(<span class="hljs-keyword">this</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Son</span></span>{
    <span class="hljs-keyword">constructor</span>(name,look) {
        <span class="hljs-keyword">this</span>.name=name;
        <span class="hljs-keyword">this</span>.look=look;
    }
    accept(viewer) {
        viewer.viewSon(<span class="hljs-keyword">this</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Family</span></span>{
    <span class="hljs-keyword">constructor</span>(father,mother,son) {
        <span class="hljs-keyword">this</span>.father=father;
        <span class="hljs-keyword">this</span>.mother=mother
        <span class="hljs-keyword">this</span>.son=son;
    }
    view(viewer) {
        <span class="hljs-keyword">this</span>.father.accept(viewer);
        <span class="hljs-keyword">this</span>.mother.accept(viewer);
        <span class="hljs-keyword">this</span>.son.accept(viewer);
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Girl</span></span>{
    <span class="hljs-keyword">constructor</span>(name) {
        <span class="hljs-keyword">this</span>.name=name;
    }
    viewFather(father) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> <span class="hljs-subst">${father.name}</span> çš„è´¢å¯Œ <span class="hljs-subst">${father.wealth}</span>`</span>);        
    }
    viewMother(mother) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> <span class="hljs-subst">${mother.name}</span> çš„æ€§æ ¼ <span class="hljs-subst">${mother.character}</span>`</span>);        
    }
    viewSon(son) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> <span class="hljs-subst">${son.name}</span> çš„ç›¸è²Œ <span class="hljs-subst">${son.look}</span>`</span>);        
    }
}
<span class="hljs-keyword">let</span> father=<span class="hljs-keyword">new</span> Father(<span class="hljs-string">'å†¯çˆ¸çˆ¸'</span>,<span class="hljs-number">999999</span>);
<span class="hljs-keyword">let</span> mother=<span class="hljs-keyword">new</span> Mother(<span class="hljs-string">'å†¯å¦ˆå¦ˆ'</span>,<span class="hljs-string">'æ¸©æŸ”'</span>);
<span class="hljs-keyword">let</span> son=<span class="hljs-keyword">new</span> Son(<span class="hljs-string">'å†¯ç»å³°'</span>,<span class="hljs-string">'å¸…'</span>);
<span class="hljs-keyword">let</span> family=<span class="hljs-keyword">new</span> Family(father,mother,son);
<span class="hljs-keyword">let</span> zhaoliying=<span class="hljs-keyword">new</span> Girl(<span class="hljs-string">'èµµä¸½é¢–'</span>);
family.view(zhaoliying);
</code></pre>
<h3 id="t18623.3 åº”ç”¨åœºæ™¯">23.3 åº”ç”¨åœºæ™¯ <a href="#t18623.3 åº”ç”¨åœºæ™¯"> # </a></h3>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> babel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'babel-core'</span>);
<span class="hljs-keyword">let</span> t=<span class="hljs-built_in">require</span>(<span class="hljs-string">'babel-types'</span>);
<span class="hljs-keyword">let</span> preCalculator={
    <span class="hljs-attr">visitor</span>: {
        BinaryExpression(path) {
            <span class="hljs-keyword">let</span> node=path.node;
            <span class="hljs-built_in">console</span>.log(node.operator);
        }
    }
}


<span class="hljs-keyword">const</span> result = babel.transform(<span class="hljs-string">'const sum = 1+2'</span>,{
    <span class="hljs-attr">plugins</span>:[
        preCalculator
    ]
});
<span class="hljs-comment">//console.log(result.code);</span>
</code></pre>
<h2 id="t18724. è§£é‡Šå™¨æ¨¡å¼">24. è§£é‡Šå™¨æ¨¡å¼ <a href="#t18724. è§£é‡Šå™¨æ¨¡å¼"> # </a></h2>
<ul>
<li>æè¿°è¯­è¨€è¯­æ³•å¦‚ä½•å®šä¹‰ï¼Œå¦‚ä½•è§£é‡Šå’Œç¼–è¯‘</li>
<li><a href="https://www.cnblogs.com/chenssy/p/3346427.html">è§£é‡Šå™¨æ¨¡å¼</a><h3 id="t18824.1 ç±»å›¾">24.1 ç±»å›¾ <a href="#t18824.1 ç±»å›¾"> # </a></h3>
</li>
</ul>
<h3 id="t18924.2 ä»£ç ">24.2 ä»£ç  <a href="#t18924.2 ä»£ç "> # </a></h3>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>
    
</div>

<script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.js"></script>
<script>
$('.warpper .page-toc ul ul li a').on('click',function(){
  $('.warpper .page-toc ul ul li a').removeClass('my-active')
  $(this).addClass('my-active')
})
  // if (!$('.understand-me').length) {
  //   var bar = $(window).height() - $('.navbar ').height() - $('.page-toc').position().top;
  //   var count = bar / 26 / 2;
  //   var barHeight = $('.page-toc').outerHeight();
  //   $('.page-toc li').eq(0).children('a').addClass('red');
  //   var arr = [];
  //   $("h1,h2,h3,h4,h5,h6").each(function () {
  //     arr.push($(this).position().top);
  //   });
  //   var timer
  //   function dark() {
  //     clearTimeout(timer)
  //      timer = setTimeout(function () {
  //      var top = Math.abs($('.page-toc > ul').position().top);
  //      var cur = $('.content').scrollTop();
  //      for (var i = arr.length; i >= 0; i--) {
  //        if (arr[i] <= cur) {
  //          break;
  //        }
  //      }
  //      if (i === -1) {
  //        i = 0;
  //      }
  //      $('.page-toc li a').removeClass('red');
  //      $('.page-toc li').eq(i).children('a').addClass('red');
  //      let height = $('.page-toc li').eq(i).position().top-$('.page-toc').height(); // å¦‚æœå½“å‰çš„offsetå‡ºå»äº† å›åˆ°ä¸­é—´å¯å¥½ï¼Ÿ
  //      $('.page-toc').scrollTop(height+$('.page-toc').height()/2);
  //    },200)
  //   }

  //   $('.content').on('scroll', dark);
  // }
</script>
<style>

    /* ::-webkit-scrollbar{width:14px;}
    ::-webkit-scrollbar-track{background-color:transparent;}
    ::-webkit-scrollbar-thumb{background-color:transparent;}
    ::-webkit-scrollbar-thumb:hover {background-color:transparent}
    ::-webkit-scrollbar-thumb:active {background-color:transparent} */

    .page-toc > ul .red {
        background: #f3f3f3;
        z-index: 1;
        border-left: 3px solid #009a61;
        -webkit-transition: all .2s ease;
        transition: all .2s ease;
        color: #000
    }





</style>


</body></html>